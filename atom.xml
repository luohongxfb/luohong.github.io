<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ‰€è°“å‘æ—¥è‘µæ—&#39;s Blog</title>
  
  <subtitle>Empty page presents more possibilities.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://sunflowercoder.com/"/>
  <updated>2019-08-08T05:45:06.771Z</updated>
  <id>https://sunflowercoder.com/</id>
  
  <author>
    <name>æ‰€è°“å‘æ—¥è‘µæ—</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Git | CentOS 7æ­å»ºgitæœåŠ¡ç«¯</title>
    <link href="https://sunflowercoder.com/Git-CentOS-7%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    <id>https://sunflowercoder.com/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/</id>
    <published>2019-08-06T09:10:20.000Z</published>
    <updated>2019-08-08T05:45:06.771Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨githubæ‰˜ç®¡ï¼Œç‰¹åˆ«æ˜¯ç§åº“å…è´¹ä»¥åï¼Œä½†æ˜¯githubè¢«é»‘ä¹Ÿä¼šæœ‰å®•æœºçš„æ—¶å€™ï¼Œé‚£æ€ä¹ˆåŠå‘€ï¼Œå°±æ˜¯å–œæ¬¢ç”¨gitå‘€ï¼Œç‰¹åˆ«æ˜¯å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹ç¼–è¾‘å™¨ç”¨svnæ—¶ä»£ç é¢œè‰²ä¸æ›´æ”¹å‘€ï¼ˆä¸çŸ¥é“ç‰ˆæœ¬æ›´æ–°åæ˜¯å¦æ”¯æŒï¼‰ï¼Œéƒ½ä¸çŸ¥é“æ”¹äº†å“ªè¡Œ~ğŸ˜§è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨ç§æœ‰æœåŠ¡å™¨æ­å»ºgitæœåŠ¡ç«¯ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ç›®å‰é€šè¿‡<code>yum -y install git</code>å®‰è£…çš„gitç‰ˆæœ¬ä¸º 1.8.3.1ã€‚</p><img src="/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565083693.jpg"><p>ä½†æ˜¯<a href="https://mirrors.edge.kernel.org/pub/software/scm/git/" target="_blank" rel="noopener">å®˜æ–¹gitä»“åº“</a>çš„æœ€æ–°ç‰ˆç›®å‰æ˜¯2.9.5</p><img src="/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565083864.jpg"><a id="more"></a><p>æƒ³è¦å®‰è£…æœ€æ–°ç‰ˆçš„gitåªèƒ½ä¸‹è½½å‹ç¼©çš„æºç åŒ…å®‰è£…ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹åŸæ¥æ˜¯å¦æœ‰gitçš„ç›¸å…³åŒ…</span><br><span class="line">rpm -qa|grep git</span><br><span class="line"># å¯èƒ½çš„ç»“æœä¸º git-1.8.3.1-20.el7.x86_64</span><br><span class="line"># åˆ é™¤gitåŒ…</span><br><span class="line">rpm -e perl-Git</span><br><span class="line">rpm -e git</span><br><span class="line"></span><br><span class="line"># å®‰è£…ä¾èµ–</span><br><span class="line">yum install curl-devel expat-devel openssl-devel zlib-devel</span><br><span class="line"></span><br><span class="line"># ä¸‹è½½2.9.5ç‰ˆæœ¬å‹ç¼©åŒ… softä¸ºè‡ªå»ºç›®å½•</span><br><span class="line">cd /usr/local/soft</span><br><span class="line">wget  https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz</span><br><span class="line"></span><br><span class="line"># è§£å‹</span><br><span class="line">tar -xzvf git-2.9.5.tar.gz</span><br><span class="line"></span><br><span class="line"># ç¼–è¯‘å®‰è£…</span><br><span class="line">cd git-2.9.5</span><br><span class="line">make prefix=/usr/local all</span><br><span class="line">make prefix=/usr/local install</span><br></pre></td></tr></table></figure></p><p>å½“å‰å¯é€šè¿‡ <code>./git --version</code>æŸ¥çœ‹<br><img src="/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565086093.jpg"></p><p><strong>é…ç½®ç¯å¢ƒå˜é‡</strong></p><p><code>vi /etc/profile</code>åœ¨æœ€ååŠ å…¥<code>export PATH=/usr/local/soft/git-2.9.5:$PATH</code>ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line">i</span><br><span class="line"></span><br><span class="line">æœ€ååŠ å…¥export PATH=/usr/local/soft/git-2.9.5:$PATH</span><br><span class="line"></span><br><span class="line">Esc :wq</span><br><span class="line"></span><br><span class="line"># ç”Ÿæ•ˆç¯å¢ƒå˜é‡</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></p><p>è‡³æ­¤å®‰è£…ç»“æŸï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«çš„åˆ°å¤„ä½¿ç”¨å•¦~</p><h2 id="æ·»åŠ ç®¡ç†gitçš„ç”¨æˆ·"><a href="#æ·»åŠ ç®¡ç†gitçš„ç”¨æˆ·" class="headerlink" title="æ·»åŠ ç®¡ç†gitçš„ç”¨æˆ·"></a>æ·»åŠ ç®¡ç†gitçš„ç”¨æˆ·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºç”¨æˆ·git</span><br><span class="line">useradd git</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹ç”¨æˆ·gitçš„å¯†ç ï¼ˆè¦æ±‚&gt;8ä¸ªå­—ç¬¦ï¼‰è¾“å…¥ä¸¤éæ–°å¯†ç </span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>cd /home &amp;&amp; ls -al</code>å¯ä»¥çœ‹è§ç”¨æˆ·å·²ç»åˆ›å»ºæˆåŠŸ</p><img src="/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565087656.jpg"><p><strong>ç¦æ­¢ç”¨æˆ·gité€šè¿‡shellç™»å½•</strong>ï¼šä¸‹é¢è¦é…ç½®sshçš„å…¬é’¥ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œç¦æ­¢å®¢æˆ·ç«¯é€šè¿‡shellè¿œç¨‹ç™»å½•æœåŠ¡å™¨</p><p>åˆ‡æ¢ç”¨æˆ·gitï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºgit-shell-commands</p><img src="/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565089159.jpg"><p>æ³¨æ„ï¼šè¯¥ç›®å½•ä¸ºgit shelléœ€è¦çš„ï¼Œä¸ç„¶ä¼šæŠ¥</p><blockquote><p>fatal: Interactive git shell is not enabled.<br>hint: ~/git-shell-commands should exist and have read and execute access.</p></blockquote><p>ä¿®æ”¹/etc/passwdæ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># åˆ‡æ¢root</span><br><span class="line">su root</span><br><span class="line"></span><br><span class="line"># ç¼–è¾‘æ–‡ä»¶</span><br><span class="line">vi /etc/passwd</span><br><span class="line"></span><br><span class="line">i</span><br><span class="line"></span><br><span class="line"># æ‰¾åˆ°gitå¼€å§‹çš„</span><br><span class="line">git:x:1000:1000::/home/git:/bin/bash</span><br><span class="line"># æ›´æ”¹ä¸º </span><br><span class="line">git:x:1000:1000::/home/git:/bin/git-shell</span><br><span class="line"></span><br><span class="line">Esc :wq</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶æˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒå®¢æˆ·ç«¯é€šè¿‡shellç™»å½•ï¼Œåªå…è®¸ä½¿ç”¨git-shellè¿›è¡Œç®¡ç†gitçš„ä»“åº“ã€‚</p><p><a href="https://www.cnblogs.com/fly_dragon/p/8718614.html" target="_blank" rel="noopener">https://www.cnblogs.com/fly_dragon/p/8718614.html</a><br><a href="https://blog.csdn.net/w252064/article/details/82691343" target="_blank" rel="noopener">https://blog.csdn.net/w252064/article/details/82691343</a><br><a href="https://blog.csdn.net/bbcckkl/article/details/81634761" target="_blank" rel="noopener">https://blog.csdn.net/bbcckkl/article/details/81634761</a><br><a href="https://www.jianshu.com/p/062d5f6026e8" target="_blank" rel="noopener">https://www.jianshu.com/p/062d5f6026e8</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨githubæ‰˜ç®¡ï¼Œç‰¹åˆ«æ˜¯ç§åº“å…è´¹ä»¥åï¼Œä½†æ˜¯githubè¢«é»‘ä¹Ÿä¼šæœ‰å®•æœºçš„æ—¶å€™ï¼Œé‚£æ€ä¹ˆåŠå‘€ï¼Œå°±æ˜¯å–œæ¬¢ç”¨gitå‘€ï¼Œç‰¹åˆ«æ˜¯å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹ç¼–è¾‘å™¨ç”¨svnæ—¶ä»£ç é¢œè‰²ä¸æ›´æ”¹å‘€ï¼ˆä¸çŸ¥é“ç‰ˆæœ¬æ›´æ–°åæ˜¯å¦æ”¯æŒï¼‰ï¼Œéƒ½ä¸çŸ¥é“æ”¹äº†å“ªè¡Œ~ğŸ˜§è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨ç§æœ‰æœåŠ¡å™¨æ­å»ºgitæœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h2&gt;&lt;p&gt;ç›®å‰é€šè¿‡&lt;code&gt;yum -y install git&lt;/code&gt;å®‰è£…çš„gitç‰ˆæœ¬ä¸º 1.8.3.1ã€‚&lt;/p&gt;
&lt;img src=&quot;/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565083693.jpg&quot;&gt;
&lt;p&gt;ä½†æ˜¯&lt;a href=&quot;https://mirrors.edge.kernel.org/pub/software/scm/git/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜æ–¹gitä»“åº“&lt;/a&gt;çš„æœ€æ–°ç‰ˆç›®å‰æ˜¯2.9.5&lt;/p&gt;
&lt;img src=&quot;/Git-CentOS-7æ­å»ºgitæœåŠ¡ç«¯/1565083864.jpg&quot;&gt;
    
    </summary>
    
    
      <category term="CentOS7" scheme="https://sunflowercoder.com/tags/CentOS7/"/>
    
      <category term="Git" scheme="https://sunflowercoder.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>yum æŸ¥çœ‹å®‰è£…çš„åŒ… åŒ…å«äº†å“ªäº›æ–‡ä»¶</title>
    <link href="https://sunflowercoder.com/yum-%E6%9F%A5%E7%9C%8Binstall%E5%8C%85%E8%A3%85%E4%BA%86%E5%93%AA%E4%BA%9B%E6%96%87%E4%BB%B6/"/>
    <id>https://sunflowercoder.com/yum-æŸ¥çœ‹installåŒ…è£…äº†å“ªäº›æ–‡ä»¶/</id>
    <published>2019-08-06T03:51:01.000Z</published>
    <updated>2019-08-06T08:27:15.655Z</updated>
    
    <content type="html"><![CDATA[<p>centos7 rpmçš„åŒ…å¯ä»¥é€šè¿‡<code>rpm -qlp [åŒ…çš„è·¯å¾„]</code>æŸ¥çœ‹</p><img src="/yum-æŸ¥çœ‹installåŒ…è£…äº†å“ªäº›æ–‡ä»¶/1565073254.jpg"><p>ä½†æ˜¯é€šè¿‡yum å®‰è£…çš„åŒ…æ€ä¹ˆçœ‹å®‰è£…äº†å“ªäº›æ–‡ä»¶ğŸ˜§ï¼Ÿ</p><p>yumå‘½ä»¤æ˜¯åŸºäºrpmçš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½rpmåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä½“åŒ…ã€‚</p><p><strong>ç”¨æ³•ï¼šyum (é€‰é¡¹) (å‘½ä»¤) (å‚æ•°)</strong></p><a id="more"></a><p><strong>å¸¸ç”¨çš„é€‰é¡¹</strong>ï¼š</p><ul><li><code>-h, --help</code>ï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚</li><li><code>-C, --cacheonly</code>ï¼šå®Œå…¨ä»ç³»ç»Ÿç¼“å­˜ä¸­è¿è¡Œï¼Œä¸ä¸‹è½½ã€‚</li><li><code>-c [config file], --config=[config file]</code>ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®ã€‚</li><li><code>-R [minutes], --randomwait=[minutes]</code>ï¼šè®¾ç½®yumå¤„ç†ä¸€ä¸ªå‘½ä»¤çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ã€‚</li><li><code>-d [debug level], --debuglevel=[debug level]</code>ï¼šè®¾ç½®è°ƒè¯•æ—¥å¿—è¾“å‡ºç­‰çº§ï¼ˆ0-10ï¼‰ã€‚</li><li><code>-e [error level], --errorlevel=[error level]</code>ï¼šè®¾ç½®é”™è¯¯æ—¥å¿—è¾“å‡ºç­‰çº§ï¼ˆ0-10ï¼‰ã€‚</li><li><code>-q, --quiet</code>ï¼šå®‰é™æ¨¡å¼ã€‚</li><li><code>-v, --verbose</code>ï¼šè¯¦ç»†æ¨¡å¼ã€‚</li><li><code>-y, --assumeyes</code>ï¼šå¯¹æ‰€æœ‰çš„æé—®éƒ½å›ç­”â€yesâ€ã€‚</li><li><code>--version</code>ï¼šæ˜¾ç¤ºyumçš„ç‰ˆæœ¬ã€‚</li><li><code>--installroot=[path]</code>ï¼šè®¾ç½®å®‰è£…çš„æ ¹è·¯å¾„ã€‚</li><li><code>-x [package], --exclude=[package]</code>ï¼šé€šè¿‡åå­—æˆ–è€…globé£æ ¼çš„é€šé…ç¬¦æ’é™¤ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…ã€‚</li><li><code>--downloadonly</code>: åªä¸‹è½½ä¸æ›´æ–°å®‰è£…åŒ…ã€‚</li></ul><p><strong>å¸¸ç”¨çš„yumå‘½ä»¤</strong>ï¼š</p><ul><li><code>install &lt;package_name..&gt;</code>ï¼šå®‰è£…æŒ‡å®šçš„rpmåŒ…ï¼ˆå¤šä¸ªç”¨ç©ºæ ¼éš”å¼€ï¼‰åŠä¾èµ–ï¼Œä¸æŒ‡å®šåŒ…åå®‰è£…æ‰€æœ‰åŒ…ï¼</li><li><code>update &lt;package_name..&gt;</code>ï¼šæ›´æ–°æŒ‡å®šrpmåŒ…ï¼ˆå¤šä¸ªç”¨ç©ºæ ¼éš”å¼€ï¼‰ï¼Œä¸æŒ‡å®šåŒ…åæ›´æ–°æ‰€æœ‰èƒ½æ›´æ–°çš„åŒ…ï¼</li><li><code>check-update</code>ï¼šæ£€æŸ¥æ‰€æœ‰èƒ½æ›´æ–°çš„rpmåŒ…æ¸…å•ã€‚</li><li><code>remove/erase &lt;package_name..&gt;</code>ï¼šåˆ é™¤æŒ‡å®šçš„rpmè½¯ä»¶åŒ…<strong>åŠç›¸å…³ä¾èµ–</strong>ã€‚<strong><em>ç‰¹åˆ«æ³¨æ„ï¼šyum removeä¼šåˆ é™¤æ‰€æœ‰ä¾èµ–çš„åŒ…ï¼Œè°¨æ…ä½¿ç”¨ï¼ å»ºè®®é€šè¿‡rpm -eæ¥å¤„ç†ä¾èµ–åˆ é™¤ã€‚</em></strong></li><li><code>list</code>ï¼šåˆ—å‡ºæ‰€æœ‰å¯å®‰è£çš„rpmåŒ…æ¸…å•ã€‚</li><li><code>search [str]</code>ï¼šæŸ¥è¯¢åŒ…å«æŒ‡å®šä¸²çš„åŒ…åŠä»‹ç»æ¸…å•ã€‚</li><li><code>info &lt;package_name..&gt;</code>ï¼šæ˜¾ç¤ºæŒ‡å®šçš„rpmè½¯ä»¶åŒ…çš„æè¿°ä¿¡æ¯å’Œæ¦‚è¦ä¿¡æ¯ï¼›</li><li><code>clean &lt;packages/headers/oldheaders&gt;</code>ï¼šæ¸…ç†è¿‡æœŸçš„ç¼“å­˜ï¼Œ</li><li><code>shell</code>ï¼šè¿›å…¥yumçš„shellæç¤ºç¬¦ï¼›</li><li><code>localinstall &lt;package_name..&gt;</code>ï¼šå®‰è£…æœ¬åœ°çš„rpmåŒ…ï¼›</li><li><code>localupdate &lt;package_name..&gt;</code>ï¼šæ˜¾ç¤ºæœ¬åœ°rpmåŒ…è¿›è¡Œæ›´æ–°ï¼›</li><li><code>deplist &lt;package_name..&gt;</code>ï¼šæ˜¾ç¤ºrpmåŒ…çš„æ‰€æœ‰ä¾èµ–å…³ç³»ã€‚</li></ul><p>ç»¼ä¸Šï¼Œå¹¶æ²¡æœ‰æ¶‰åŠç›¸å…³rpmåŒ…å…·ä½“å®‰è£…äº†å“ªäº›æ–‡ä»¶ï¼Œ<code>yum info &lt;package_name..&gt;</code>åªæ˜¯å±•ç¤ºä¸€äº›æ¦‚è¦ä¿¡æ¯ï¼Œ</p><img src="/yum-æŸ¥çœ‹installåŒ…è£…äº†å“ªäº›æ–‡ä»¶/1565078428.jpg"><p>éš¾é“ä¸èƒ½çœ‹åˆ°å®‰è£…äº†å“ªäº›åŒ…å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œéœ€è¦å®‰è£…<code>yum-utils</code>åŒ…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install yum-utils</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡ <code>repoquery -ql &lt;package_name&gt;</code>æŸ¥çœ‹</p><img src="/yum-æŸ¥çœ‹installåŒ…è£…äº†å“ªäº›æ–‡ä»¶/1565078664.jpg"><p>å¦‚ä¸Šå¯ä»¥çœ‹è§php70w-7.0.33-1.w7.x86_64è¿™ä¸ªåŒ…åŒ…å«äº†/usr/lib64/httpd/modules/libphp7-zts.soã€/usr/lib64/httpd/modules/libphp7.soç­‰ï¼Œå®‰è£…phpä¸æˆåŠŸçš„å¾ˆå¤šéƒ½æ˜¯ç¼ºå°‘è¿™ä¸ªè¯¶~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;centos7 rpmçš„åŒ…å¯ä»¥é€šè¿‡&lt;code&gt;rpm -qlp [åŒ…çš„è·¯å¾„]&lt;/code&gt;æŸ¥çœ‹&lt;/p&gt;
&lt;img src=&quot;/yum-æŸ¥çœ‹installåŒ…è£…äº†å“ªäº›æ–‡ä»¶/1565073254.jpg&quot;&gt;
&lt;p&gt;ä½†æ˜¯é€šè¿‡yum å®‰è£…çš„åŒ…æ€ä¹ˆçœ‹å®‰è£…äº†å“ªäº›æ–‡ä»¶ğŸ˜§ï¼Ÿ&lt;/p&gt;
&lt;p&gt;yumå‘½ä»¤æ˜¯åŸºäºrpmçš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½rpmåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä½“åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æ³•ï¼šyum (é€‰é¡¹) (å‘½ä»¤) (å‚æ•°)&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="CentOS7" scheme="https://sunflowercoder.com/tags/CentOS7/"/>
    
      <category term="yum" scheme="https://sunflowercoder.com/tags/yum/"/>
    
  </entry>
  
  <entry>
    <title>Centos7é˜²ç«å¢™è®¾ç½®</title>
    <link href="https://sunflowercoder.com/Centos7%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE/"/>
    <id>https://sunflowercoder.com/Centos7é˜²ç«å¢™è®¾ç½®/</id>
    <published>2019-08-05T07:47:56.000Z</published>
    <updated>2019-08-06T08:27:15.728Z</updated>
    
    <content type="html"><![CDATA[<p>CentOS 7ä¸­ä½¿ç”¨çš„é˜²ç«å¢™ä¸ºfirewallï¼Œåœ¨CentOS 6.5ä¸­åœ¨iptablesé˜²ç«å¢™ä¸­è¿›è¡Œäº†å‡çº§äº†ã€‚ </p><ul><li>ç”¨äºå®ç°æŒä¹…çš„ç½‘ç»œæµé‡è§„åˆ™ã€‚</li><li>å¯ä»¥åŠ¨æ€ä¿®æ”¹å•æ¡è§„åˆ™ï¼ŒåŠ¨æ€ç®¡ç†è§„åˆ™é›†ï¼Œå…è®¸æ›´æ–°è§„åˆ™è€Œä¸ç ´åç°æœ‰ä¼šè¯å’Œè¿æ¥</li><li>ä½¿ç”¨åŒºåŸŸ(zone)å’ŒæœåŠ¡(service)</li><li>é»˜è®¤æ˜¯æ‹’ç»çš„ï¼Œéœ€è¦è®¾ç½®ä»¥åæ‰èƒ½æ”¾è¡Œ</li></ul><a id="more"></a><blockquote><p>CentOS 7æ”¾è¡Œç«¯å£éœ€è¦åœ¨äº‘æœåŠ¡å™¨ç®¡ç†åå°å’ŒæœåŠ¡å™¨firewallåŒæ—¶è®¾ç½®æ‰æœ‰æ•ˆï¼æ³¨æ„é»˜è®¤å…¨éƒ¨æ‹’ç»ï¼ç®¡ç†åå°é€šè¿‡æƒé™ç»„æ·»åŠ è§„åˆ™ã€‚</p></blockquote><h2 id="é…ç½®ç›®å½•"><a href="#é…ç½®ç›®å½•" class="headerlink" title="é…ç½®ç›®å½•"></a>é…ç½®ç›®å½•</h2><p><code>/usr/lib/firewalld/services</code> ç›®å½•ä¸­å­˜æ”¾å®šä¹‰å¥½çš„ç½‘ç»œæœåŠ¡å’Œç«¯å£å‚æ•°ï¼Œç³»ç»Ÿå‚æ•°ã€‚é…ç½®æ—¶å¼•ç”¨æœåŠ¡åç§°</p><img src="/Centos7é˜²ç«å¢™è®¾ç½®/1564993293.jpg"><p><code>/etc/firewalld/</code>ä¸ºé…ç½®ç›®å½•ï¼Œä½¿ç”¨åŒºåŸŸåœ¨zonesä¸‹</p><img src="/Centos7é˜²ç«å¢™è®¾ç½®/1564993463.jpg"><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><p>firewall-cmdï¼šæ˜¯Linuxæä¾›çš„æ“ä½œfirewallçš„ä¸€ä¸ªå·¥å…·ã€‚</p><p>ï¼ˆ1ï¼‰firewalldæœåŠ¡å¯åŠ¨ã€å…³é—­ã€é‡å¯ï¼Œè®¾ç½®å¼€æœºè‡ªå¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨</span><br><span class="line">systemctl start firewalld  </span><br><span class="line"></span><br><span class="line"># å…³é—­</span><br><span class="line">systemctl stop firewalld  </span><br><span class="line">  </span><br><span class="line"># é‡å¯</span><br><span class="line">systemctl restart firewalld    </span><br><span class="line"></span><br><span class="line"># å¼€æœºå¯åŠ¨       </span><br><span class="line">systemctl enable firewalld  </span><br><span class="line">      </span><br><span class="line"># å–æ¶ˆå¼€æœºå¯åŠ¨</span><br><span class="line">systemctl disable firewalld </span><br><span class="line">      </span><br><span class="line"># æŸ¥çœ‹æ˜¯å¦å¼€æœºè‡ªå¯</span><br><span class="line">systemctl is-enabled firewalld</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰æ·»åŠ ç«¯å£/æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼æ·»åŠ ç«¯å£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤çš„æ–¹å¼æ·»åŠ ç«¯å£ï¼Œæ³¨æ„ï¼Œä¿®æ”¹çš„å†…å®¹ä¼šåœ¨<code>/etc/firewalld/</code> ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¿˜ä½“ç°ã€‚ä¾‹å¦‚åœ¨<code>public</code>åŒºåŸŸæ·»åŠ tcpç«¯å£8020<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --permanent --add-port=8010/tcp</span><br></pre></td></tr></table></figure></p><ul><li>â€“permanentï¼šè¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…ï¼›</li><li>â€“add-portï¼šæ ‡è¯†æ·»åŠ çš„ç«¯å£ï¼›</li></ul><p>å¯ä»¥åœ¨<code>/etc/firewalld/zones/public.xml</code>ä¸­çœ‹è§å·²ç»æ·»åŠ æˆåŠŸã€‚</p><img src="/Centos7é˜²ç«å¢™è®¾ç½®/1564993818.jpg"><p>è¿™ä¸ªé…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ï¼Œå¦‚æ·»åŠ æœåŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/firewalld/zones/public.xml</span><br><span class="line">i</span><br><span class="line">åŠ å…¥ &lt;service name=&quot;mysql&quot;/&gt;</span><br></pre></td></tr></table></figure></p><img src="/Centos7é˜²ç«å¢™è®¾ç½®/1564994075.jpg"><p>ä¹Ÿå¯ä»¥é€šè¿‡<code>--add-service</code>æ·»åŠ ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-service=mysql</span><br></pre></td></tr></table></figure></p><p><strong>é‡è½½å¯ç”Ÿæ•ˆ</strong><code>firewall-cmd --reload</code>ã€‚</p><p>ï¼ˆ3ï¼‰æŸ¥çœ‹è§„åˆ™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure></p><img src="/Centos7é˜²ç«å¢™è®¾ç½®/1564994718.jpg"><p>ï¼ˆ4ï¼‰å…¶å®ƒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span><br><span class="line">firewall-cmd --state </span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹é»˜è®¤çš„åŸŸ</span><br><span class="line">firewall-cmd --get-default-zone</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æ‰€æœ‰çš„åŸŸ</span><br><span class="line">firewall-cmd --get-zones</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æ‰€æœ‰åŸŸçš„ä¿¡æ¯</span><br><span class="line">firewall-cmd --list-all-zones</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æŒ‡å®šåŸŸçš„ä¿¡æ¯</span><br><span class="line">firewall-cmd --zone=public --list-all</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹å¯ä»¥æ·»åŠ çš„æœåŠ¡</span><br><span class="line">firewall-cmd --get-services</span><br><span class="line"></span><br><span class="line"># è®¾ç½®æŒ‡å®šåŸŸä¸ºé»˜è®¤åŸŸ</span><br><span class="line">firewall-cmd --set-default-zone=public</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CentOS 7ä¸­ä½¿ç”¨çš„é˜²ç«å¢™ä¸ºfirewallï¼Œåœ¨CentOS 6.5ä¸­åœ¨iptablesé˜²ç«å¢™ä¸­è¿›è¡Œäº†å‡çº§äº†ã€‚ &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨äºå®ç°æŒä¹…çš„ç½‘ç»œæµé‡è§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥åŠ¨æ€ä¿®æ”¹å•æ¡è§„åˆ™ï¼ŒåŠ¨æ€ç®¡ç†è§„åˆ™é›†ï¼Œå…è®¸æ›´æ–°è§„åˆ™è€Œä¸ç ´åç°æœ‰ä¼šè¯å’Œè¿æ¥&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åŒºåŸŸ(zone)å’ŒæœåŠ¡(service)&lt;/li&gt;
&lt;li&gt;é»˜è®¤æ˜¯æ‹’ç»çš„ï¼Œéœ€è¦è®¾ç½®ä»¥åæ‰èƒ½æ”¾è¡Œ&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="CentOS7" scheme="https://sunflowercoder.com/tags/CentOS7/"/>
    
      <category term="firewall" scheme="https://sunflowercoder.com/tags/firewall/"/>
    
  </entry>
  
  <entry>
    <title>Centos 7åˆ©ç”¨yumå®‰è£…apache+mysql 8+php7 ä¸€ç¯‡æå®šï¼</title>
    <link href="https://sunflowercoder.com/Centos-7%E5%88%A9%E7%94%A8yum%E5%AE%89%E8%A3%85apache-mysql-8-php7/"/>
    <id>https://sunflowercoder.com/Centos-7åˆ©ç”¨yumå®‰è£…apache-mysql-8-php7/</id>
    <published>2019-08-04T15:32:45.000Z</published>
    <updated>2019-08-07T03:38:37.724Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»äº†centos7åˆ©ç”¨yumé…ç½®phpç¯å¢ƒçš„è¯¦ç»†æ­¥éª¤ï¼Œå¸¦ä½ è¿‡å‘~<br>å®‰è£…çš„mysqlç‰ˆæœ¬ä¸ºVer 8.0.17 for Linux on x86_64 (MySQL Community Server - GPL)<br>å®‰è£…çš„phpç‰ˆæœ¬ä¸ºPHP 7.0.33</p></blockquote><p><span id="inline-green">ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¤åˆ¶codeï¼Œæœ¬ç¯‡æ–‡ç« å…³é—­å¤åˆ¶è‡ªåŠ¨è¿½åŠ ç‰ˆæƒã€‚</span><br><a id="more"></a></p><h2 id="mysqlå®‰è£…"><a href="#mysqlå®‰è£…" class="headerlink" title="mysqlå®‰è£…"></a>mysqlå®‰è£…</h2><h3 id="1-æ¸…ç†åŸæ¥çš„mysqlæ–‡ä»¶"><a href="#1-æ¸…ç†åŸæ¥çš„mysqlæ–‡ä»¶" class="headerlink" title="1. æ¸…ç†åŸæ¥çš„mysqlæ–‡ä»¶"></a>1. æ¸…ç†åŸæ¥çš„mysqlæ–‡ä»¶</h3><p>(1)æŸ¥çœ‹æ˜¯å¦æœ‰å·²å®‰è£…çš„mysqlç‰ˆæœ¬<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mysql</span><br></pre></td></tr></table></figure></p><blockquote><p>å¯èƒ½çš„æ˜¾ç¤ºï¼š<br>mysql-community-libs-8.0.12-1.el7.x86_64<br>mysql80-community-release-el7-1.noarch<br>mysql-community-client-8.0.12-1.el7.x86_64<br>mysql-community-common-8.0.12-1.el7.x86_64<br>mysql-community-server-8.0.12-1.el7.x86_64</p></blockquote><p>å¦‚æœæœ‰çš„è¯ï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œåˆ é™¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove mysql-xxx-xxx-</span><br></pre></td></tr></table></figure></p><p>(2)æŸ¥æ‰¾mysqlçš„ç›¸å…³æ–‡ä»¶ï¼ˆå¦‚æœ‰å»ºè®®åˆ é™¤ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name mysql</span><br></pre></td></tr></table></figure></p><p>(3)æ ¹æ®è‡ªèº«çš„éœ€æ±‚å†³å®šæ˜¯å¦åˆ é™¤mysqlçš„é…ç½®æ–‡ä»¶ä¿¡æ¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /var/lib/mysql</span><br></pre></td></tr></table></figure></p><p>(4)æŸ¥æ‰¾å¹¶åˆ é™¤æ•°æ®åº“mariadb<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mariadb</span><br></pre></td></tr></table></figure></p><blockquote><p>å¯èƒ½å‡ºç°çš„ç»“æœmariadb-libs-5.5.56-2.el7.x86_64</p></blockquote><p>å°†æŸ¥æ‰¾å‡ºæ¥çš„ç»“æœè¿›è¡Œå¼ºåˆ¶åˆ é™¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure></p><h3 id="2-ä¸‹è½½å®‰è£…mysql"><a href="#2-ä¸‹è½½å®‰è£…mysql" class="headerlink" title="2. ä¸‹è½½å®‰è£…mysql"></a>2. ä¸‹è½½å®‰è£…mysql</h3><p>(1)è¿›å…¥<a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">mysql yumæº</a>é€‰æ‹©linux7è·³è½¬ï¼Œ</p><img src="/Centos-7åˆ©ç”¨yumå®‰è£…apache-mysql-8-php7/1564933276.jpg"><p>ä¸ç®¡loginå’Œsign upï¼Œå³é”®ç‚¹å‡»ä¸‹æ–¹çš„<strong>No thanks, just start my download.</strong>é€‰æ‹©<strong>å¤åˆ¶é“¾æ¥åœ°å€</strong></p><img src="/Centos-7åˆ©ç”¨yumå®‰è£…apache-mysql-8-php7/1564933588.jpg"><p>é€‰æ‹©ä¸‹è½½å­˜æ”¾çš„åœ°å€ï¼Œæ¯”å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br></pre></td></tr></table></figure></p><p>(2)ä½¿ç”¨å¤åˆ¶çš„é“¾æ¥åœ°å€yumæºï¼Œå¦‚ <a href="https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm" target="_blank" rel="noopener">https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure></p><p>(3)å®‰è£…yumæº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure></p><p>(4)æ›´æ–°yumæº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure></p><p>(5)å¼€å§‹å®‰è£…MySQL<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure></p><p>(6)å¯åŠ¨MySQL<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure></p><h3 id="3-æ›´æ”¹mysqlé»˜è®¤çš„éšæœºå¯†ç "><a href="#3-æ›´æ”¹mysqlé»˜è®¤çš„éšæœºå¯†ç " class="headerlink" title="3. æ›´æ”¹mysqlé»˜è®¤çš„éšæœºå¯†ç "></a>3. æ›´æ”¹mysqlé»˜è®¤çš„éšæœºå¯†ç </h3><p>å¯åŠ¨æˆåŠŸåå¯ä»¥æŸ¥çœ‹åˆå§‹åŒ–å¯†ç éšæœºç”Ÿæˆçš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/log/mysqld.log | grep password</span><br></pre></td></tr></table></figure></p><p>ç™»å½•MySQLï¼Œè¾“å…¥åˆšåˆšçš„éšæœºå¯†ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line">Enter password:</span><br></pre></td></tr></table></figure></p><p>æ›´æ”¹å¯†ç ï¼Œå¯†ç è¦æ±‚å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯æ•°å­—åŠä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;æ–°å¯†ç &apos;;</span><br></pre></td></tr></table></figure></p><h3 id="4-è¿œç¨‹è¿æ¥è®¾ç½®"><a href="#4-è¿œç¨‹è¿æ¥è®¾ç½®" class="headerlink" title="4. è¿œç¨‹è¿æ¥è®¾ç½®"></a>4. è¿œç¨‹è¿æ¥è®¾ç½®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; update user set host=&apos;%&apos; where user=&apos;root&apos;;</span><br></pre></td></tr></table></figure><p>æˆæƒç”¨æˆ·åçš„æƒé™ï¼Œèµ‹äºˆä»»ä½•ä¸»æœºè®¿é—®æ•°æ®çš„æƒé™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; WITH GRANT OPTION;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼šcentos7éœ€è¦åœ¨äº‘æœåŠ¡å™¨ç®¡ç†åå°å’ŒæœåŠ¡å™¨é˜²ç«å¢™éƒ½è¦å¼€å¯mysqlæœåŠ¡ç«¯å£ï¼Œé»˜è®¤ä¸º3306ï¼Œ<a href="../../Centos7é˜²ç«å¢™è®¾ç½®/">é˜²ç«å¢™é…ç½®æ–¹å¼æŸ¥çœ‹</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-service=mysql</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure></p><p>å¯é€šè¿‡è¿œç¨‹è¿æ¥å·¥å…·Navicatç­‰è¿æ¥å°è¯•ï¼Œå¦‚è¿æ¥å¤±è´¥<code>2003... unknown error 1006</code>åˆ™ä¸ºé˜²ç«å¢™é—®é¢˜ï¼Œå…¶ä»–é—®é¢˜å¯ä»¥å°è¯•æ›´æ”¹<code>/etc/my.cnf</code>å†é‡å¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># è¡¨ç¤ºå…è®¸ä»»ä½•ä¸»æœºç™»é™†MySQL</span><br><span class="line">bind-address = 0.0.0.0</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">default-authentication-plugin=mysql_native_password</span><br></pre></td></tr></table></figure></p><h2 id="apacheå®‰è£…"><a href="#apacheå®‰è£…" class="headerlink" title="apacheå®‰è£…"></a>apacheå®‰è£…</h2><p>ï¼ˆ1ï¼‰å®‰è£…ä¹‹å‰å…ˆæ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿæ˜¯å¦æœ‰é»˜è®¤å®‰è£…çš„apache<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep httpd</span><br></pre></td></tr></table></figure></p><p>æœ‰çš„è¯ï¼Œåˆ é™¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e * * * *(åŒ…å)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰å®‰è£…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># æ›´æ–°</span><br><span class="line">yum update</span><br><span class="line"></span><br><span class="line"># å®‰è£…å¿…å¤‡çš„åŒ…</span><br><span class="line">yum -y install gcc gcc-c++ make</span><br><span class="line"></span><br><span class="line"># å®‰è£…apache</span><br><span class="line">yum install httpd</span><br><span class="line"></span><br><span class="line"># apache æœåŠ¡å¼€å¯</span><br><span class="line">systemctl start httpd</span><br><span class="line"></span><br><span class="line"># è®¾ç½®apacheå¼€æœºå¯åŠ¨</span><br><span class="line">systemctl enable httpd</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ3ï¼‰é…ç½®é˜²ç«å¢™ï¼Œå¼€å¯80ç«¯å£ã€‚æ³¨æ„ï¼šcentos7éœ€è¦åœ¨äº‘æœåŠ¡å™¨ç®¡ç†åå°å’ŒæœåŠ¡å™¨é˜²ç«å¢™éƒ½è¦å¼€å¯httpæœåŠ¡ç«¯å£ï¼Œé»˜è®¤ä¸º80ï¼Œ<a href="../../Centos7é˜²ç«å¢™è®¾ç½®/">é˜²ç«å¢™é…ç½®æ–¹å¼æŸ¥çœ‹</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ4ï¼‰ç°åœ¨é€šè¿‡æœåŠ¡å™¨ip:80ç«¯å£è®¿é—®ï¼Œå°±å¯ä»¥çœ‹è§é»˜è®¤çš„apacheç•Œé¢å°±ç®—æˆåŠŸã€‚</p><blockquote><p>å¦‚æœä¸è¡Œï¼Œå¯å°è¯•æ›´æ”¹vi /etc/httpd/conf/httpd.conf é…ç½®æ–‡ä»¶å†é‡å¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerName localhost:80</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="phpå®‰è£…"><a href="#phpå®‰è£…" class="headerlink" title="phpå®‰è£…"></a>phpå®‰è£…</h2><p>ï¼ˆ1ï¼‰æŸ¥çœ‹æ˜¯å¦æœ‰ä»¥å‰çš„æ–‡ä»¶ï¼Œyumé»˜è®¤å®‰è£…çš„ä¸æ˜¯7.0ï¼Œå¦‚æœæœ‰å°è¯•ï¼Œéœ€è¦å®Œå…¨åˆ é™¤ä»¥å‰çš„ç‰ˆæœ¬<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep php</span><br></pre></td></tr></table></figure></p><blockquote><p>å¯èƒ½æœ‰å¦‚ä¸‹çš„åŒ…<br>php-pdo-5.1.6-27.el5_5.3<br>php-mysql-5.1.6-27.el5_5.3<br>php-xml-5.1.6-27.el5_5.3<br>php-cli-5.1.6-27.el5_5.3<br>php-common-5.1.6-27.el5_5.3<br>php-gd-5.1.6-27.el5_5.3</p></blockquote><p>å¦‚æœæœ‰çš„è¯éœ€è¦åˆ é™¤ã€‚æ³¨æ„åŒ…ä¹‹é—´å¯èƒ½ä¼šæœ‰äº’ç›¸ä¾èµ–ï¼Œå…ˆåˆ é™¤æ— ä¾èµ–çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e * * * *(åŒ…å)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰å®‰è£…ã€‚æ›´æ”¹yumæº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm </span><br><span class="line">yum -y install php70w.x86_64 php70w-cli.x86_64 php70w-common.x86_64 php70w-gd.x86_64 php70w-ldap.x86_64 php70w-mbstring.x86_64 php70w-mysql.x86_64 php70w-pdo.x86_64 php70w-pear.noarch php70w-process.x86_64 php70w-xml.x86_64 php70w-xmlrpc.x86_64</span><br></pre></td></tr></table></figure></p><p>phpç¯å¢ƒæµ‹è¯•ï¼Œåœ¨<code>/var/www/html</code>ç›®å½•ä¸‹ï¼Œ<code>vi index.php</code>è¾“å…¥å¦‚ä¸‹å†…å®¹ä¿å­˜ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">  phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>é‡å¯httpdæœåŠ¡ï¼Œ<code>systemctl restart httpd</code>åæŸ¥çœ‹ip:80/index.phpï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢å°±ç®—æˆåŠŸã€‚<br><img src="/Centos-7åˆ©ç”¨yumå®‰è£…apache-mysql-8-php7/1564997622.jpg"></p><p>å¦‚æœåŸæ ·è¾“å‡ºï¼Œæˆ–è€…ç›´æ¥ä¸‹è½½åˆ™å¤±è´¥ï¼Œå¤±è´¥æ£€æŸ¥<br>å¯å°è¯•æ›´æ”¹/etc/httpd/conf/httpd.confé‡å¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mime_module&gt;</span><br><span class="line">....</span><br><span class="line">AddType application/x-compress .Z</span><br><span class="line">AddType application/x-gzip .gz .tgz</span><br><span class="line">ä¸‹æ·»åŠ </span><br><span class="line">AddType application/x-httpd-php .php</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä¸»è¦ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»äº†centos7åˆ©ç”¨yumé…ç½®phpç¯å¢ƒçš„è¯¦ç»†æ­¥éª¤ï¼Œå¸¦ä½ è¿‡å‘~&lt;br&gt;å®‰è£…çš„mysqlç‰ˆæœ¬ä¸ºVer 8.0.17 for Linux on x86_64 (MySQL Community Server - GPL)&lt;br&gt;å®‰è£…çš„phpç‰ˆæœ¬ä¸ºPHP 7.0.33&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span id=&quot;inline-green&quot;&gt;ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¤åˆ¶codeï¼Œæœ¬ç¯‡æ–‡ç« å…³é—­å¤åˆ¶è‡ªåŠ¨è¿½åŠ ç‰ˆæƒã€‚&lt;/span&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="CentOS7" scheme="https://sunflowercoder.com/tags/CentOS7/"/>
    
      <category term="apache" scheme="https://sunflowercoder.com/tags/apache/"/>
    
      <category term="mysql" scheme="https://sunflowercoder.com/tags/mysql/"/>
    
      <category term="php" scheme="https://sunflowercoder.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º</title>
    <link href="https://sunflowercoder.com/%E5%9B%BD%E5%A4%96VPS%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B4%AD%E4%B9%B0%E5%8F%8Assr%E6%90%AD%E5%BB%BA/"/>
    <id>https://sunflowercoder.com/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/</id>
    <published>2019-08-04T01:35:36.000Z</published>
    <updated>2019-08-05T08:01:35.630Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¯å¦éœ€è¦ä¹°ä¸€ä¸ªäº‘ä¸»æœºï¼ŸVPSäº‘ï¼Ÿå½“å‰å¸¸è§çš„äº‘ä¸»æœºç®¡ç†å¹³å°åŒ…æ‹¬Eucalyptusäº‘ä¸»æœºï¼ŒCloudStackäº‘ä¸»æœºï¼ŒOpenStackäº‘ä¸»æœº , OpenNebulaäº‘ä¸»æœºï¼Œonappäº‘ä¸»æœºç­‰ã€‚å›½å¤–çš„æœåŠ¡å™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿç®€å•æ¥è¯´ä¸éœ€è¦å¤‡æ¡ˆï¼Œæ­ä¸ªssrå…äº†ä¹°vpnçš„é’±ã€‚</p><h2 id="å›½å¤–VPSé€‰è´­"><a href="#å›½å¤–VPSé€‰è´­" class="headerlink" title="å›½å¤–VPSé€‰è´­"></a>å›½å¤–VPSé€‰è´­</h2><p>SSRçš„é€Ÿåº¦å®Œå…¨å–å†³äºä½ VPSé€Ÿåº¦çš„å¿«æ…¢ï¼Œå›½å¤–VPSå•†å®¶ä¼—å¤šï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦æ¨èvultrå’Œæ¬ç“¦å·¥è¿™ä¸¤å®¶ã€‚</p><p><strong>1.vultr</strong></p><p>ç›®å‰åœ¨å…¨çƒæœ‰16ä¸ªæœºæˆ¿ï¼ˆåŒ…æ‹¬æ—¥æœ¬ã€æ–°åŠ å¡ã€ç¾å›½ç­‰ï¼‰ï¼ŒåŸºäºKVMè™šæ‹Ÿï¼Œçº¯SSDç¡¬ç›˜ï¼Œåå°å…è®¸è´­ä¹°Windowsç³»ç»Ÿçš„VPSï¼Œæ”¯æŒAlipayï¼ˆæ”¯ä»˜å®ç­‰ï¼‰ã€PayPalç­‰ã€‚å®˜æ–¹ç½‘ç«™ï¼š<a href="http://www.vultr.com" target="_blank" rel="noopener">www.vultr.com</a><br>ç‚¹å‡»<a href="https://www.vultr.com/?ref=8216634-4F" target="_blank" rel="noopener">Vultræ³¨å†Œå……å€¼é€50ç¾é‡‘ç‚¹å‡»è¿›å…¥</a>ï¼Œæ³¨å†Œå®Œæˆç‚¹å‡»<strong>Products</strong>ï¼Œé€‰æ‹©deploy new serveré€‰æ‹©åˆé€‚çš„æœºå™¨ã€‚<br><a id="more"></a><br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564885265.jpg"><br>å……å€¼é€‰æ‹©<strong>Billing</strong>ï¼Œä»é“¾æ¥è¿›å…¥ä¼šçœ‹è§å……å€¼é€50ç¾åˆ€<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/c67c054eecd4e1d6ad03206a6200006.png"></p><p><strong>2.æ¬ç“¦å·¥</strong></p><p>KVMè™šæ‹Ÿï¼Œæ”¯æŒCentos, Debian, Ubuntuï¼ŒSSDç¡¬ç›˜ï¼Œæ¯ä¸ªVPSè‡ªå¸¦ä¸€ä¸ªç‹¬ç«‹IPv4ï¼Œå¯é€‰æœºæˆ¿æœ‰å››ä¸ªã€‚</p><p>ç‚¹å‡»<a href="https://bandwagonhost.com/aff.php?aff=51191" target="_blank" rel="noopener">æ³¨å†Œæ¬ç“¦å·¥</a>ï¼Œæ³¨å†ŒæˆåŠŸåç‚¹å‡»<a href="https://bwh88.net/vps-hosting.php" target="_blank" rel="noopener">VPS Hosting</a>é€‰æ‹©ã€‚</p><h2 id="æœåŠ¡å™¨è¿æ¥"><a href="#æœåŠ¡å™¨è¿æ¥" class="headerlink" title="æœåŠ¡å™¨è¿æ¥"></a>æœåŠ¡å™¨è¿æ¥</h2><p>ä»¥vulträ¸ºä¾‹ï¼Œé€‰è´­å®Œæˆååœ¨<strong>Products</strong>èƒ½çœ‹è§ç­‰å¾…è®¾å¤‡å®‰è£…ï¼Œç‚¹å‡»è¿›å…¥è®¾å¤‡<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564892935.jpg"><br>å¯ä»¥çœ‹è§ipï¼Œusernameå’Œpasswordï¼Œé»˜è®¤çš„é˜²ç«å¢™æ˜¯æ‰“å¼€ssh 22ç«¯å£çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿œç¨‹ç™»å½•ç®¡ç†ï¼Œå°ç¼–ä½¿ç”¨çš„xshellï¼Œæ™®é€šçš„xshellæ˜¯è¯•ç”¨æœŸ30å¤©ï¼Œå°ç¼–è¿™é‡Œæ”¶é›†äº†ä¸€ä¸ªFree for home/schoolç‰ˆæœ¬çš„ï¼Œå¦‚æœé“¾æ¥å¤±æ•ˆå¯ä»¥è”ç³»æˆ‘</p><blockquote><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1ARlnKwUBWz9wQocCzmEU1Q" target="_blank" rel="noopener">https://pan.baidu.com/s/1ARlnKwUBWz9wQocCzmEU1Q</a><br>æå–ç ï¼š50qf<br>å¤åˆ¶è¿™æ®µå†…å®¹åæ‰“å¼€ç™¾åº¦ç½‘ç›˜æ‰‹æœºAppï¼Œæ“ä½œæ›´æ–¹ä¾¿å“¦</p></blockquote><p>å®‰è£…å®Œåé€‰æ‹©<strong>æ–‡ä»¶-&gt;æ–°å»º</strong>ï¼Œè®¾ç½®<strong>ä¸»æœºå</strong>ï¼Œå³ä¸ºvultråå°çš„ip addressã€‚<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564893531.jpg"><br>ç‚¹å‡»<strong>ç”¨æˆ·èº«ä»½éªŒè¯</strong>ï¼Œå¡«å†™ç”¨æˆ·åä¸ºvultrçš„usernameï¼Œå¯†ç ä¸ºvultrçš„passwordï¼Œç‚¹å‡»<strong>ç¡®å®š</strong>ã€‚<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564893834.jpg"><br>ä¼šè¯åˆ›å»ºå®Œæˆï¼ŒåŒå‡»å°±å¯ä»¥è¿æ¥ï¼Œæç¤ºå¯†ç ä¿å­˜çš„çª—å£å°±ç‚¹å‡»åŒæ„ï¼Œä¸ç„¶ä¸‹æ¬¡è¿˜å¾—è¾“å…¥å¯†ç ã€‚</p><h2 id="SSRæ­å»º"><a href="#SSRæ­å»º" class="headerlink" title="SSRæ­å»º"></a>SSRæ­å»º</h2><p>è¿æ¥åï¼Œåœ¨æƒ³è¦æ”¾ç½®çš„ä½ç½®å¼€å§‹æ­å»ºssrã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ yum install wget -y</span><br><span class="line"></span><br><span class="line">$ wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh</span><br><span class="line"></span><br><span class="line">$ chmod +x shadowsocksR.sh</span><br><span class="line"></span><br><span class="line">$ ./shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œåï¼Œä¼šæç¤ºä½ è®¾ç½®ç«¯å£ï¼ˆportï¼‰å’Œå¯†ç ï¼ˆpasswordï¼‰ï¼ŒåŠ å¯†æ–¹å¼,åè®®,æ··æ·†ç­‰</p><p>ï¼ˆ1ï¼‰è®¾ç½®SSRè¿æ¥å¯†ç ï¼šPlease enter password for ShadowsocksRã€‚ï¼ˆå¦‚ä¸è®¾å®šï¼Œé»˜è®¤ä¸º teddysun.comï¼‰<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/20181231160302.png"><br>ï¼ˆ2ï¼‰è®¾ç½®ä½ çš„æœåŠ¡å™¨ç«¯å£[1-65535]ï¼šPlease enter a port for ShadowsocksR ã€‚ï¼ˆå¦‚ä¸è®¾å®šå°±æ˜¯æç¤ºçš„ï¼‰<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/20181231160423.png"><br>ï¼ˆ3ï¼‰è®¾ç½®åŠ å¯†æ–¹å¼ï¼šPlease select stream cipher for ShadowsocksRï¼Œè¾“å…¥åºå·å›è½¦é€‰æ‹©ï¼š<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/20181231155203.png"><br>ï¼ˆ4ï¼‰é€‰æ‹©åè®®ï¼šPlease select protocol for ShadowsocksRï¼Œè¾“å…¥åºå·å›è½¦é€‰æ‹©ï¼šï¼ˆå¦‚ä¸è®¾å®šï¼Œé»˜è®¤ä¸º originï¼‰<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/20181231155214.png"><br>ï¼ˆ5ï¼‰é€‰æ‹©æ··æ·†æ–¹å¼ï¼šPlease select obfs for ShadowsocksRï¼Œè¾“å…¥åºå·å›è½¦é€‰æ‹©(å…æµè¯·é€‰æ‹©2:http_simple),ï¼ˆå¦‚ä¸è®¾å®šï¼Œé»˜è®¤ä¸º plainï¼‰<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/20181231155226.png"><br>è®¾ç½®å®Œæˆå›è½¦ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå®Œæˆï¼Œ<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564895298.jpg"></p><p>è¿˜éœ€è¦åœ¨æœåŠ¡å™¨åŠvultråå°å¼€æ”¾ç«¯å£ï¼å¦‚ ç«¯å£ä¸º8502<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨public.xmlæ·»åŠ ç«¯å£</span><br><span class="line">firewall-cmd --zone=public --permanent --add-port=8502/tcp </span><br><span class="line">firewall-cmd --zone=public --permanent --add-port=8502/udp </span><br><span class="line"></span><br><span class="line"># é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ</span><br><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure></p><p>vultråå°é…ç½®é˜²ç«å¢™ç«¯å£<strong>Products-&gt;firewall</strong>ã€‚<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564899008.jpg"><br>æ²¡æœ‰æƒé™ç»„çš„å°±åˆ›å»ºä¸€ä¸ªï¼Œ<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564899136.jpg"><br>æœ‰çš„è¯è¿›å…¥ç‚¹å‡»ç¼–è¾‘Edit firewallï¼Œé€‰æ‹©TCPï¼Œå¡«å†™åˆšåˆšè®¾ç½®ssrçš„ç«¯å£ï¼Œç‚¹å‡»åŠ å·æ·»åŠ <br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1564899249.jpg"><br>æç¤ºå¤§çº¦120Så†…ç”Ÿæ•ˆã€‚</p><p>SSRå„ç³»ç»Ÿè¿æ¥å·¥å…·ä¸‹è½½è¯·çœ‹<a href="https://github.com/shadowsocksï¼Œé€‰æ‹©åˆé€‚çš„ç³»ç»Ÿç‚¹å‡»releaseé€‰æ‹©ç‰ˆæœ¬ä¸‹è½½ã€‚" target="_blank" rel="noopener">https://github.com/shadowsocksï¼Œé€‰æ‹©åˆé€‚çš„ç³»ç»Ÿç‚¹å‡»releaseé€‰æ‹©ç‰ˆæœ¬ä¸‹è½½ã€‚</a></p><h2 id="ssrå¤šç«¯å£é…ç½®"><a href="#ssrå¤šç«¯å£é…ç½®" class="headerlink" title="ssrå¤šç«¯å£é…ç½®"></a>ssrå¤šç«¯å£é…ç½®</h2><p>è„šæœ¬é»˜è®¤åˆ›å»ºå•ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œå¦‚éœ€é…ç½®å¤šç”¨æˆ·ï¼Œéœ€æ›´æ”¹é…ç½®æ–‡ä»¶ã€‚</p><p>ssræœåŠ¡å¯åŠ¨/åœæ­¢/é‡å¯/çŠ¶æ€ï¼š/etc/init.d/shadowsocks start/stop/restart/status</p><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼švi /etc/shadowsocks.json æŒ‰iè¿›è¡Œç¼–è¾‘<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/af8d07d90911918ce5f82600b833ac0.png"><br>å°†åŸæ¥çš„<code>server_port</code>å’Œ<code>password</code>æ”¹ä¸º<code>port_password</code>å¯¹åº”çš„å¤šä¸ªä»¥portä¸ºé”®ï¼Œpasswordä¸ºå€¼å½¢å¼çš„<br><img src="/å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º/1c7689e846daa4f8e3dc57130906fca.png"><br>Esc :wqä¿å­˜é€€å‡ºã€‚é‡å¯shadowsocksæœåŠ¡ã€‚</p><p>æ³¨æ„ï¼šæ–°å¢åŠ çš„ç«¯å£å·portä»ç„¶éœ€è¦åœ¨é˜²ç«å¢™é…ç½®å…¥ç«™ç«¯å£è§„åˆ™ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¯å¦éœ€è¦ä¹°ä¸€ä¸ªäº‘ä¸»æœºï¼ŸVPSäº‘ï¼Ÿå½“å‰å¸¸è§çš„äº‘ä¸»æœºç®¡ç†å¹³å°åŒ…æ‹¬Eucalyptusäº‘ä¸»æœºï¼ŒCloudStackäº‘ä¸»æœºï¼ŒOpenStackäº‘ä¸»æœº , OpenNebulaäº‘ä¸»æœºï¼Œonappäº‘ä¸»æœºç­‰ã€‚å›½å¤–çš„æœåŠ¡å™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿç®€å•æ¥è¯´ä¸éœ€è¦å¤‡æ¡ˆï¼Œæ­ä¸ªssrå…äº†ä¹°vpnçš„é’±ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å›½å¤–VPSé€‰è´­&quot;&gt;&lt;a href=&quot;#å›½å¤–VPSé€‰è´­&quot; class=&quot;headerlink&quot; title=&quot;å›½å¤–VPSé€‰è´­&quot;&gt;&lt;/a&gt;å›½å¤–VPSé€‰è´­&lt;/h2&gt;&lt;p&gt;SSRçš„é€Ÿåº¦å®Œå…¨å–å†³äºä½ VPSé€Ÿåº¦çš„å¿«æ…¢ï¼Œå›½å¤–VPSå•†å®¶ä¼—å¤šï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦æ¨èvultrå’Œæ¬ç“¦å·¥è¿™ä¸¤å®¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.vultr&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç›®å‰åœ¨å…¨çƒæœ‰16ä¸ªæœºæˆ¿ï¼ˆåŒ…æ‹¬æ—¥æœ¬ã€æ–°åŠ å¡ã€ç¾å›½ç­‰ï¼‰ï¼ŒåŸºäºKVMè™šæ‹Ÿï¼Œçº¯SSDç¡¬ç›˜ï¼Œåå°å…è®¸è´­ä¹°Windowsç³»ç»Ÿçš„VPSï¼Œæ”¯æŒAlipayï¼ˆæ”¯ä»˜å®ç­‰ï¼‰ã€PayPalç­‰ã€‚å®˜æ–¹ç½‘ç«™ï¼š&lt;a href=&quot;http://www.vultr.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.vultr.com&lt;/a&gt;&lt;br&gt;ç‚¹å‡»&lt;a href=&quot;https://www.vultr.com/?ref=8216634-4F&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Vultræ³¨å†Œå……å€¼é€50ç¾é‡‘ç‚¹å‡»è¿›å…¥&lt;/a&gt;ï¼Œæ³¨å†Œå®Œæˆç‚¹å‡»&lt;strong&gt;Products&lt;/strong&gt;ï¼Œé€‰æ‹©deploy new serveré€‰æ‹©åˆé€‚çš„æœºå™¨ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="VPS" scheme="https://sunflowercoder.com/tags/VPS/"/>
    
      <category term="ssr" scheme="https://sunflowercoder.com/tags/ssr/"/>
    
  </entry>
  
  <entry>
    <title>Google Playåº”ç”¨ä¸Šæ¶æµç¨‹</title>
    <link href="https://sunflowercoder.com/Google-Play%E5%BA%94%E7%94%A8%E4%B8%8A%E6%9E%B6%E6%B5%81%E7%A8%8B/"/>
    <id>https://sunflowercoder.com/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/</id>
    <published>2019-08-02T07:38:31.000Z</published>
    <updated>2019-08-07T03:25:11.023Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ³¥èŒçˆ±ç©å°æ¸¸æˆçš„å°ç¼–å–œæ¬¢ç©2048ï¼Œè¿«äºå¸‚é¢ä¸Šçš„å°æ¸¸æˆå¹¿å‘Šå¤ªå¤šäº†ğŸ˜³ï¼Œæœºæ™ºçš„å°ç¼–å°±ç”¨cocos creatorå†™äº†ä¸ªå°æ¸¸æˆï¼Œæƒ³è¦å‘å¸ƒåˆ°çº¿ä¸Šç»™å¤§å®¶ä¸€èµ·ç©å‘€ğŸ˜ï¼Œå¼€å§‹æ”¾åˆ°github pageï¼Œåœ°å€ä¸º<a href="https://sunflowercoder.com/2048/">https://sunflowercoder.com/2048/</a> ï¼ˆç§»åŠ¨ç«¯æ‰“å¼€ï¼‰ï¼Œä½†æ˜¯ç½‘ä¸å¥½å¯å’‹æ•´å•Š~ æœºæ™ºçš„å°ç¼–æ‰“åŒ…æˆapkäº†ï¼Œå› ä¸ºå°ç¼–ä¸æƒ³è¦å€’è…¾ä¹°è½¯è‘—ï¼Œåˆè´¹æ—¶é—´çš„åˆè´¹é’±ğŸ˜‚ï¼Œå°ç¼–å°±æƒ³åˆ°å‘å¸ƒåˆ°google playå•¦</p><p>Cocos Creatoræ‰“åŒ…åˆ°åŸç”Ÿå¹³å°éœ€è¦å…ˆé…ç½®åŸç”Ÿå¼€å‘ç¯å¢ƒï¼Œå®‰è£…jdkï¼Œä¸‹è½½Android Studioå¹¶ä¸”ä¸‹è½½éœ€è¦çš„sdkå’Œndkï¼Œå…·ä½“æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.cocos.com/creator/manual/zh/publish/setup-native-development.html" target="_blank" rel="noopener">https://docs.cocos.com/creator/manual/zh/publish/setup-native-development.html</a> ã€‚æ‰“åŒ…å‘å¸ƒåŸç”Ÿå¹³å°æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.cocos.com/creator/manual/zh/publish/publish-native.html" target="_blank" rel="noopener">https://docs.cocos.com/creator/manual/zh/publish/publish-native.html</a> </p><blockquote><p>å‰æï¼šç§‘å­¦ä¸Šç½‘ï¼›ä¸€å¼ Visa/Masterå¡ï¼Œå¼€é€šè´¦å·éœ€è¦æ”¯ä»˜25ç¾åˆ€ã€‚</p></blockquote><p>2048 Google playåœ°å€ä¸ºï¼š<a href="https://play.google.com/store/apps/details?id=com.aililuo.simple2048" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.aililuo.simple2048</a></p><a id="more"></a><h2 id="è·å–ä¸€ä¸ªå¼€å‘è€…è´¦å·"><a href="#è·å–ä¸€ä¸ªå¼€å‘è€…è´¦å·" class="headerlink" title="è·å–ä¸€ä¸ªå¼€å‘è€…è´¦å·"></a>è·å–ä¸€ä¸ªå¼€å‘è€…è´¦å·</h2><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564737658.jpg"><p><strong>1. æ³¨å†Œgoogleè´¦å·ï¼ˆå¦‚å·²ç»æœ‰äº†å¯è·³è¿‡è¿™æ­¥ç›´æ¥ç™»å½•ï¼‰</strong>ï¼š<a href="https://accounts.google.com/SignUp" target="_blank" rel="noopener">https://accounts.google.com/SignUp</a><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564736601.jpg" title="æ³¨å†Œé¡µ.jpg"><br>æ¨èä½¿ç”¨gmailï¼Œå¦‚æœæƒ³ç”¨è‡ªå·±çš„é‚®ç®±ç‚¹å‡»-&gt;<strong>æ”¹ç”¨æˆ‘çš„å½“å‰ç”µå­é‚®ä»¶åœ°å€</strong>ã€‚<br>å¡«å†™å®Œæˆä¹‹åç‚¹å‡»ä¸‹ä¸€æ­¥ï¼ŒåŒæ„åè®®ï¼ŒéªŒè¯æ‰‹æœºå·ã€é‚®ç®±ä¹‹åï¼Œå¯ä»¥ç™»å½•å•¦~è´¦å·é¦–é¡µåœ°å€ä¸º<a href="https://myaccount.google.com/" target="_blank" rel="noopener">https://myaccount.google.com/</a></p><p><strong>2.å¼€é€šå¼€å‘è€…æƒé™</strong>ï¼š<a href="https://play.google.com/apps/publish/signup/" target="_blank" rel="noopener">https://play.google.com/apps/publish/signup/</a><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564737186.jpg"><br><strong>å‹¾é€‰</strong>åŒæ„åè®®ï¼Œç‚¹å‡»<strong>ç»§ç»­ä»˜æ¬¾</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564737418.jpg"><br>ç»‘å®šä¿¡ç”¨å¡ï¼Œæ”¯ä»˜25$å°±å¯ä»¥äº†ã€‚<strong>æ³¨æ„ï¼šå¯èƒ½ä¼šå¤šæ‰£äº†1$ï¼Œç¨ç­‰ä¼šè¿”è¿˜çš„ã€‚</strong></p><p>æ”¯ä»˜å®Œæˆï¼Œå¡«å†™è´¦å·çš„è¯¦ç»†ä¿¡æ¯ï¼Œç‚¹å‡»<strong>å®Œæˆæ³¨å†Œ</strong>å°±å¯ä»¥æ„‰å¿«çš„ä¸Šä¼ åº”ç”¨å•¦ã€‚</p><h2 id="åº”ç”¨åˆ›å»º"><a href="#åº”ç”¨åˆ›å»º" class="headerlink" title="åº”ç”¨åˆ›å»º"></a>åº”ç”¨åˆ›å»º</h2><p>å‰é¢çš„éƒ½å®Œæˆäº†ï¼Œè®¿é—®<a href="https://play.google.com/apps/publish/" target="_blank" rel="noopener">https://play.google.com/apps/publish/</a> ï¼Œåº”è¯¥èƒ½çœ‹è§å¦‚ä¸‹çš„ç•Œé¢ï¼Œç‚¹å‡»<strong>åˆ›å»ºåº”ç”¨</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564738170.jpg"><br>é€‰æ‹©appçš„<strong>é»˜è®¤è¯­è¨€</strong>ï¼Œå¡«å†™appåç§°ï¼Œç‚¹å‡»<strong>åˆ›å»º</strong>å³å¯è¿›å…¥è¯¦æƒ…é¡µ<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564738392.jpg"><br>è¯¦æƒ…é¡µå¯ä»¥çœ‹è§å·¦ä¾§ä¸€äº›å¸¦ç°è‰²å‹¾å‹¾çš„é¡¹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯å…¨éƒ¨ç‚¹äº®âœ…å°±å¯ä»¥å‘å¸ƒäº†<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564739032.jpg"></p><p>é»˜è®¤ä¸€åˆ›å»ºåº”ç”¨æ˜¯è·³è½¬çš„å•†å“è¯¦æƒ…ç•Œé¢çš„ï¼Œä½†æ˜¯éœ€è¦apkä¿¡æ¯åŠå†…å®¹åˆ†çº§ï¼Œå› å„æ­¥éª¤äº’ç›¸å…³è”ï¼Œå»ºè®®æŒ‰ä¸‹åˆ—çš„æ­¥éª¤æ¥ã€‚</p><p><strong>1. åº”ç”¨ç‰ˆæœ¬</strong></p><p>é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚å½“å‰æˆ‘ä»¬è¦å‘å¸ƒå½“ç„¶è¦é€‰æ­£å¼æ¸ é“ï¼Œç‚¹å‡»åé¢çš„<strong>ç®¡ç†</strong>-&gt;<strong>åˆ›å»ºç‰ˆæœ¬</strong>ã€‚<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564739753.jpg"><br>é€‰æ‹©åˆé€‚çš„æ–¹å¼ç®¡ç†åº”ç”¨ç­¾åå¯†é’¥ï¼Œå› ä¸ºå½“å‰å‘å¸ƒçš„å°æ¸¸æˆæ²¡æœ‰ä»€ä¹ˆä¸‰æ–¹ï¼Œå°ç¼–å°±ç›´æ¥é€‰æ‹©æ¨èçš„Googleç®¡ç†äº†ï¼Œç‚¹å‡»<strong>ç»§ç»­</strong>ï¼Œå¦‚æœéœ€è¦ä¿æŒåŸæ¥çš„ç­¾åé€‰æ‹©<strong>åœç”¨</strong>ã€‚<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564741856.jpg"><br>ä¸Šä¼ apk/app bundleï¼Œå¡«å†™ç‰ˆæœ¬åç§°ï¼Œç‰ˆæœ¬çš„æ–°åŠŸèƒ½ï¼Œç‚¹å‡»<strong>ä¿å­˜</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564742065.jpg"></p><p><strong>2. å†…å®¹åˆ†çº§</strong></p><p>å¡«å†™ç”µå­é‚®ç®±ï¼Œé€‰æ‹©åº”ç”¨çš„ç±»åˆ«<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564743989.jpg"><br>å¼€å§‹å¡«å†™åº”ç”¨å†…æœ‰æ— æš´åŠ›ã€ä»¤äººææƒ§çš„å†…å®¹ç­‰ï¼Œ2048é€‰å¦å°±å¯¹äº†<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564821698.jpg"><br>å¡«å†™å®Œæˆï¼Œç‚¹å‡»<strong>ä¿å­˜è°ƒæŸ¥é—®å·</strong>ï¼Œå†ç‚¹å‡»<strong>åˆ¤æ–­åˆ†çº§</strong>ï¼Œ<strong>ç¡®å®šåˆ†çº§</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564821850.jpg"></p><p><strong>3. å•†å“è¯¦æƒ…</strong></p><p>éœ€è¦å¡«å†™appåç§°ã€ç®€çŸ­çš„è‹±æ–‡è¯´æ˜ã€è¯¦ç»†çš„ä¸­æ–‡è¯´æ˜ã€‚<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564742240.jpg"><br>æ¥ä¸‹æ¥å°±æ˜¯å›¾ç‰‡èµ„æº  è¦æ±‚</p><ul><li>å›¾æ ‡ï¼š<ul><li><strong>512x512 32ä½PNG æ–‡ä»¶ä¸Šé™1024KB</strong></li><li>å½¢çŠ¶ï¼š<strong>å®Œæ•´æ­£æ–¹å½¢</strong> - Google Play ä¼šåŠ¨æ€å¤„ç†é®ç›–éƒ¨åˆ†ã€‚åŠå¾„ç›¸å½“äºå›¾æ ‡å¤§å°çš„ 20%ï¼Œç³»ç»Ÿå·²ç¦æ­¢ä½¿ç”¨é€æ˜èƒŒæ™¯ï¼Œ</li><li>é˜´å½±ï¼šæ—  - Google Play ä¼šåŠ¨æ€å¤„ç†é˜´å½± <a href="https://developer.android.com/google-play/resources/icon-design-specifications" target="_blank" rel="noopener">æŸ¥çœ‹è®¾è®¡è§„èŒƒè¯¦æƒ…</a><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564742977.jpg"></li></ul></li><li>å±å¹•æˆªå›¾ ï¼š<strong>JPEG æˆ– 24 ä½ PNGï¼ˆæ—  alpha é€æ˜å±‚ï¼‰ã€‚è¾¹é•¿ä¸‹é™ï¼š320 åƒç´ ï¼›è¾¹é•¿ä¸Šé™ï¼š3840 åƒç´ </strong>ã€‚æ€»çš„æ¥è¯´ï¼Œè‡³å°‘éœ€è¦æä¾› <strong>2 å¼ </strong>å±å¹•æˆªå›¾ã€‚æ¯ç§ç±»å‹æœ€å¤šå¯æä¾› 8 å¼ å±å¹•æˆªå›¾ã€‚</li><li>ç½®é¡¶å¤§å›¾ï¼š<strong>å®½ 1024 x é«˜ 500 JPG æˆ– 24 ä½ PNGï¼ˆæ—  alpha é€šé“ï¼‰æ ¼å¼</strong><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564743383.jpg">å¡«å†™åº”ç”¨ç±»å‹ç±»åˆ«åŠç”µå­é‚®ä»¶ã€‚<img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564743724.jpg">å¡«å†™<strong>éšç§æƒæ”¿ç­–</strong>ï¼Œå½“æ‚¨çš„åº”ç”¨å†…æ²¡æœ‰ä»»ä½•æƒé™ç”³è¯·æ—¶ï¼Œæ‚¨å¯ä»¥å‹¾é€‰<strong>æš‚ä¸æäº¤éšç§æƒæ”¿ç­–ç½‘å€</strong>ï¼Œæœ‰æƒé™ç”³è¯·æ—¶ï¼Œå¿…é¡»è¦å¡«å†™<img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564824883.jpg">ç‚¹å‡»<strong>ä¿å­˜è‰ç¨¿</strong></li></ul><p><strong>4. å®šä»·å’Œåˆ†å‘èŒƒå›´</strong></p><p>é€‰å®šåº”ç”¨æ˜¯ä»˜è´¹è¿˜æ˜¯å…è´¹ï¼Œä¸Šæ¶2048å½“ç„¶æ˜¯å…è´¹å•¦ï¼Œé€‰æ‹©å¯ä¸‹è½½çš„åœ°åŒºï¼ˆé»˜è®¤ä¸ºæ‰€æœ‰åœ°åŒºéƒ½ä¸å¯ä¸‹è½½ï¼ï¼‰ã€æ˜¯å¦åŒ…å«å¹¿å‘Šï¼Œ2048å½“ç„¶é€‰æ‹©å¦å•¦<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564822452.jpg"><br>æœ€åå‹¾é€‰<strong>å†…å®¹å‡†åˆ™ ç¾å›½å‡ºå£æ³•å¾‹</strong>ï¼Œç‚¹å‡»<strong>ä¿å­˜è‰ç¨¿</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564822611.jpg"></p><p><strong>5. åº”ç”¨å†…å®¹</strong></p><p>å¡«å†™<strong>ç›®æ ‡å—ä¼—ç¾¤ä½“å’Œå†…å®¹</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564822715.jpg"><br>è¿›å…¥ä¸‹é¢æ­¥éª¤<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564822788.jpg"><br>é€‰æ‹©ç›®æ ‡å¹´é¾„æ®µï¼Œç‚¹å‡»<strong>ä¸‹ä¸€æ­¥</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564822864.jpg"><br>é€‰æ‹©æ˜¯å¦ä¼šå¸å¼•å„¿ç«¥ï¼Œç‚¹å‡»<strong>ä¸‹ä¸€æ­¥</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564822950.jpg"><br>ç‚¹å‡»<strong>æäº¤</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564823070.jpg"></p><h2 id="åº”ç”¨å‘å¸ƒ"><a href="#åº”ç”¨å‘å¸ƒ" class="headerlink" title="åº”ç”¨å‘å¸ƒ"></a>åº”ç”¨å‘å¸ƒ</h2><p>å½“ä¸Šé¢çš„éƒ½å¡«å®Œäº†ï¼Œåº”ç”¨çš„çŠ¶æ€ä¼šä»â€œè‰ç¨¿â€å˜æˆâ€œå¯ä»¥å‘å¸ƒâ€ï¼Œå¯ä»¥åœ¨<a href="https://play.google.com/apps/publish/" target="_blank" rel="noopener">åº”ç”¨åˆ—è¡¨</a>çœ‹è§ï¼Œä¹Ÿèƒ½åœ¨è¯¦æƒ…å³ä¸Šæ–¹çš„tabçœ‹è§ã€‚è¿™æ—¶å€™è¿›å…¥<strong>åº”ç”¨ç‰ˆæœ¬-&gt;æ­£å¼ç‰ˆæ¸ é“ ä¿®æ”¹ç‰ˆæœ¬-&gt;æŸ¥çœ‹-&gt;å¼€å§‹å‘å¸ƒæ­£å¼ç‰ˆ</strong></p><p>åŸºæœ¬ä¸Šç¬¬ä¸€æ¬¡ä¸Šæ¶æ–°çš„åº”ç”¨ä¼šæ¯”è¾ƒæ…¢å®¡æ ¸ï¼Œå°ç¼–å¯æ˜¯èŠ±äº†ä¸‰å¤©å‘¢ï¼Œ2048 Google playåœ°å€ä¸ºï¼š<a href="https://play.google.com/store/apps/details?id=com.aililuo.simple2048" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.aililuo.simple2048</a></p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><h3 id="1-åº”ç”¨ç­¾å"><a href="#1-åº”ç”¨ç­¾å" class="headerlink" title="1. åº”ç”¨ç­¾å"></a>1. åº”ç”¨ç­¾å</h3><p>å› ä¸ºå½“å‰ä¸Šæ¶çš„2048å¹¶æ²¡æœ‰ä¸‰æ–¹ç­‰ï¼Œæ‰€ä»¥é€‰çš„GooglePlayç­¾åè®¡åˆ’ï¼Œä¸Šä¼ çš„åº”ç”¨ä¼šè¢«GooglePlayè¿›è¡ŒäºŒæ¬¡ç­¾åï¼Œè¿™æ ·å¯¼è‡´çš„é—®é¢˜å°±æ˜¯ä¾‹å¦‚å¾®ä¿¡ã€ç™¾åº¦å®šä½ç­‰éœ€è¦ä¾èµ–ç­¾åçš„MD5å€¼æˆ–è€…SHA1å€¼çš„ä¸‰æ–¹ä¼šå‡ºç°æ ¡éªŒå¤±è´¥ã€‚</p><p>å¦‚æœéœ€è¦ä¿æŒåŸæ¥çš„åº”ç”¨ç­¾åï¼Œåœ¨ä¸Šæ¶æ—¶é€‰æ‹©<strong>åœç”¨</strong><br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564828172.jpg"></p><h3 id="2-éšç§æƒæ”¿ç­–"><a href="#2-éšç§æƒæ”¿ç­–" class="headerlink" title="2. éšç§æƒæ”¿ç­–"></a>2. éšç§æƒæ”¿ç­–</h3><p>å½“å‰çš„2048ä¸éœ€è¦ä»»ä½•æƒé™ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸Šæ¶çš„åº”ç”¨éƒ½ä¼šæœ‰æƒé™çš„ï¼Œå°±å¿…é¡»è¦å¡«å†™éšç§æƒæ”¿ç­–ï¼Œ<br>å…³äºä½¿ç”¨ç‰¹å®šæƒé™çš„å…¶ä»–è¦æ±‚ï¼š</p><table><thead><tr><th>æ´»åŠ¨</th><th>è¦æ±‚</th></tr></thead><tbody><tr><td>æ‚¨çš„åº”ç”¨æ¸…å•è¯·æ±‚â€œé€šè¯è®°å½•â€æƒé™ç»„ï¼ˆä¾‹å¦‚ READ_CALL_LOGã€WRITE_CALL_LOGã€ROCESS_OUTGOING_CALLSï¼‰</td><td>å¿…é¡»ç”±ç”¨æˆ·ä¸»åŠ¨å°†åº”ç”¨æ³¨å†Œä¸ºè®¾å¤‡çš„é»˜è®¤ç”µè¯æˆ–è¾…åŠ©å¤„ç†ç¨‹åºã€‚</td></tr><tr><td>æ‚¨çš„åº”ç”¨æ¸…å•è¯·æ±‚â€œçŸ­ä¿¡â€æƒé™ç»„ï¼ˆä¾‹å¦‚ READ_SMSã€SEND_SMSã€WRITE_SMSã€RECEIVE_SMSã€RECEIVE_WAP_PUSHã€RECEIVE_MMSï¼‰</td><td>å¿…é¡»ç”±ç”¨æˆ·ä¸»åŠ¨å°†åº”ç”¨æ³¨å†Œä¸ºè®¾å¤‡çš„é»˜è®¤çŸ­ä¿¡æˆ–è¾…åŠ©å¤„ç†ç¨‹åºã€‚</td></tr></tbody></table><p>å¦‚æœåº”ç”¨ä¸­ä½¿ç”¨äº†ç…§ç›¸ï¼Œé€šè®¯å½•ï¼Œç”µè¯ï¼ŒçŸ­ä¿¡ï¼Œå¤–éƒ¨å†…å­˜è¯»å†™ï¼Œä½ç½®ç­‰æ¶‰åŠç”¨æˆ·éšç§çš„æƒé™ï¼Œéœ€è¦å…ˆç”Ÿæˆéšç§æ”¿ç­–urlï¼Œç„¶åå…ˆå°†éšç§æƒé™åµŒå…¥åˆ°Appä¸­é‡å†™æ‰“åŒ…ä¸Šä¼ ï¼Œè¿˜éœ€è¦åœ¨Google playåº”ç”¨çš„<strong>å•†å“è¯¦æƒ…-&gt;éšç§æƒæ”¿ç­–</strong>å¡«å†™éšç§æƒæ”¿ç­–urlã€‚<br><img src="/Google-Playåº”ç”¨ä¸Šæ¶æµç¨‹/1564826843.jpg"><br>ä¸Šå›¾ä¸ºappå†…éƒ¨ç•Œé¢ï¼Œéœ€è¦åœ¨æ³¨å†Œéƒ¨åˆ†æˆ–è€…ç›´æ¥å¼¹çª—æç¤ºç”¨æˆ·æˆäºˆã€‚ç”Ÿæˆéšç§æƒurlæ–¹å¼ï¼š</p><ul><li><a href="https://www.iubenda.com/blog/privacy-policy-for-android-app/" target="_blank" rel="noopener">https://www.iubenda.com/blog/privacy-policy-for-android-app/</a> ï¼š<a href="https://www.iubenda.com/en/help/3744-how-to-add-android-and-ios-mobile-permissions-for-device-data#android" target="_blank" rel="noopener">ç‚¹å‡»æ“ä½œæ­¥éª¤æŸ¥çœ‹</a></li><li><a href="https://www.privacypolicies.com/" target="_blank" rel="noopener">https://www.privacypolicies.com/</a> ï¼š<a href="https://www.privacypolicies.com/free-privacy-policy-generator/" target="_blank" rel="noopener">ç‚¹å‡»åˆ›å»º</a></li><li>å¯ä»¥ä»ç½‘ä¸Šæœä¸€ä¸‹appéšç§å£°æ˜æ¨¡æ¿ï¼Œç„¶åæŒ‚åœ¨å®˜ç½‘ä¸Šï¼Œè¿™ä¸ªé“¾æ¥ä¹Ÿå¯ä»¥ç”¨æ¥Google playå®¡æ ¸</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æ³¥èŒçˆ±ç©å°æ¸¸æˆçš„å°ç¼–å–œæ¬¢ç©2048ï¼Œè¿«äºå¸‚é¢ä¸Šçš„å°æ¸¸æˆå¹¿å‘Šå¤ªå¤šäº†ğŸ˜³ï¼Œæœºæ™ºçš„å°ç¼–å°±ç”¨cocos creatorå†™äº†ä¸ªå°æ¸¸æˆï¼Œæƒ³è¦å‘å¸ƒåˆ°çº¿ä¸Šç»™å¤§å®¶ä¸€èµ·ç©å‘€ğŸ˜ï¼Œå¼€å§‹æ”¾åˆ°github pageï¼Œåœ°å€ä¸º&lt;a href=&quot;https://sunflowercoder.com/2048/&quot;&gt;https://sunflowercoder.com/2048/&lt;/a&gt; ï¼ˆç§»åŠ¨ç«¯æ‰“å¼€ï¼‰ï¼Œä½†æ˜¯ç½‘ä¸å¥½å¯å’‹æ•´å•Š~ æœºæ™ºçš„å°ç¼–æ‰“åŒ…æˆapkäº†ï¼Œå› ä¸ºå°ç¼–ä¸æƒ³è¦å€’è…¾ä¹°è½¯è‘—ï¼Œåˆè´¹æ—¶é—´çš„åˆè´¹é’±ğŸ˜‚ï¼Œå°ç¼–å°±æƒ³åˆ°å‘å¸ƒåˆ°google playå•¦&lt;/p&gt;
&lt;p&gt;Cocos Creatoræ‰“åŒ…åˆ°åŸç”Ÿå¹³å°éœ€è¦å…ˆé…ç½®åŸç”Ÿå¼€å‘ç¯å¢ƒï¼Œå®‰è£…jdkï¼Œä¸‹è½½Android Studioå¹¶ä¸”ä¸‹è½½éœ€è¦çš„sdkå’Œndkï¼Œå…·ä½“æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://docs.cocos.com/creator/manual/zh/publish/setup-native-development.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://docs.cocos.com/creator/manual/zh/publish/setup-native-development.html&lt;/a&gt; ã€‚æ‰“åŒ…å‘å¸ƒåŸç”Ÿå¹³å°æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://docs.cocos.com/creator/manual/zh/publish/publish-native.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://docs.cocos.com/creator/manual/zh/publish/publish-native.html&lt;/a&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‰æï¼šç§‘å­¦ä¸Šç½‘ï¼›ä¸€å¼ Visa/Masterå¡ï¼Œå¼€é€šè´¦å·éœ€è¦æ”¯ä»˜25ç¾åˆ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2048 Google playåœ°å€ä¸ºï¼š&lt;a href=&quot;https://play.google.com/store/apps/details?id=com.aililuo.simple2048&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://play.google.com/store/apps/details?id=com.aililuo.simple2048&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>redis-migrate-toolä½¿ç”¨è¯¦è§£</title>
    <link href="https://sunflowercoder.com/redis-migrate-tool%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/"/>
    <id>https://sunflowercoder.com/redis-migrate-toolä½¿ç”¨è¯¦è§£/</id>
    <published>2019-08-01T08:51:07.000Z</published>
    <updated>2019-08-02T06:09:51.649Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>redis-migrate-tool æ˜¯ç»´å“ä¼šå¼€æºçš„ä¸€æ¬¾redisæ•°æ®è¿ç§»å·¥å…·ï¼ŒåŸºäºrediså¤åˆ¶ï¼Œå¿«é€Ÿï¼Œç¨³å®šï¼Œgithubåœ°å€ä¸ºï¼š<a href="https://github.com/vipshop/redis-migrate-tool" target="_blank" rel="noopener">https://github.com/vipshop/redis-migrate-tool</a> ã€‚</p><ul><li>å¿«é€Ÿã€‚</li><li>å¤šçº¿ç¨‹ã€‚</li><li>åŸºäºrediså¤åˆ¶ã€‚</li><li>å®æ—¶è¿ç§»ã€‚</li><li>è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæºé›†ç¾¤ä¸å½±å“å¯¹å¤–æä¾›æœåŠ¡ã€‚</li><li>å¼‚æ„è¿ç§»ã€‚</li><li>æ”¯æŒTwemproxyé›†ç¾¤ï¼Œredis clusteré›†ç¾¤ï¼Œrdbæ–‡ä»¶ å’Œ aofæ–‡ä»¶ã€‚</li><li>è¿‡æ»¤åŠŸèƒ½ã€‚</li><li>å½“ç›®æ ‡é›†ç¾¤æ˜¯Twemproxyï¼Œæ•°æ®ä¼šè·³è¿‡Twemproxyç›´æ¥å¯¼å…¥åˆ°åç«¯çš„redisã€‚</li><li>è¿ç§»çŠ¶æ€æ˜¾ç¤ºã€‚</li><li>å®Œå–„çš„æ•°æ®æŠ½æ ·æ ¡éªŒ(-C redis_check)ã€‚</li></ul><p>åˆ’é‡ç‚¹ <strong>å®æ—¶è¿ç§»</strong> <strong>è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæºé›†ç¾¤ä¸å½±å“å¯¹å¤–æä¾›æœåŠ¡</strong></p><a id="more"></a><h2 id="å®‰è£…redis-migrate-tool"><a href="#å®‰è£…redis-migrate-tool" class="headerlink" title="å®‰è£…redis-migrate-tool"></a>å®‰è£…redis-migrate-tool</h2><p><strong>ä¾èµ–</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y install automake libtool autoconf bzip2 git</span><br></pre></td></tr></table></figure></p><p><strong>æ„å»º</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cd redis-migrate-tool</span><br><span class="line">$ autoreconf -fvi</span><br><span class="line">$ ./configure</span><br><span class="line">$ make</span><br><span class="line">$ src/redis-migrate-tool -h</span><br></pre></td></tr></table></figure></p><p><strong>è­¦å‘Š</strong></p><p>åœ¨è¿è¡Œå·¥å…·ä¹‹å‰ï¼Œç¡®ä¿æºredisæ‰€åœ¨çš„æœºå™¨æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ä»¥å…è®¸è‡³å°‘ä¸€ä¸ªredisç”Ÿæˆ.rdbæ–‡ä»¶ï¼Œå¦‚æœæºæœºå™¨æœ‰å¤§é‡è¶³å¤Ÿçš„å†…å­˜å…è®¸æ‰€æœ‰çš„redisç”Ÿæˆ.rdbï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶rmt.confè®¾ç½®<code>source_safe: false</code>ã€‚</p><p>ä¸‹åˆ—å‘½ä»¤ä¸æ”¯æŒä¼ æ’­ç»™target redisç»„ï¼Œå› ä¸ºè¿™äº›å‘½ä»¤ä¸‹çš„keyså¯èƒ½äº¤å‰äº†ä¸åŒçš„ç›®æ ‡redisèŠ‚ç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME,RENAMENX,RPOPLPUSH,BRPOPLPUSH,FLUSHALL,FLUSHDB,BITOP,MOVE,GEORADIUS,GEORADIUSBYMEMBER,EVAL,EVALSHA,SCRIPT,PFMERGE</span><br></pre></td></tr></table></figure></p><h2 id="redis-migrate-tool-å‘½ä»¤è¯¦è§£"><a href="#redis-migrate-tool-å‘½ä»¤è¯¦è§£" class="headerlink" title="redis-migrate-tool å‘½ä»¤è¯¦è§£"></a>redis-migrate-tool å‘½ä»¤è¯¦è§£</h2><p>å‡ºç°ä¸‹åˆ—å¸®åŠ©è¯´æ˜è¡¨ç¤ºå®‰è£…æˆåŠŸ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">This is redis-migrate-tool-0.1.0</span><br><span class="line"></span><br><span class="line">Usage: redis-migrate-tool [-?hVdIn] [-v verbosity level] [-o output file]</span><br><span class="line">                  [-c conf file] [-C command]</span><br><span class="line">                  [-f source address] [-t target address]</span><br><span class="line">                  [-p pid file] [-m mbuf size] [-r target role]</span><br><span class="line">                  [-T thread number] [-b buffer size]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -h, --help             : this help</span><br><span class="line">  -V, --version          : show version and exit</span><br><span class="line">  -d, --daemonize        : run as a daemon</span><br><span class="line">  -I, --information      : print some useful information</span><br><span class="line">  -n, --noreply          : don&apos;t receive the target redis reply</span><br><span class="line">  -v, --verbosity=N      : set logging level (default: 5, min: 0, max: 11)</span><br><span class="line">  -o, --output=S         : set logging file (default: stderr)</span><br><span class="line">  -c, --conf-file=S      : set configuration file (default: rmt.conf)</span><br><span class="line">  -p, --pid-file=S       : set pid file (default: off)</span><br><span class="line">  -m, --mbuf-size=N      : set mbuf size (default: 512)</span><br><span class="line">  -C, --command=S        : set command to execute (default: redis_migrate)</span><br><span class="line">  -r, --source-role=S    : set the source role (default: single, you can input: single, twemproxy or redis_cluster)</span><br><span class="line">  -R, --target-role=S    : set the target role (default: single, you can input: single, twemproxy or redis_cluster)</span><br><span class="line">  -T, --thread=N         : set how many threads to run the job(default: 4)</span><br><span class="line">  -b, --buffer=S         : set buffer size to run the job (default: 140720309534720 byte, unit:G/M/K)</span><br><span class="line">  -f, --from=S           : set source redis address (default: 127.0.0.1:6379)</span><br><span class="line">  -t, --to=S             : set target redis group address (default: 127.0.0.1:6380)</span><br><span class="line">  -s, --step=N           : set step (default: 1)</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">    redis_migrate        : Migrate data from source group to target group.</span><br><span class="line">    redis_check          : Compare data between source group and target group. Default compare 1000 keys. You can set a key count behind.</span><br><span class="line">    redis_testinsert     : Just for test! Insert some string, list, set, zset and hash keys into the source redis group. Default 1000 keys. You can set key type and key count behind.</span><br></pre></td></tr></table></figure></p><p>éƒ¨åˆ†æŒ‡ä»¤è§£æï¼š</p><ul><li><code>-h, --help</code>ï¼šå¸®åŠ©</li><li><code>-V, --version</code>ï¼šæ˜¾ç¤ºç‰ˆæœ¬</li><li><code>-d, --daemonize</code>ï¼šåå°è¿›ç¨‹è¿è¡Œ</li><li><code>-I, --information</code>ï¼šæ‰“å°ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯ä»¥è§£æçš„æŒ‡ä»¤ï¼ˆ126ä¸ªï¼‰ï¼Œä¸æ”¯æŒçš„æŒ‡ä»¤ï¼ˆ14ä¸ªï¼‰ç­‰ç­‰</li><li><code>-v, --verbosity=N</code>ï¼šè®¾ç½®æ—¥å¿—ç­‰çº§ã€‚(é»˜è®¤: 5, æœ€ä½: 0, æœ€é«˜: 11)</li><li><code>-o, --output=S</code>ï¼šè®¾ç½®è¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶</li><li><code>-c, --conf-file=S</code>ï¼šè®¾ç½®é…ç½®æ–‡ä»¶ã€‚(é»˜è®¤: rmt.conf)</li><li><code>-C, --command=S</code>ï¼šè®¾ç½®è¿è¡Œçš„æŒ‡ä»¤(é»˜è®¤: <code>redis_migrate</code> ï¼Œè¿ç§»)ã€‚<code>redis_check</code> æ¯”è¾ƒæºå’Œç›®çš„ï¼Œé»˜è®¤1000ä¸ªæ ·æœ¬keyã€‚<code>redis_testinsert</code>æµ‹è¯•æ’å…¥Keysï¼Œé»˜è®¤æ‰€æœ‰ç±»å‹æ€»å…±1000ä¸ªã€‚</li><li><code>-T, --thread=N</code>ï¼šè®¾ç½®å¤šå°‘ä¸ªçº¿ç¨‹ç”¨æ¥è¿è¡Œå·¥å…·ã€‚(é»˜è®¤: 4)</li></ul><h3 id="1-è¿è¡Œè¿ç§»"><a href="#1-è¿è¡Œè¿ç§»" class="headerlink" title="1. è¿è¡Œè¿ç§»"></a>1. è¿è¡Œè¿ç§»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -c rmt.conf -o log -d</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š-dæŒ‡å®šä¸ºåå°è¿è¡Œï¼Œå¦‚æœå†æ¬¡è¿è¡Œå¯èƒ½éœ€è¦æ€æ­»å ç”¨å½“å‰ç«¯å£çš„è¿›ç¨‹ã€‚<code>netstat -tnulp</code>æŸ¥çœ‹æ‰¾åˆ°redis-migrate-toolçš„ç«¯å£å·ï¼Œ<code>kill -9 [ç«¯å£å·]</code>æ€æ­»å†è¿è¡Œã€‚</p><p>æŒ‡å®šè¾“å‡ºæ—¥å¿—æ–‡ä»¶ä¸ºlogï¼Œå¯é€šè¿‡<code>tail -200 log</code>ç­‰æŸ¥çœ‹æ—¥å¿—ã€‚</p><h3 id="2-æŠ½æ ·æ£€æŸ¥"><a href="#2-æŠ½æ ·æ£€æŸ¥" class="headerlink" title="2. æŠ½æ ·æ£€æŸ¥"></a>2. æŠ½æ ·æ£€æŸ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -c rmt.conf -o log -C redis_check</span><br><span class="line">Check job is running...</span><br><span class="line"></span><br><span class="line">Checked keys: 1000</span><br><span class="line">Inconsistent value keys: 0</span><br><span class="line">Inconsistent expire keys : 0</span><br><span class="line">Other check error keys: 0</span><br><span class="line">Checked OK keys: 1000</span><br><span class="line"></span><br><span class="line">All keys checked OK!</span><br><span class="line">Check job finished, used 1.041s</span><br></pre></td></tr></table></figure><p>æŠ½æ ·æ£€æŸ¥æºç»„å’Œç›®æ ‡ç»„çš„æ•°æ®ï¼Œé»˜è®¤ä¸º1000ä¸ªã€‚å¦‚æœéœ€è¦æ£€æŸ¥æ›´å¤šçš„æ•°æ®ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_check 200000&quot;</span><br><span class="line">Check job is running...</span><br><span class="line"></span><br><span class="line">Checked keys: 200000</span><br><span class="line">Inconsistent value keys: 0</span><br><span class="line">Inconsistent expire keys : 0</span><br><span class="line">Other check error keys: 0</span><br><span class="line">Checked OK keys: 200000</span><br><span class="line"></span><br><span class="line">All keys checked OK!</span><br><span class="line">Check job finished, used 11.962s</span><br></pre></td></tr></table></figure></p><h3 id="3-æµ‹è¯•æ’å…¥ä¸€äº›æ•°æ®"><a href="#3-æµ‹è¯•æ’å…¥ä¸€äº›æ•°æ®" class="headerlink" title="3. æµ‹è¯•æ’å…¥ä¸€äº›æ•°æ®"></a>3. æµ‹è¯•æ’å…¥ä¸€äº›æ•°æ®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert&quot;</span><br><span class="line">Test insert job is running...</span><br><span class="line"></span><br><span class="line">Insert string keys: 200</span><br><span class="line">Insert list keys  : 200</span><br><span class="line">Insert set keys   : 200</span><br><span class="line">Insert zset keys  : 200</span><br><span class="line">Insert hash keys  : 200</span><br><span class="line">Insert total keys : 1000</span><br><span class="line"></span><br><span class="line">Correct inserted keys: 1000</span><br><span class="line">Test insert job finished, used 0.525s</span><br></pre></td></tr></table></figure><p>é»˜è®¤æ’å…¥çš„æ•°æ®ä¸ºstringã€listã€setã€zsetã€hashå„200ä¸ªï¼ˆå‡åˆ†ï¼‰ï¼Œæ€»å…±1000ä¸ªã€‚å¦‚æœéœ€è¦æ’å…¥æ›´å¤šçš„é”®ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert 30000&quot;</span><br><span class="line">Test insert job is running...</span><br><span class="line"></span><br><span class="line">Insert string keys: 6000</span><br><span class="line">Insert list keys  : 6000</span><br><span class="line">Insert set keys   : 6000</span><br><span class="line">Insert zset keys  : 6000</span><br><span class="line">Insert hash keys  : 6000</span><br><span class="line">Insert total keys : 30000</span><br><span class="line"></span><br><span class="line">Correct inserted keys: 30000</span><br><span class="line">Test insert job finished, used 15.486s</span><br></pre></td></tr></table></figure></p><p>å¦‚æœåªæƒ³æ’å…¥stringç±»å‹çš„é”®ï¼ˆ1000ä¸ªï¼‰ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert string&quot;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæƒ³æŒ‡å®šæ’å…¥çš„å‡ ç§ç±»å‹ï¼Œå¹¶ä¸”æŒ‡å®šæ€»æ•°ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert string|set|list 10000&quot;</span><br><span class="line">Test insert job is running...</span><br><span class="line"></span><br><span class="line">Insert string keys: 3336</span><br><span class="line">Insert list keys  : 3336</span><br><span class="line">Insert set keys   : 3328</span><br><span class="line">Insert zset keys  : 0</span><br><span class="line">Insert hash keys  : 0</span><br><span class="line">Insert total keys : 10000</span><br><span class="line"></span><br><span class="line">Correct inserted keys: 10000</span><br><span class="line">Test insert job finished, used 5.539s</span><br></pre></td></tr></table></figure></p><p>æ’å…¥æ ¡éªŒç”Ÿæˆçš„æ•°æ®å¹¶ä¸ä¼šæ¸…é™¤ï¼Œæµ‹è¯•æ—¶å¯ä»¥å°½é‡å‡å°‘æ’å…¥çš„keyã€‚</p><h2 id="rmt-confé…ç½®æ–‡ä»¶"><a href="#rmt-confé…ç½®æ–‡ä»¶" class="headerlink" title="rmt.confé…ç½®æ–‡ä»¶"></a>rmt.confé…ç½®æ–‡ä»¶</h2><p>é…ç½®æ–‡ä»¶åŒ…å«ä¸‰éƒ¨åˆ†ï¼š[source], [target] å’Œ [common]</p><p>è¿ç§»å·¥å…·çš„æ¥æºï¼ˆsourceï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®ä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ï¼Œaofæ–‡ä»¶ã€‚<br>è¿ç§»å·¥å…·çš„ç›®æ ‡ï¼ˆtargetï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®ä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ã€‚</p><p><strong>[source]/[target]</strong>ï¼š</p><ul><li><code>type</code>ï¼š<ul><li><strong>single</strong>ï¼šå•ç‹¬çš„rediså®ä¾‹</li><li><strong>twemproxy</strong>ï¼štwemproxyé›†ç¾¤</li><li><strong>redis cluster</strong>ï¼šredisé›†ç¾¤</li><li><strong>rdb file</strong>ï¼š.rdbæ–‡ä»¶</li><li><strong>aof file</strong>ï¼š.aofæ–‡ä»¶</li></ul></li><li><code>servers</code>ï¼šredisåœ°å€ç»„ï¼Œå¦‚æœtype:twemproxyï¼Œåˆ™ä¸ºtwemproxyé…ç½®æ–‡ä»¶ï¼Œå¦‚æœtype:rdb fileï¼Œåˆ™ä¸ºrdbæ–‡ä»¶åã€‚</li><li><code>redis_auth</code>ï¼šè¿æ¥redisæœåŠ¡çš„è®¤è¯authã€‚</li><li><code>timeout</code>ï¼šè¯»å†™redisæœåŠ¡çš„è¶…æ—¶æ—¶é—´(ms)ï¼Œé»˜è®¤ä¸º120000ms</li><li><code>hash</code>ï¼šå“ˆå¸Œæ–¹æ³•åã€‚ä»…å½“type:twemproxyæœ‰æ•ˆã€‚å¯ä»¥ä¸ºone_at_a_timeã€md5ã€crc16ã€crc32ã€crc32aã€fnv1_64ã€fnv1a_64ã€fnv1_32ã€fnv1a_32ã€hsiehã€murmurã€jenkinsã€‚</li><li><code>hash_tag</code>ï¼šç”¨æ¥å“ˆå¸Œçš„å…³é”®keyçš„ä¸¤ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚â€{}â€ æˆ– â€œ$$â€ã€‚ä»…å½“type:twemproxyæœ‰æ•ˆã€‚åªè¦æ ‡ç­¾å†…çš„å…³é”®keyæ˜¯ç›¸åŒçš„ï¼Œèƒ½å¤Ÿå°†ä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€æœåŠ¡å™¨ã€‚</li><li><code>distribution</code>ï¼šé”®çš„åˆ†å¸ƒæ¨¡å¼ã€‚ä»…å½“type:twemproxyæœ‰æ•ˆã€‚å¯ä»¥ä¸º ketamaã€modulaã€randomã€‚</li></ul><p><strong>[common]</strong>ï¼š</p><ul><li><code>listen</code>ï¼šç›‘å¬çš„åœ°å€å’Œç«¯å£ã€‚é»˜è®¤ä¸º127.0.0.1:8888</li><li><code>max_clients</code>ï¼šå¯ç›‘å¬ç«¯å£çš„æœ€å¤§è¿æ¥æ•°ã€‚é»˜è®¤ä¸º100</li><li><code>threads</code>ï¼šå·¥å…·å¯ç”¨çš„æœ€å¤šçº¿ç¨‹æ•°ã€‚é»˜è®¤ä¸ºcpuå†…æ ¸æ•°ã€‚</li><li><code>step</code>ï¼šè§£æè¯·æ±‚çš„æ­¥æ•°ã€‚é»˜è®¤ä¸º1ï¼Œæ•°å­—è¶Šå¤§ï¼Œè¿ç§»è¶Šå¿«ï¼Œéœ€è¦è¶Šå¤šçš„å†…å­˜ã€‚</li><li><code>mbuf_size</code>ï¼šè¯·æ±‚çš„ç¼“å­˜å¤§å°ï¼ˆMï¼‰ï¼Œé»˜è®¤ä¸º512M</li><li><code>noreply</code>ï¼šæ˜¯å¦æ£€æŸ¥ç›®æ ‡ç»„çš„å›å¤ï¼Œé»˜è®¤ä¸ºfalse</li><li><code>source_safe</code>ï¼šæ˜¯å¦ä¿æŠ¤æºç»„æœºå™¨çš„å†…å­˜å®‰å…¨ã€‚é»˜è®¤ä¸ºtrueï¼Œå·¥å…·å°†å…è®¸åœ¨æºç»„çš„åŒä¸€å°æœºå™¨åŒæ—¶åªæœ‰ä¸€ä¸ªredisç”Ÿæˆ.rdbã€‚</li><li><code>dir</code>ï¼šå·¥ä½œç›®å½•ã€‚ç”¨æ¥å­˜å‚¨æ–‡ä»¶ï¼Œä¾‹å¦‚rdbæ–‡ä»¶ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚</li><li><code>filter</code>ï¼šè¿‡æ»¤ä¸ç¬¦åˆè¡¨è¾¾å¼çš„Keyï¼Œé»˜è®¤ä¸ºNULLï¼Œæ”¯æŒé€šé…ç¬¦ä¸ºglob-styleé£æ ¼<ul><li>? ï¼š1ä¸ªä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ h?llo åŒ¹é… hello, hallo , hxllo</li><li>* ï¼š0ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ h*llo åŒ¹é… hllo ï¼Œ heeeello</li><li>[characters]ï¼šåŒ¹é…ä»»æ„ä¸€ä¸ªæ–¹æ‹¬å·å†…çš„å­—ç¬¦ï¼Œæ¯”å¦‚[abc]ï¼Œè¦ä¹ˆåŒ¹é…aï¼Œè¦ä¹ˆåŒ¹é…bï¼Œè¦ä¹ˆåŒ¹é…cã€‚ä¾‹å¦‚ h[ae]llo åŒ¹é… hello ï¼Œ hallo, ä½†ä¸åŒ¹é… hilloã€‚</li><li>[^character]ï¼šæ’é™¤æ–¹æ‹¬å·å†…çš„å­—ç¬¦ã€‚ä¾‹å¦‚h[^e]llo åŒ¹é… hallo, hbllo, â€¦ ä½†ä¸åŒ¹é… helloã€‚</li><li>[character-character]ï¼šè¡¨ç¤º2ä¸ªå­—ç¬¦èŒƒå›´å†…çš„éƒ½å¯ä»¥åŒ¹é…ï¼Œå¦‚[a-z]ï¼Œ[0-9]ã€‚ä¾‹å¦‚h[a-b]llo åŒ¹é… hallo å’Œ hblloã€‚</li><li><code>\</code>ç”¨æ¥è½¬ç§»ç‰¹æ®Šå­—ç¬¦ã€‚</li></ul></li></ul><p><strong>é…ç½®æ–‡ä»¶ç¤ºä¾‹</strong>ï¼š<br>ï¼ˆ1ï¼‰ä»å•ä¸€å®ä¾‹è¿ç§»æ•°æ®åˆ°twemproxyé›†ç¾¤ï¼ˆsingle to twemproxyï¼‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: single</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:6379</span><br><span class="line"> - 127.0.0.1:6380</span><br><span class="line"> - 127.0.0.1:6381</span><br><span class="line"> - 127.0.0.1:6382</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: twemproxy</span><br><span class="line">hash: fnv1a_64</span><br><span class="line">hash_tag: &quot;&#123;&#125;&quot;</span><br><span class="line">distribution: ketama</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:6380:1 server1</span><br><span class="line"> - 127.0.0.1:6381:1 server2</span><br><span class="line"> - 127.0.0.1:6382:1 server3</span><br><span class="line"> - 127.0.0.1:6383:1 server4</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br><span class="line">threads: 2</span><br><span class="line">step: 1</span><br><span class="line">mbuf_size: 1024</span><br><span class="line">source_safe: true</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰ä»twemproxyé›†ç¾¤è¿ç§»æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆtwemproxy to redis clusterï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: twemproxy</span><br><span class="line">hash: fnv1a_64</span><br><span class="line">hash_tag: &quot;&#123;&#125;&quot;</span><br><span class="line">distribution: ketama</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:6379</span><br><span class="line"> - 127.0.0.1:6380</span><br><span class="line"> - 127.0.0.1:6381</span><br><span class="line"> - 127.0.0.1:6382</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:7379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br><span class="line">step: 1</span><br><span class="line">mbuf_size: 512</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ3ï¼‰ä»ä¸€ä¸ªredisé›†ç¾¤è¿ç§»æ•°æ®åˆ°å¦ä¸€ä¸ªé›†ç¾¤ï¼ˆredis cluster to another redis clusterï¼‰ï¼Œé…ç½®filterä¸ºä»¥â€abcâ€å¼€å§‹çš„é”®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:8379</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:7379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br><span class="line">filter: abc*</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ4ï¼‰ä».rdbæ–‡ä»¶å¯¼å…¥æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆrdb file to redis clusterï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: rdb file</span><br><span class="line">servers:</span><br><span class="line"> - /data/redis/dump1.rdb</span><br><span class="line"> - /data/redis/dump2.rdb</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:7379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br><span class="line">step: 2</span><br><span class="line">mbuf_size: 512</span><br><span class="line">source_safe: false</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ5ï¼‰ä¿å­˜redisé›†ç¾¤çš„æ•°æ®åˆ°.rdbï¼ˆredis cluster to rdb fileï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:7379</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: rdb file</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br><span class="line">source_safe: true</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ6ï¼‰ä».aofæ–‡ä»¶å¯¼å…¥æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆaof file to redis clusterï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: aof file</span><br><span class="line">servers:</span><br><span class="line"> - /data/redis/appendonly1.aof</span><br><span class="line"> - /data/redis/appendonly2.aof</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:7379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br><span class="line">step: 2</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ7ï¼‰ä»redisé›†ç¾¤è¿ç§»æ•°æ®åˆ°å•ä¸€å®ä¾‹ï¼ˆredis cluster to singleï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:8379</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: single</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:6379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ8ï¼‰ä»å•ä¸€å®ä¾‹è¿ç§»æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆsingle to redis clusterï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[source]</span><br><span class="line">type: single</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:6379</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers:</span><br><span class="line"> - 127.0.0.1:7379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br></pre></td></tr></table></figure></p><h2 id="ç›‘å¬redis-migrate-tool"><a href="#ç›‘å¬redis-migrate-tool" class="headerlink" title="ç›‘å¬redis-migrate-tool"></a>ç›‘å¬redis-migrate-tool</h2><p>å¯ä»¥ä½¿ç”¨redis-cliè¿æ¥å·¥å…·ï¼Œç›‘å¬åœ°å€å’Œç«¯å£è®¾ç½®åœ¨é…ç½®æ–‡ä»¶çš„[common]ä¸‹çš„listenï¼Œé»˜è®¤ä¸º127.0.0.1:8888</p><p><strong>1. infoæŒ‡ä»¤</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$redis-cli -h 127.0.0.1 -p 8888</span><br><span class="line">127.0.0.1:8888&gt; info</span><br><span class="line"># Server</span><br><span class="line">version:0.1.0                                   # å·¥å…·çš„ç‰ˆæœ¬å·</span><br><span class="line">os:Linux 2.6.32-573.12.1.el6.x86_64 x86_64      # æ“ä½œç³»ç»Ÿä¿¡æ¯</span><br><span class="line">multiplexing_api:epoll                          # å¤šè·¯å¤ç”¨æ¥å£</span><br><span class="line">gcc_version:4.4.7                               # gccç‰ˆæœ¬</span><br><span class="line">process_id:9199                                 # å·¥å…·çš„è¿›ç¨‹id</span><br><span class="line">tcp_port:8888                                   # å·¥å…·ç›‘å¬çš„tcpç«¯å£å·</span><br><span class="line">uptime_in_seconds:1662                          # å·¥å…·è¿è¡Œçš„æ—¶é—´ï¼ˆç§’ï¼‰</span><br><span class="line">uptime_in_days:0                                # å·¥å…·è¿è¡Œçš„æ—¶é—´ï¼ˆå¤©ï¼‰</span><br><span class="line">config_file:/ect/rmt.conf                       # å·¥å…·è¿è¡Œçš„é…ç½®æ–‡ä»¶åç§°</span><br><span class="line"></span><br><span class="line"># Clients</span><br><span class="line">connected_clients:1                             # å½“å‰è¿æ¥çš„å®¢æˆ·ç«¯æ•°</span><br><span class="line">max_clients_limit:100                           # å®¢æˆ·ç«¯åŒæ—¶è¿æ¥æœ€å¤§é™åˆ¶</span><br><span class="line">total_connections_received:3                    # è‡³ä»Šæ€»å…±è¿æ¥</span><br><span class="line"></span><br><span class="line"># Memory</span><br><span class="line">mem_allocator:jemalloc-4.0.4</span><br><span class="line"></span><br><span class="line"># Group</span><br><span class="line">source_nodes_count:32                          # æºredisç»„çš„èŠ‚ç‚¹æ•°</span><br><span class="line">target_nodes_count:48                          # ç›®çš„redisç»„çš„èŠ‚ç‚¹æ•°</span><br><span class="line"></span><br><span class="line"># Stats</span><br><span class="line">all_rdb_received:1                             # æ˜¯å¦å·²æ¥æ”¶æºredisç»„èŠ‚ç‚¹çš„æ‰€æœ‰.rdbæ–‡ä»¶</span><br><span class="line">all_rdb_parsed:1                               # æ˜¯å¦å·²è§£ææºredisç»„èŠ‚ç‚¹çš„æ‰€æœ‰.rdbæ–‡ä»¶</span><br><span class="line">all_aof_loaded:0                               # æ˜¯å¦å·²åŠ è½½æºredisç»„èŠ‚ç‚¹çš„æ‰€æœ‰.aofæ–‡ä»¶</span><br><span class="line">rdb_received_count:32                          # å·²æ¥æ”¶çš„æºredisç»„èŠ‚ç‚¹.rdbæ–‡ä»¶æ•°</span><br><span class="line">rdb_parsed_count:32                            # å·²è§£æçš„æºredisç»„èŠ‚ç‚¹.rdbæ–‡ä»¶æ•°</span><br><span class="line">aof_loaded_count:0                             # å·²åŠ è½½çš„æºredisç»„èŠ‚ç‚¹.aofæ–‡ä»¶æ•°</span><br><span class="line">total_msgs_recv:7753587                        # ä»æºç»„èŠ‚ç‚¹æ¥æ”¶çš„æ‰€æœ‰æ¶ˆæ¯æ•°</span><br><span class="line">total_msgs_sent:7753587                        # æ‰€æœ‰å·²å‘é€ç›®æ ‡èŠ‚ç‚¹å¹¶ä¸”æ”¶åˆ°çš„å“åº”çš„æ¶ˆæ¯æ•°</span><br><span class="line">total_net_input_bytes:234636318                # ä»æºç»„æ¥æ”¶çš„è¾“å…¥å­—èŠ‚çš„æ€»æ•°</span><br><span class="line">total_net_output_bytes:255384129               # å·²å‘é€åˆ°ç›®æ ‡ç»„çš„è¾“å‡ºå­—èŠ‚çš„æ€»æ•°</span><br><span class="line">total_net_input_bytes_human:223.77M            # åŒtotal_net_input_bytesï¼Œè€Œæ˜¯è½¬æ¢æˆäººç±»å¯è¯»çš„ã€‚</span><br><span class="line">total_net_output_bytes_human:243.55M           # åŒtotal_net_output_bytesï¼Œè€Œæ˜¯è½¬æ¢æˆäººç±»å¯è¯»çš„ã€‚</span><br><span class="line">total_mbufs_inqueue:0                          # æ¥è‡ªæºç»„çš„mbufsè¾“å…¥ç¼“å­˜çš„å‘½ä»¤æ•°æ®(ä¸åŒ…æ‹¬rdbæ•°æ®)</span><br><span class="line">total_msgs_outqueue:0                          # å°†è¢«å‘é€åˆ°ç›®æ ‡ç»„ï¼Œå’Œå·²è¢«å‘é€åˆ°ç›®æ ‡ï¼Œä½†æ­£åœ¨ç­‰å¾…å“åº”çš„æ¶ˆæ¯æ•°</span><br><span class="line">127.0.0.1:8888&gt;</span><br></pre></td></tr></table></figure></p><p><strong>2. shutdown [seconds|asap]</strong></p><p>æ‰§è¡ŒæŒ‡ä»¤åçš„è¡Œä¸ºï¼š</p><ul><li>åœæ­¢ä»æºrediså¤åˆ¶</li><li>å°è¯•å°†å·¥å…·ä¸­çš„ç¼“å­˜æ•°æ®å‘é€åˆ°ç›®æ ‡redis</li><li>Redis-migrate-tool åœæ­¢ï¼Œé€€å‡º</li></ul><p>å‚æ•°ï¼š</p><ul><li><code>seconds</code>ï¼šå·¥å…·ç”¨äºåœ¨é€€å‡ºä¹‹å‰å°†ç¼“å­˜çš„æ•°æ®å‘é€åˆ°ç›®æ ‡redisçš„å¤§å¤šæ•°æ—¶é—´ã€‚é»˜è®¤ä¸º10ç§’ã€‚</li><li><code>asap</code>ï¼šä¸å…³å¿ƒç¼“å­˜çš„æ•°æ®ï¼Œç«‹å³é€€å‡ºã€‚</li></ul><p>ä¾‹å¦‚ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli -h 127.0.0.1 -p 8888</span><br><span class="line">127.0.0.1:8888&gt; shutdown 5</span><br><span class="line">OK</span><br><span class="line">(5.00s)</span><br></pre></td></tr></table></figure></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>ä¸é€‚ç”¨redis4.0.xåŠä»¥ä¸Šç‰ˆæœ¬ï¼ˆé«˜ç‰ˆæœ¬è¿ç§»å°ç¼–ä¼šå°½å¿«å‡º~ï¼‰</li><li>å½“æºä¸­å­˜åœ¨å¤šåº“æ—¶ï¼Œé¿å…å‘ç”Ÿé”®å€¼è¦†ç›–ï¼Œæœ€å¥½æ¢åˆ«çš„æ–¹å¼è¿ç§»</li><li>å¤šæºè¦ä¸éƒ½ä¸å¸¦å¯†ç ï¼Œè¦ä¸æºæ˜¯åŒä¸€ä¸ªå¯†ç ï¼Œå¦åˆ™æ— æ³•å¯åŠ¨ï¼Œåœ¨çº¿å˜æ›´å¯†ç å¯ä»¥é€šè¿‡<code>config set requirepass [å¯†ç ]</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;redis-migrate-tool æ˜¯ç»´å“ä¼šå¼€æºçš„ä¸€æ¬¾redisæ•°æ®è¿ç§»å·¥å…·ï¼ŒåŸºäºrediså¤åˆ¶ï¼Œå¿«é€Ÿï¼Œç¨³å®šï¼Œgithubåœ°å€ä¸ºï¼š&lt;a href=&quot;https://github.com/vipshop/redis-migrate-tool&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/vipshop/redis-migrate-tool&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿«é€Ÿã€‚&lt;/li&gt;
&lt;li&gt;å¤šçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºrediså¤åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;å®æ—¶è¿ç§»ã€‚&lt;/li&gt;
&lt;li&gt;è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæºé›†ç¾¤ä¸å½±å“å¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¼‚æ„è¿ç§»ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒTwemproxyé›†ç¾¤ï¼Œredis clusteré›†ç¾¤ï¼Œrdbæ–‡ä»¶ å’Œ aofæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;è¿‡æ»¤åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç›®æ ‡é›†ç¾¤æ˜¯Twemproxyï¼Œæ•°æ®ä¼šè·³è¿‡Twemproxyç›´æ¥å¯¼å…¥åˆ°åç«¯çš„redisã€‚&lt;/li&gt;
&lt;li&gt;è¿ç§»çŠ¶æ€æ˜¾ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;å®Œå–„çš„æ•°æ®æŠ½æ ·æ ¡éªŒ(-C redis_check)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ’é‡ç‚¹ &lt;strong&gt;å®æ—¶è¿ç§»&lt;/strong&gt; &lt;strong&gt;è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæºé›†ç¾¤ä¸å½±å“å¯¹å¤–æä¾›æœåŠ¡&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Redis" scheme="https://sunflowercoder.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Redis Clusteræ•°æ®è¿ç§»å•å®ä¾‹æ–¹æ¡ˆå®æˆ˜</title>
    <link href="https://sunflowercoder.com/Cluster%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%8D%95%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%A1%88%E5%AE%9E%E6%88%98/"/>
    <id>https://sunflowercoder.com/Clusteræ•°æ®è¿ç§»å•å®ä¾‹æ–¹æ¡ˆå®æˆ˜/</id>
    <published>2019-08-01T08:19:07.000Z</published>
    <updated>2019-08-07T03:37:57.782Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Redisé›†ç¾¤åŒæ­¥è¿ç§»çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚redis-port,redis-migrate-toolç­‰å·¥å…·ï¼Œæœ¬æ–‡ä¸»è¦è®²CentOSé€šè¿‡redis-migrate-toolä»é›†ç¾¤è¿ç§»åˆ°å•å®ä¾‹ã€‚</p><p>redis-migrate-tool æ˜¯ç»´å“ä¼šå¼€æºçš„ä¸€æ¬¾redisæ•°æ®è¿ç§»å·¥å…·ï¼ŒåŸºäºrediså¤åˆ¶ï¼Œå¿«é€Ÿï¼Œç¨³å®šï¼Œgithubåœ°å€ä¸ºï¼š<a href="https://github.com/vipshop/redis-migrate-tool" target="_blank" rel="noopener">https://github.com/vipshop/redis-migrate-tool</a> ã€‚</p><p>è¿ç§»å·¥å…·çš„æ¥æºï¼ˆsourceï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®ä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ï¼Œaofæ–‡ä»¶ã€‚<br>è¿ç§»å·¥å…·çš„ç›®æ ‡ï¼ˆtargetï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®ä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ã€‚<br><a id="more"></a><br>ç›®å‰æµ‹è¯•çš„Redisç‰ˆæœ¬ä¸º3.0.0ï¼Œå¦‚æœæ˜¯4.0.xç‰ˆæœ¬å¯èƒ½ä¼šæŠ¥é”™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[2019-07-31 16:57:50.393] rmt_redis.c:1517 MASTER &lt;-&gt; SLAVE sync: receiving 4860 bytes from master[172.16.255.34:7001@17001]</span><br><span class="line">[2019-07-31 16:57:50.393] rmt_redis.c:1623 MASTER &lt;-&gt; SLAVE sync: RDB data for node[172.16.255.34:7001@17001] is received, used: 0 s</span><br><span class="line">[2019-07-31 16:57:50.393] rmt_redis.c:1643 rdb file node172.16.255.34:7001@17001-1564563470312707-6709.rdb write complete</span><br><span class="line">[2019-07-31 16:57:50.393] rmt_redis.c:6446 ERROR: Can&apos;t handle RDB format version -1549717496</span><br><span class="line">[2019-07-31 16:57:50.393] rmt_redis.c:6715 ERROR: Rdb file for node[172.16.255.34:7001@17001] parsed failed</span><br></pre></td></tr></table></figure></p><p>å¦‚ä¸Š<code>Can&#39;t handle RDB format version -1549717496</code>ä¸ºç‰ˆæœ¬å…¼å®¹é—®é¢˜ï¼Œå„ä¸ªç‰ˆæœ¬çš„.rdbæ˜¯ä¸å…¼å®¹çš„ï¼Œrmtå·¥å…·ä¼¼ä¹è¿˜ä¸æ”¯æŒ4.0.Xã€‚</p><p>å¯è€ƒè™‘é™ç‰ˆæœ¬ï¼Œå¦‚æœå¼€å¯äº†<code>appendonly  yes</code>ï¼Œå¯é€šè¿‡.aofæ–‡ä»¶è¿ç§»ã€‚</p><p>å½“å‰é›†ç¾¤æ•°æ®å­˜åœ¨ </p><blockquote><p>172.16.255.34:7000 172.16.255.34:7001<br>172.16.255.35:7002 172.16.255.35:7003<br>172.16.255.36:7004 172.16.255.36:7005</p></blockquote><p>éœ€è¦å°†é›†ç¾¤çš„æ•°æ®è¿ç§»åˆ°å•å®ä¾‹çš„172.16.255.34:6379</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä¾èµ–ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y install automake libtool autoconf bzip2 git</span><br></pre></td></tr></table></figure></p><p>å®‰è£…redis-migrate-toolï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/vipshop/redis-migrate-tool</span><br><span class="line">$ cd redis-migrate-tool</span><br><span class="line">$ autoreconf -fvi</span><br><span class="line">$ ./configure</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹å‘½ä»¤å¸®åŠ©å¯æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -h</span><br></pre></td></tr></table></figure></p><p>å¦‚æœå‡ºç°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -h</span><br><span class="line">This is redis-migrate-tool-0.1.0</span><br><span class="line"></span><br><span class="line">Usage: redis-migrate-tool [-?hVdIn] [-v verbosity level] [-o output file]</span><br><span class="line">                  [-c conf file] [-C command]</span><br><span class="line">                  [-f source address] [-t target address]</span><br><span class="line">                  [-p pid file] [-m mbuf size] [-r target role]</span><br><span class="line">                  [-T thread number] [-b buffer size]</span><br><span class="line">....</span><br></pre></td></tr></table></figure></p><p>å®‰è£…æˆåŠŸã€‚</p><p id="div-border-left-green">æ›´å¤šä»‹ç»<a href="../../redis-migrate-toolä½¿ç”¨è¯¦è§£">æŸ¥çœ‹redis-migrate-toolä½¿ç”¨è¯¦è§£</a></p><h2 id="é…ç½®æ–‡ä»¶æ›´æ”¹"><a href="#é…ç½®æ–‡ä»¶æ›´æ”¹" class="headerlink" title="é…ç½®æ–‡ä»¶æ›´æ”¹"></a>é…ç½®æ–‡ä»¶æ›´æ”¹</h2><p>redis-migrate-toolé»˜è®¤çš„é…ç½®æ–‡ä»¶ä¸ºrmt.confï¼Œæ›´æ”¹å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ vi rmt.conf</span><br><span class="line"></span><br><span class="line">[source]</span><br><span class="line">type: redis cluster</span><br><span class="line">servers :</span><br><span class="line">-172.16.255.34:7000</span><br><span class="line"></span><br><span class="line">[target]</span><br><span class="line">type: single</span><br><span class="line">servers:</span><br><span class="line">-172.16.255.34:6379</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">listen: 0.0.0.0:8888</span><br></pre></td></tr></table></figure></p><p>Esc  :wq ä¿å­˜é€€å‡ºã€‚</p><p>sourceä¸ºé›†ç¾¤ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ªserverså°±å¯ä»¥ã€‚</p><h2 id="å¼€å§‹è¿ç§»"><a href="#å¼€å§‹è¿ç§»" class="headerlink" title="å¼€å§‹è¿ç§»"></a>å¼€å§‹è¿ç§»</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -o log -d</span><br></pre></td></tr></table></figure><p>å¼€å§‹åœ¨åå°è¿è¡Œè¿ç§»ï¼ŒæŸ¥çœ‹è¿è¡Œæ—¥å¿— <code>tail -200 log</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">[2019-08-01 11:59:19.919] rmt_redis.c:6601 Rdb file for node[172.16.255.34:7000] parsed finished, use: 0 s.</span><br><span class="line">[2019-08-01 11:59:19.919] rmt_redis.c:6709 All nodes&apos; rdb file parsed finished for this write thread(0).</span><br></pre></td></tr></table></figure></p><p>å¯çœ‹è§<code>All nodes&#39; rdb file parsed finished</code>åˆ™è¡¨ç¤ºè¿è¡Œå®Œæˆã€‚</p><p><strong>è¿è¡Œæ•°æ®æ£€æŸ¥</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-migrate-tool -o log -d -C redis_check</span><br></pre></td></tr></table></figure></p><p>é»˜è®¤æŠ½æ ·1000ä¸ªæ•°æ®æ£€æŸ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Check job is running...</span><br><span class="line"></span><br><span class="line">Checked keys: 1000</span><br><span class="line">Inconsistent value keys: 0</span><br><span class="line">Inconsistent expire keys : 0</span><br><span class="line">Other check error keys: 0</span><br><span class="line">Checked OK keys: 1000</span><br><span class="line"></span><br><span class="line">All keys checked OK!</span><br><span class="line">Check job finished, used 1.041s</span><br></pre></td></tr></table></figure></p><p>è¿ç§»æˆåŠŸ~</p><p>å¦‚æœä¸­é€”è¿ç§»å¤±è´¥ï¼Œä½¿ç”¨<code>redis-cli -h 172.16.255.34</code>ï¼Œæ¸…é™¤keys<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">172.16.255.34:6379&gt; flushall</span><br></pre></td></tr></table></figure></p><p><code>keys *</code>æ£€æŸ¥æ˜¯å¦æ¸…ç©ºï¼Œä»¥å…listç­‰æ•°æ®è¿ç§»æ—¶ä¼šå¢é‡ï¼Œredis_checkä¼šæ£€æŸ¥ä¸€éƒ¨åˆ†æ•°æ®ä¸ä¸€è‡´ï¼Œä½ ä¼šå‘ç°éƒ½æ˜¯æ˜¾ç¤ºlist<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[2019-07-31 17:00:27.185] rmt_check.c:848 ERROR: key checked failed: check key&apos;s value error, value is inconsistent. key(len:15, type:list): 509A4C6A4WAY_46</span><br></pre></td></tr></table></figure></p><p>Javaä½¿ç”¨JedisClusterè¿æ¥é›†ç¾¤çš„æ”¹æˆJedisPool<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void afterPropertiesSet() throws Exception &#123;</span><br><span class="line">    if (mJedis == null) &#123;</span><br><span class="line">        mJedisPool = new JedisPool(genericObjectPoolConfig, hostName, Integer.valueOf(port), timeout);</span><br><span class="line">        mJedis = mJedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">private Jedis jedis;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Redisé›†ç¾¤åŒæ­¥è¿ç§»çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚redis-port,redis-migrate-toolç­‰å·¥å…·ï¼Œæœ¬æ–‡ä¸»è¦è®²CentOSé€šè¿‡redis-migrate-toolä»é›†ç¾¤è¿ç§»åˆ°å•å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;redis-migrate-tool æ˜¯ç»´å“ä¼šå¼€æºçš„ä¸€æ¬¾redisæ•°æ®è¿ç§»å·¥å…·ï¼ŒåŸºäºrediså¤åˆ¶ï¼Œå¿«é€Ÿï¼Œç¨³å®šï¼Œgithubåœ°å€ä¸ºï¼š&lt;a href=&quot;https://github.com/vipshop/redis-migrate-tool&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/vipshop/redis-migrate-tool&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;p&gt;è¿ç§»å·¥å…·çš„æ¥æºï¼ˆsourceï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®ä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ï¼Œaofæ–‡ä»¶ã€‚&lt;br&gt;è¿ç§»å·¥å…·çš„ç›®æ ‡ï¼ˆtargetï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®ä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Redis" scheme="https://sunflowercoder.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>gitå‡ºç°RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054</title>
    <link href="https://sunflowercoder.com/git%E5%87%BA%E7%8E%B0RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054/"/>
    <id>https://sunflowercoder.com/gitå‡ºç°RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054/</id>
    <published>2019-07-29T09:36:48.000Z</published>
    <updated>2019-08-05T10:39:14.643Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨Hexoåšå®¢å¢åŠ æœ¬åœ°æ–‡ä»¶èµ„æºä¸‹è½½ä¹‹åï¼Œdeployå‘å¸ƒæ—¶å‡ºç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054</span><br><span class="line">fatal: The remote end hung up unexpectedly</span><br><span class="line">Everything up-to-date</span><br></pre></td></tr></table></figure></p><p>ä¸»è¦æ˜¯å› ä¸ºä¸€æ¬¡æ€§æäº¤çš„æ–‡ä»¶è¿‡å¤§ï¼Œè¶…å‡ºäº†HTTPç¼“å­˜çš„ä¸Šé™ã€‚</p><h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><a id="more"></a><p>é€šè¿‡é…ç½®ç¼“å­˜å¯è§£å†³ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.postBuffer 100M</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹é…ç½®<code>git config --list</code><br><img src="/gitå‡ºç°RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054/1564396087.jpg" title="1564396087.jpg"></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;åœ¨Hexoåšå®¢å¢åŠ æœ¬åœ°æ–‡ä»¶èµ„æºä¸‹è½½ä¹‹åï¼Œdeployå‘å¸ƒæ—¶å‡ºç°ï¼š&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fatal: The remote end hung up unexpectedly&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Everything up-to-date&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¸»è¦æ˜¯å› ä¸ºä¸€æ¬¡æ€§æäº¤çš„æ–‡ä»¶è¿‡å¤§ï¼Œè¶…å‡ºäº†HTTPç¼“å­˜çš„ä¸Šé™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è§£å†³&quot;&gt;&lt;a href=&quot;#è§£å†³&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³&quot;&gt;&lt;/a&gt;è§£å†³&lt;/h3&gt;
    
    </summary>
    
    
      <category term="Git" scheme="https://sunflowercoder.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Scrapy+Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™</title>
    <link href="https://sunflowercoder.com/Scrapy-Selenium%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%E7%BD%91%E7%AB%99/"/>
    <id>https://sunflowercoder.com/Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™/</id>
    <published>2019-07-17T10:53:44.000Z</published>
    <updated>2019-08-07T03:33:19.141Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><p>Seleniumæ˜¯ä¸€ä¸ªç”¨äºWebåº”ç”¨ç¨‹åºæµ‹è¯•çš„å·¥å…·ã€‚ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå°±åƒçœŸæ­£çš„ç”¨æˆ·åœ¨æ“ä½œä¸€æ ·ã€‚æ”¯æŒçš„æµè§ˆå™¨åŒ…æ‹¬IEï¼ˆ7, 8, 9, 10, 11ï¼‰ï¼ŒFirefoxï¼ŒSafariï¼ŒChromeï¼ŒOperaç­‰ï¼Œåœ¨çˆ¬è™«ä¸Šåˆ™æ˜¯æ¨¡æ‹Ÿæ­£å¸¸ç”¨æˆ·è®¿é—®ç½‘é¡µå¹¶è·å–æ•°æ®ã€‚</p><h2 id="2-å®‰è£…-Selenium"><a href="#2-å®‰è£…-Selenium" class="headerlink" title="2.å®‰è£… Selenium"></a>2.å®‰è£… Selenium</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install selenium</span><br></pre></td></tr></table></figure><h2 id="3-å®‰è£…é©±åŠ¨"><a href="#3-å®‰è£…é©±åŠ¨" class="headerlink" title="3.å®‰è£…é©±åŠ¨"></a>3.å®‰è£…é©±åŠ¨</h2><p>æ¨¡æ‹ŸçœŸæ­£çš„ç”¨æˆ·æ“ä½œå½“ç„¶éœ€è¦é€‰æ‹©å¥½ç”¨æ¥æ“ä½œçš„æµè§ˆå™¨ï¼Œæ ¹æ®æµè§ˆå™¨æ¥å®‰è£…ç›¸åº”çš„é©±åŠ¨è°ƒèµ·ã€‚</p><a id="more"></a><h3 id="3-1-Chrome"><a href="#3-1-Chrome" class="headerlink" title="3.1 Chrome"></a>3.1 Chrome</h3><p>ä½¿ç”¨seleniumé©±åŠ¨chromeæµè§ˆå™¨éœ€è¦ä¸‹è½½chromedriverï¼Œè€Œä¸”chromedriverç‰ˆæœ¬éœ€è¦ä¸chromeçš„ç‰ˆæœ¬å¯¹åº”ï¼Œç‰ˆæœ¬é”™è¯¯çš„è¯åˆ™ä¼šè¿è¡ŒæŠ¥é”™ã€‚</p><p>æŸ¥çœ‹chromeçš„ç‰ˆæœ¬ï¼Œå¯é€šè¿‡<code>å¸®åŠ© &gt; å…³äºGoogle Chrome(G)</code>ã€‚</p><img src="/Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™/1563419114.jpg" title="æŸ¥çœ‹Chromeç‰ˆæœ¬"><p>ä¸‹è½½chromedriverå¯ä»¥é€šè¿‡æ·˜å®é•œåƒåœ°å€ï¼š<a href="http://npm.taobao.org/mirrors/chromedriver/" target="_blank" rel="noopener">http://npm.taobao.org/mirrors/chromedriver/</a> ã€‚æœ€æ–°çš„é•œåƒä¸ChromeåŒåï¼Œå°½é‡é€‰æ‹©ç‰ˆæœ¬ç›¸è¿‘çš„é¿å…å…¼å®¹é—®é¢˜ï¼Œé•œåƒä¸‹notes.txtå¯æŸ¥çœ‹å½“å‰é©±åŠ¨æ”¯æŒçš„ç‰ˆæœ¬ã€‚</p><img src="/Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™/1563418582.jpg" title="chromedriverç‰ˆæœ¬"><p>é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ï¼Œä¸‹è½½å®Œè§£å‹å°†chromedriver.exeæ”¾åœ¨æœ‰è®¾ç½®ç¯å¢ƒå˜é‡çš„ç›®å½•ä¸‹ï¼Œå°ç¼–æ˜¯æ”¾åœ¨pythonçš„å®‰è£…ç›®å½•ä¸‹çš„ï¼Œå³python.exeæ‰€åœ¨çš„ç›®å½•ã€‚</p><img src="/Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™/1563419759.jpg" title="1563419759.jpg"><h3 id="3-2-Firefox"><a href="#3-2-Firefox" class="headerlink" title="3.2 Firefox"></a>3.2 Firefox</h3><p>ä½¿ç”¨seleniumé©±åŠ¨Firefoxæµè§ˆå™¨éœ€è¦ä¸‹è½½geckodriverï¼ŒæŸ¥çœ‹æµè§ˆå™¨ç‰ˆæœ¬é€šè¿‡<code>å¸®åŠ© &gt; å…³äº Firefox</code>ã€‚</p><img src="/Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™/1563420565.jpg" title="Firefoxç‰ˆæœ¬"><p>ä¸‹è½½geckodriverå¯é€šè¿‡mozillaçš„ä»“åº“åœ°å€ï¼š<a href="https://github.com/mozilla/geckodriver/releasesã€‚" target="_blank" rel="noopener">https://github.com/mozilla/geckodriver/releasesã€‚</a></p><p>é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ï¼Œè§£å‹ågeckodriver.exeåŒæ ·ä¹Ÿæ˜¯æ”¾åœ¨pythonçš„å®‰è£…ç›®å½•ä¸‹ã€‚</p><img src="/Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™/1563420774.jpg" title="1563420774.jpg"><h3 id="3-3-å…¶å®ƒæµè§ˆå™¨é©±åŠ¨ä¸‹è½½"><a href="#3-3-å…¶å®ƒæµè§ˆå™¨é©±åŠ¨ä¸‹è½½" class="headerlink" title="3.3 å…¶å®ƒæµè§ˆå™¨é©±åŠ¨ä¸‹è½½"></a>3.3 å…¶å®ƒæµè§ˆå™¨é©±åŠ¨ä¸‹è½½</h3><p>Operaï¼š<a href="http://npm.taobao.org/mirrors/operadriver/" target="_blank" rel="noopener">http://npm.taobao.org/mirrors/operadriver/</a></p><p>IEï¼š<a href="http://selenium-release.storage.googleapis.com/index.html" target="_blank" rel="noopener">http://selenium-release.storage.googleapis.com/index.html</a> ï¼ˆç‰ˆæœ¬å·è¦ä¸seleniumçš„ç‰ˆæœ¬ä¸€è‡´ï¼ŒæŸ¥çœ‹å®‰è£…çš„seleniumç‰ˆæœ¬ï¼Œå¯é€šè¿‡<code>pip show selenium</code>ï¼‰å¦‚æœæ²¡æœ‰vpnå¯èƒ½ä¼šæ‰“ä¸å¼€ï¼Œå¯<a href="/download/IEDriverServer.zip">ç‚¹å‡»ä¸‹è½½</a>3.14.0ç‰ˆæœ¬çš„ã€‚</p><h2 id="4-Seleniumä½¿ç”¨"><a href="#4-Seleniumä½¿ç”¨" class="headerlink" title="4.Seleniumä½¿ç”¨"></a>4.Seleniumä½¿ç”¨</h2><h3 id="4-1-Chrome-é…ç½®"><a href="#4-1-Chrome-é…ç½®" class="headerlink" title="4.1 Chrome é…ç½®"></a>4.1 Chrome é…ç½®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">options = webdriver.ChromeOptions()</span><br><span class="line"><span class="comment">## æ— ç•Œé¢</span></span><br><span class="line"><span class="comment"># options.add_argument('--headless')</span></span><br><span class="line">driver = webdriver.Chrome(chrome_options=options)</span><br><span class="line">driver.set_window_size(<span class="number">1366</span>, <span class="number">768</span>)</span><br><span class="line">driver.set_page_load_timeout(self.timeout)</span><br></pre></td></tr></table></figure><p>æ³¨æ„Chromeå¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™ç›¸å…³é…ç½®ï¼Œå°ç¼–ä¹ æƒ¯æ€§ç”¨FirefoxğŸ˜‚</p><h3 id="4-2-Firefox-é…ç½®"><a href="#4-2-Firefox-é…ç½®" class="headerlink" title="4.2 Firefox é…ç½®"></a>4.2 Firefox é…ç½®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®ä¾‹åŒ–å‚æ•°å¯¹è±¡</span></span><br><span class="line">options = webdriver.FirefoxOptions()</span><br><span class="line"><span class="comment"># æ— ç•Œé¢</span></span><br><span class="line"><span class="comment"># options.add_argument('--headless')</span></span><br><span class="line">driver = webdriver.Firefox(firefox_options=options)</span><br><span class="line">driver.set_window_size(<span class="number">1400</span>, <span class="number">700</span>)</span><br><span class="line">driver.set_page_load_timeout(self.timeout)</span><br></pre></td></tr></table></figure><h3 id="4-3-ä¸æ˜¾ç¤ºæ‰“å¼€æµè§ˆå™¨çš„ç•Œé¢"><a href="#4-3-ä¸æ˜¾ç¤ºæ‰“å¼€æµè§ˆå™¨çš„ç•Œé¢" class="headerlink" title="4.3 ä¸æ˜¾ç¤ºæ‰“å¼€æµè§ˆå™¨çš„ç•Œé¢"></a>4.3 ä¸æ˜¾ç¤ºæ‰“å¼€æµè§ˆå™¨çš„ç•Œé¢</h3><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸æƒ³è¦çœ‹åˆ°çˆ¬å–çš„ä¸€æ­¥æ­¥æ“ä½œï¼Œåªå…³å¿ƒç»“æœï¼Œåˆ™å¯ä»¥åœ¨å‚æ•°é…ç½®<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— ç•Œé¢</span></span><br><span class="line">options.add_argument(<span class="string">'--headless'</span>)</span><br></pre></td></tr></table></figure></p><h3 id="4-4-ç¦ç”¨æµè§ˆå™¨å¼¹çª—"><a href="#4-4-ç¦ç”¨æµè§ˆå™¨å¼¹çª—" class="headerlink" title="4.4 ç¦ç”¨æµè§ˆå™¨å¼¹çª—"></a>4.4 ç¦ç”¨æµè§ˆå™¨å¼¹çª—</h3><p>ä¸æ˜¯é¡µé¢å¼¹çª—ï¼Œæ˜¯æµè§ˆå™¨è®¾ç½®é‡Œçš„å¼¹çª—ã€‚åœ¨æ‰“å¼€æµè§ˆå™¨æ—¶ï¼Œä½¿ç”¨å‚æ•°é…ç½®å…³é—­<br><strong>Firefox</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">options.set_preference(<span class="string">'dom.webnotifications.enabled'</span>, <span class="literal">False</span>)</span><br><span class="line">options.set_preference(<span class="string">'dom.push.enabled'</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure></p><p><strong>Chrome</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prefs = &#123;</span><br><span class="line">    <span class="string">'profile.default_content_setting_values'</span>: &#123;</span><br><span class="line">        <span class="string">'notifications'</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">options.add_experimental_option(<span class="string">'prefs'</span>, prefs)</span><br></pre></td></tr></table></figure></p><h3 id="4-5-driverå±æ€§å’Œæ–¹æ³•"><a href="#4-5-driverå±æ€§å’Œæ–¹æ³•" class="headerlink" title="4.5 driverå±æ€§å’Œæ–¹æ³•"></a>4.5 driverå±æ€§å’Œæ–¹æ³•</h3><ul><li><p>é¡µé¢åŠ è½½</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"http://www.baidu.com"</span>)</span><br></pre></td></tr></table></figure></li><li><p>å…³é—­æµè§ˆå™¨</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çˆ¬è™«ç»“æŸå…³é—­æµè§ˆå™¨</span></span><br><span class="line">driver.close()</span><br></pre></td></tr></table></figure></li><li><p>è·å–å½“å‰url</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.current_url</span><br></pre></td></tr></table></figure></li><li><p>åˆ·æ–°</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.refresh()</span><br></pre></td></tr></table></figure></li><li><p>é¡µé¢æ ‡é¢˜</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.title</span><br></pre></td></tr></table></figure></li><li><p>é¡µé¢æ¸²æŸ“åçš„æºç </p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.page_source</span><br></pre></td></tr></table></figure></li><li><p>è·å–çª—å£ä¿¡æ¯</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.get_window_rect()</span><br></pre></td></tr></table></figure><p>  è·å–å½“å‰çª—å£çš„x,yåæ ‡å’Œå½“å‰çª—å£çš„é«˜åº¦å’Œå®½åº¦ï¼Œå¦‚ï¼š{â€˜heightâ€™: 1366, â€˜widthâ€™: 768, â€˜xâ€™: 0, â€˜yâ€™: 200}</p></li><li><p>è®¾ç½® User Agent(Firefoxä¸ºä¾‹)</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">profile = webdriver.FirefoxProfile()</span><br><span class="line">profile.set_preference(<span class="string">"general.useragent.override"</span>, <span class="string">"some UA string"</span>)</span><br><span class="line">driver = webdriver.Firefox(profile=profile)</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œjsè„šæœ¬</p><p>  ä½¿ç”¨<code>driver.execute_script([jsè„šæœ¬],*args)</code>åŒæ­¥æ‰§è¡Œï¼Œå¦‚æ»‘åŠ¨åˆ°ç¬¬ä¸€ä¸ªclassä¸ºcm-explain-bottomçš„å…ƒç´ ä½ç½®ã€‚</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.execute_script(</span><br><span class="line">   <span class="string">"document.getElementsByClassName('cm-explain-bottom')[0].scrollIntoView(true)"</span>)</span><br></pre></td></tr></table></figure><p>  å¼‚æ­¥æ‰§è¡Œä½¿ç”¨<code>driver.execute_async_script([jsè„šæœ¬],*args)</code>ï¼Œ*argswä¸ºæ‰§è¡Œjsä»£ç è¦ä¼ å…¥çš„å‚æ•°ã€‚</p></li><li><p>æŸ¥æ‰¾å…ƒç´ </p><p>  è¿”å›ä¸€ä¸ª<code>WebElement</code>å¯¹è±¡ã€‚</p><ul><li>é€šè¿‡idå±æ€§ï¼š<code>element = driver.find_element_by_id(&quot;coolestWidgetEvah&quot;)</code></li><li>é€šè¿‡classå±æ€§ï¼š<code>cheeses = driver.find_elements_by_class_name(&quot;cheese&quot;)</code></li><li>é€šè¿‡æ ‡ç­¾åï¼š<code>frame = driver.find_element_by_tag_name(&quot;iframe&quot;)</code></li><li>é€šè¿‡cssé€‰æ‹©å™¨ï¼š<code>cheese = driver.find_element_by_css_selector(&quot;#food span.dairy.aged&quot;)</code></li><li>é€šè¿‡nameå±æ€§ï¼š<code>cheese = driver.find_element_by_name(&quot;cheese&quot;)</code></li><li>é€šè¿‡xpathï¼š<code>inputs = driver.find_elements_by_xpath(&quot;//input&quot;)</code></li><li>é€šè¿‡é“¾æ¥æ–‡æœ¬ï¼ˆå®Œå…¨åŒ¹é…ï¼‰ï¼š<code>cheese = driver.find_element_by_link_text(&quot;cheese&quot;)</code></li><li>é€šè¿‡é“¾æ¥æ–‡æœ¬ï¼ˆéƒ¨åˆ†åŒ¹é…ï¼‰ï¼š<code>cheese = driver.find_element_by_partial_link_text(&quot;cheese&quot;)</code></li></ul></li><li><p>å…ƒç´ (WebElement)çš„å±æ€§å’Œæ–¹æ³•</p><ul><li>æ ‡ç­¾ä¸‹æ–‡æœ¬ï¼š<code>element.text</code></li><li>ç‚¹å‡»ï¼š<code>element.click()</code></li><li>è¡¨å•æäº¤ï¼š<code>element.submit()</code></li><li><p>è¾“å…¥ï¼š<code>element.send_keys(123)</code></p></li><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç­‰å¾…é‚®ç®±å’Œå¯†ç å¯å®šä½åŠç™»å½•æŒ‰é’®å¯æäº¤ï¼Œæ¸…ç©ºè¾“å…¥æ¡†ï¼Œåˆ†åˆ«è¾“å…¥ç”¨æˆ·åå¯†ç ç‚¹å‡»æäº¤æŒ‰é’®</span></span><br><span class="line">email = self.wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">"#email"</span>)))</span><br><span class="line">passwd = self.wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, <span class="string">"#pass"</span>)))</span><br><span class="line">submit = self.wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'#loginbutton'</span>)))</span><br><span class="line">email.clear()</span><br><span class="line">passwd.clear()</span><br><span class="line">email.send_keys(user)</span><br><span class="line">passwd.send_keys(password)</span><br><span class="line">submit.click()</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Cookieæ“ä½œ</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">driver.get(<span class="string">"http://www.example.com"</span>)</span><br><span class="line"><span class="comment"># ç»™å½“å‰urlåŸŸè®¾ç½®cookie</span></span><br><span class="line"><span class="comment"># nameçš„å€¼å¯¹åº”cookie keyï¼Œvalueçš„å€¼å¯¹åº”cookie value</span></span><br><span class="line">driver.add_cookie(&#123;<span class="string">'name'</span>:<span class="string">'key'</span>, <span class="string">'value'</span>:<span class="string">'value'</span>, <span class="string">'path'</span>:<span class="string">'/'</span>&#125;)</span><br><span class="line"><span class="comment"># å¯é€‰çš„å±æ€§</span></span><br><span class="line"><span class="comment"># 'domain' -&gt; String,</span></span><br><span class="line"><span class="comment"># 'secure' -&gt; Boolean,</span></span><br><span class="line"><span class="comment"># 'expiry' -&gt; Milliseconds since the Epoch it should expire.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå½“å‰urlæ‰€æœ‰çš„Cookie</span></span><br><span class="line"><span class="keyword">for</span> cookie <span class="keyword">in</span> driver.get_cookies():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s -&gt; %s"</span> % (cookie[<span class="string">'name'</span>], cookie[<span class="string">'value'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡nameåˆ é™¤Cookie</span></span><br><span class="line">driver.delete_cookie(<span class="string">"CookieName"</span>)</span><br><span class="line"><span class="comment"># åˆ é™¤æ‰€æœ‰çš„Cookie</span></span><br><span class="line">driver.delete_all_cookies()</span><br></pre></td></tr></table></figure></li><li><p>åˆ‡æ¢é¡µé¢æ¡†æ¶æˆ–çª—å£</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">driver.switch_to.window(<span class="string">"windowName"</span>)</span><br></pre></td></tr></table></figure><p>  åˆ‡æ¢é»˜è®¤æ¡†æ¶ï¼š<code>driver.switch_to.default_content()</code></p><p>  åˆ‡æ¢æœ€æ–°çª—å£ï¼š</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">windows = driver.window_handles</span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°æœ€æ–°æ‰“å¼€çš„çª—å£ä¸­</span></span><br><span class="line">switch_to.window(windows[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure></li><li><p>è·å–æœ€æ–°çš„alertå¼¹çª—</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert = driver.switch_to.alert</span><br><span class="line"><span class="comment"># å…³é—­å¼¹çª—</span></span><br><span class="line">alert.dismiss()</span><br></pre></td></tr></table></figure></li><li><p>å½“å‰çš„urlè¿”å›æˆ–è€…è·Ÿè¿›</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver.forward()</span><br><span class="line">driver.back()</span><br></pre></td></tr></table></figure></li><li><p>æˆªå±</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›é¡µé¢çš„base64ç¼–ç å­—ç¬¦ä¸²</span></span><br><span class="line">base64 = driver.get_screenshot_as_base64()</span><br><span class="line"><span class="comment"># è¿”å›ä¿å­˜åˆ°æ–‡ä»¶çš„ç»“æœ</span></span><br><span class="line">result = driver.get_screenshot_as_file(<span class="string">"D:\\example.png"</span>)</span><br><span class="line"><span class="comment"># pngæ ¼å¼çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line">pngSrc =  driver.get_screenshot_as_png()</span><br></pre></td></tr></table></figure></li></ul><p>ä½¿ç”¨Seleniumçˆ¬å–ä¸ƒéº¦æ•°æ®APPæ’è¡Œæ¦œï¼š<a href="../../Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/">ç‚¹å‡»å‰å¾€</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#1-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1.ç®€ä»‹&quot;&gt;&lt;/a&gt;1.ç®€ä»‹&lt;/h2&gt;&lt;p&gt;Seleniumæ˜¯ä¸€ä¸ªç”¨äºWebåº”ç”¨ç¨‹åºæµ‹è¯•çš„å·¥å…·ã€‚ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå°±åƒçœŸæ­£çš„ç”¨æˆ·åœ¨æ“ä½œä¸€æ ·ã€‚æ”¯æŒçš„æµè§ˆå™¨åŒ…æ‹¬IEï¼ˆ7, 8, 9, 10, 11ï¼‰ï¼ŒFirefoxï¼ŒSafariï¼ŒChromeï¼ŒOperaç­‰ï¼Œåœ¨çˆ¬è™«ä¸Šåˆ™æ˜¯æ¨¡æ‹Ÿæ­£å¸¸ç”¨æˆ·è®¿é—®ç½‘é¡µå¹¶è·å–æ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;2-å®‰è£…-Selenium&quot;&gt;&lt;a href=&quot;#2-å®‰è£…-Selenium&quot; class=&quot;headerlink&quot; title=&quot;2.å®‰è£… Selenium&quot;&gt;&lt;/a&gt;2.å®‰è£… Selenium&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; pip install selenium&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;3-å®‰è£…é©±åŠ¨&quot;&gt;&lt;a href=&quot;#3-å®‰è£…é©±åŠ¨&quot; class=&quot;headerlink&quot; title=&quot;3.å®‰è£…é©±åŠ¨&quot;&gt;&lt;/a&gt;3.å®‰è£…é©±åŠ¨&lt;/h2&gt;&lt;p&gt;æ¨¡æ‹ŸçœŸæ­£çš„ç”¨æˆ·æ“ä½œå½“ç„¶éœ€è¦é€‰æ‹©å¥½ç”¨æ¥æ“ä½œçš„æµè§ˆå™¨ï¼Œæ ¹æ®æµè§ˆå™¨æ¥å®‰è£…ç›¸åº”çš„é©±åŠ¨è°ƒèµ·ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Scrapy" scheme="https://sunflowercoder.com/categories/Scrapy/"/>
    
    
  </entry>
  
  <entry>
    <title>Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰</title>
    <link href="https://sunflowercoder.com/Scrapy-%E7%88%AC%E5%8F%96%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91%E7%9A%84%E5%8D%95%E8%AF%8D%E9%87%8A%E4%B9%89/"/>
    <id>https://sunflowercoder.com/Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/</id>
    <published>2019-07-16T10:52:59.000Z</published>
    <updated>2019-08-07T03:29:13.233Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç†Ÿæ‚‰Scrapyæ¡†æ¶åï¼Œæˆ‘ä»¬æ‰‹å†™ç¬¬ä¸€ä¸ªçˆ¬è™«ï¼Œçˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯å‘éŸ³ï¼Œå‘éŸ³æ–‡ä»¶é“¾æ¥ï¼Œé‡Šä¹‰ï¼Œä¾‹å¥ã€‚</p><p id="div-border-left-yellow">éœ€è¦å…ˆç†Ÿæ‚‰Scrapyæ¡†æ¶çš„åŒå­¦ï¼š<a href="../../Scrapyè¯¦è§£-çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼/">ç‚¹å‡»å­¦ä¹ </a></p><p>å¦‚å•è¯<code>proportion</code>ï¼šæœ‰é“ç¿»è¯‘çš„è¯¦æƒ…è¿æ¥ä¸º <a href="http://dict.youdao.com/w/eng/proportion" target="_blank" rel="noopener">http://dict.youdao.com/w/eng/proportion</a> ã€‚æœ¬ç¯‡æ–‡ç« çˆ¬å–çš„å†…å®¹ç»“æœï¼š<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"example"</span>: [&#123;<span class="attr">"en"</span>: <span class="string">"I seemed to have lost all sense of proportion."</span>,</span><br><span class="line">              <span class="attr">"zh"</span>: <span class="string">"æˆ‘å¥½è±¡å·²ç»ä¸§å¤±äº†æœ‰å…³æ¯”ä¾‹çš„ä¸€åˆ‡æ„Ÿè§‰ã€‚"</span>&#125;,</span><br><span class="line">             &#123;<span class="attr">"en"</span>: <span class="string">"The price of this article is out of(all) proportion to its value."</span>,</span><br><span class="line">              <span class="attr">"zh"</span>: <span class="string">"è¿™ä¸ªå•†å“çš„ä»·æ ¼ä¸å®ƒçš„ä»·å€¼å®Œå…¨ä¸æˆæ¯”ä¾‹ã€‚"</span>&#125;,</span><br><span class="line">             &#123;<span class="attr">"en"</span>: <span class="string">"But, the use of interception bases on the violation of the citizen rights, so it should be satisfactory of the principle of legal reservation and the principle of proportion."</span>,</span><br><span class="line">              <span class="attr">"zh"</span>: <span class="string">"ä½†æ˜¯ï¼Œç›‘å¬çš„é€‚ç”¨æ˜¯ä»¥ä¾µå®³å…¬æ°‘æƒåˆ©ä¸ºå‰æçš„ï¼Œå› æ­¤ç›‘å¬åœ¨åˆ‘äº‹ä¾¦æŸ¥ä¸­çš„è¿ç”¨å¿…é¡»æ»¡è¶³æ³•å¾‹ä¿ç•™åŸåˆ™å’Œæ¯”ä¾‹åŸåˆ™çš„è¦æ±‚ã€‚"</span>&#125;],</span><br><span class="line"> <span class="attr">"explain"</span>: [<span class="string">"n. æ¯”ä¾‹ï¼Œå æ¯”ï¼›éƒ¨åˆ†ï¼›é¢ç§¯ï¼›å‡è¡¡"</span>, <span class="string">"vt. ä½¿æˆæ¯”ä¾‹ï¼›ä½¿å‡è¡¡ï¼›åˆ†æ‘Š"</span>],</span><br><span class="line"> <span class="attr">"pron"</span>: <span class="string">"[prÉ™'pÉ”ËÊƒ(É™)n]"</span>,</span><br><span class="line"> <span class="attr">"pron_url"</span>: <span class="string">"http://dict.youdao.com/dictvoice?audio=proportion&amp;type=1"</span>,</span><br><span class="line"> <span class="attr">"word"</span>: <span class="string">"proportion"</span>&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><img src="/Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/1563274686.jpg" title="proportionæœ‰é“é‡Šä¹‰"><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>åœ¨éœ€è¦åˆ›å»ºçš„ç›®å½•ä¸‹ï¼Œ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject youdaoeng</span><br></pre></td></tr></table></figure></p><p>å›è½¦å³å¯åˆ›å»ºé»˜è®¤çš„Scrapyé¡¹ç›®æ¶æ„ã€‚</p><img src="/Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/1563274952.jpg" title="youdaoengé¡¹ç›®æ¶æ„"><h2 id="åˆ›å»ºItem"><a href="#åˆ›å»ºItem" class="headerlink" title="åˆ›å»ºItem"></a>åˆ›å»ºItem</h2><p>åˆ›å»ºYoudaoengItemç»§æ‰¿scrapy.Itemï¼Œå¹¶å®šä¹‰éœ€è¦å­˜å‚¨çš„å•è¯ï¼Œå‘éŸ³ï¼Œå‘éŸ³æ–‡ä»¶é“¾æ¥ï¼Œé‡Šä¹‰ï¼Œä¾‹å¥ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YoudaoengItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    <span class="comment"># å•è¯</span></span><br><span class="line">    word = scrapy.Field()</span><br><span class="line">    <span class="comment"># è‹±å¼å‘éŸ³</span></span><br><span class="line">    pron = scrapy.Field()</span><br><span class="line">    <span class="comment"># å‘éŸ³audioæ–‡ä»¶é“¾æ¥</span></span><br><span class="line">    pron_url = scrapy.Field()</span><br><span class="line">    <span class="comment"># é‡Šä¹‰</span></span><br><span class="line">    explain = scrapy.Field()</span><br><span class="line">    <span class="comment"># ä¾‹å¥</span></span><br><span class="line">    example = scrapy.Field()</span><br></pre></td></tr></table></figure></p><h2 id="åˆ›å»ºSpider"><a href="#åˆ›å»ºSpider" class="headerlink" title="åˆ›å»ºSpider"></a>åˆ›å»ºSpider</h2><p>åœ¨<code>spiders</code>ç›®å½•ä¸‹åˆ›å»º<code>EngSpider.py</code>ï¼Œå¹¶åˆ›å»º<code>class EngSpider</code>ï¼Œç»§æ‰¿äºSpiderã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> Spider</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EngSpider</span><span class="params">(Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"EngSpider"</span></span><br><span class="line">    <span class="comment"># å…è®¸è®¿é—®çš„åŸŸ</span></span><br><span class="line">    allowed_domains = [<span class="string">"dict.youdao.com"</span>]</span><br><span class="line"></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'http://dict.youdao.com/w/eng/agree'</span>, <span class="string">'http://dict.youdao.com/w/eng/prophet'</span>,</span><br><span class="line">                <span class="string">'http://dict.youdao.com/w/eng/proportion'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p><ul><li><code>name</code>ï¼šç”¨äºåŒºåˆ«Spiderï¼Œè¯¥åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</li><li><code>start_urls</code>ï¼šSpideråœ¨å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„urlåˆ—è¡¨ï¼Œé¦–å…ˆä¼šçˆ¬å–ç¬¬ä¸€ä¸ªã€‚</li><li><code>def parse(self, response)</code>ï¼šå¾—åˆ°è¯·æ±‚urlåçš„responseä¿¡æ¯çš„è§£ææ–¹æ³•ã€‚</li></ul><p>æœ‰é“ç¿»è¯‘çš„ç½‘å€ä¸º<a href="http://dict.youdao.com/" target="_blank" rel="noopener">http://dict.youdao.com/</a> ï¼Œæ ¹æ®åˆ†æï¼ŒæŸ¥è¯¢è‹±æ–‡å•è¯ç»“æœåé“¾æ¥æ›´æ”¹ï¼Œå¦‚æŸ¥è¯¢<code>agree</code>ï¼Œè·³è½¬å•è¯è¯¦æƒ…åœ°å€ä¸º<a href="http://dict.youdao.com/w/eng/agree" target="_blank" rel="noopener">http://dict.youdao.com/w/eng/agree</a> ã€‚æ‰€ä»¥å‡ ä¹å¯ä»¥è®¤ä¸ºå•è¯çš„è¯¦æƒ…é¡µé“¾æ¥å¯ä»¥æ˜¯<a href="http://dict.youdao.com/w/eng/" target="_blank" rel="noopener">http://dict.youdao.com/w/eng/</a> æ‹¼æ¥ä¸Šå•è¯æœ¬èº«ï¼Œæ‰€ä»¥é…ç½®<code>start_urls</code>æˆ‘ä»¬æŸ¥è¯¢ä¸‰ä¸ªå•è¯çš„é‡Šä¹‰è¯¦æƒ…ã€‚</p><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>è§£æç”¨çš„Selectorsé€‰æ‹©å™¨æœ‰å¤šç§æ–¹æ³•ï¼š</p><ul><li>xpath(): ä¼ å…¥xpathè¡¨è¾¾å¼ï¼Œè¿”å›è¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨ ã€‚</li><li>css(): ä¼ å…¥CSSè¡¨è¾¾å¼ï¼Œè¿”å›è¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨.</li><li>extract(): åºåˆ—åŒ–è¯¥èŠ‚ç‚¹ä¸ºunicodeå­—ç¬¦ä¸²å¹¶è¿”å›listã€‚</li><li>re(): æ ¹æ®ä¼ å…¥çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œè¿”å›unicodeå­—ç¬¦ä¸²liståˆ—è¡¨ã€‚</li></ul><p>ä¸‹é¢æˆ‘ä»¬ç”¨xpath()é€‰æ‹©èŠ‚ç‚¹ï¼Œxpathçš„è¯­æ³•å¯å‚è€ƒw3cçš„<a href="http://www.w3school.com.cn/xpath/xpath_nodes.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/xpath/xpath_nodes.asp</a> å­¦ä¹ ï¼Œéœ€è¦ç†Ÿæ‚‰è¯­æ³•ã€è¿ç®—ç¬¦ã€å‡½æ•°ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    box = response.xpath(<span class="string">'//*[@id="results-contents"]'</span>)</span><br><span class="line">    word = YoudaoengItem()</span><br><span class="line">    <span class="comment"># ç®€æ˜é‡Šä¹‰</span></span><br><span class="line">    box_simple = box.xpath(<span class="string">'.//*[@id="phrsListTab"]'</span>)</span><br><span class="line">    <span class="comment"># åˆ¤æ–­æŸ¥å‡ºæ¥çš„å­—æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> box_simple:</span><br><span class="line">        <span class="comment"># å•è¯</span></span><br><span class="line">        word[<span class="string">'word'</span>] = box_simple.xpath(<span class="string">'.//h2[@class="wordbook-js"]//span[@class="keyword"]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># è‹±å¼å‘éŸ³</span></span><br><span class="line">        word[<span class="string">'pron'</span>] = box_simple.xpath(</span><br><span class="line">            <span class="string">'.//h2[@class="wordbook-js"]//div[@class="baav"]//*[@class="phonetic"]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># å‘éŸ³é“¾æ¥</span></span><br><span class="line">        word[<span class="string">'pron_url'</span>] = <span class="string">"http://dict.youdao.com/dictvoice?audio="</span> + word[<span class="string">'word'</span>] + <span class="string">"&amp;type=1"</span></span><br><span class="line">        <span class="comment"># é‡Šä¹‰</span></span><br><span class="line">        word[<span class="string">'explain'</span>] = []</span><br><span class="line">        temp = box_simple.xpath(<span class="string">'.//div[@class="trans-container"]//ul//li/text()'</span>).extract()</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> temp:</span><br><span class="line">            <span class="keyword">if</span> len(item) &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> re.search(<span class="string">r'\n'</span>, item) <span class="keyword">and</span> <span class="keyword">not</span> re.match(<span class="string">r' '</span>, item):</span><br><span class="line">                print(item)</span><br><span class="line">                word[<span class="string">'explain'</span>].append(item)</span><br><span class="line">        <span class="comment"># ä¾‹å¥</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        word[<span class="string">'example'</span>] = []</span><br><span class="line">        example_root = box.xpath(<span class="string">'//*[@id="bilingual"]//ul[@class="ol"]/li'</span>)</span><br><span class="line">        <span class="comment"># 1.åŒè¯­ä¾‹å¥æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> example_root:</span><br><span class="line">            <span class="keyword">for</span> li <span class="keyword">in</span> example_root:</span><br><span class="line">                en = <span class="string">""</span></span><br><span class="line">                <span class="keyword">for</span> span <span class="keyword">in</span> li.xpath(<span class="string">'./p[1]/span'</span>):</span><br><span class="line">                    <span class="keyword">if</span> span.xpath(<span class="string">'./text()'</span>).extract():</span><br><span class="line">                        en += span.xpath(<span class="string">'./text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">                    <span class="keyword">elif</span> span.xpath(<span class="string">'./b/text()'</span>).extract():</span><br><span class="line">                        en += span.xpath(<span class="string">'./b/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">                zh = str().join(li.xpath(<span class="string">'./p[2]/span/text()'</span>).extract()).replace(<span class="string">' '</span>, <span class="string">''</span>)</span><br><span class="line">                word[<span class="string">'example'</span>].append(dict(en=en.replace(<span class="string">'\"'</span>, <span class="string">'\\"'</span>), zh=zh))</span><br><span class="line">        <span class="comment">#  2.æŸ¯æ—æ–¯è‹±æ±‰åŒè§£å¤§è¾å…¸çš„ä¾‹å¥æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">elif</span> box.xpath(<span class="string">'//*[@id="collinsResult"]//ul[@class="ol"]//div[@class="examples"]'</span>):</span><br><span class="line">            example_root = box.xpath(<span class="string">'//*[@id="collinsResult"]//ul[@class="ol"]//li'</span>)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> example_root:</span><br><span class="line">                <span class="keyword">if</span> i.xpath(<span class="string">'.//*[@class="exampleLists"]'</span>):</span><br><span class="line">                    en = i.xpath(</span><br><span class="line">                        <span class="string">'.//*[@class="exampleLists"][1]//div[@class="examples"]/p[1]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">                    zh = i.xpath(</span><br><span class="line">                        <span class="string">'.//*[@class="exampleLists"][1]//div[@class="examples"]/p[2]/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">                    word[<span class="string">'example'</span>].append(dict(en=en.replace(<span class="string">'\"'</span>, <span class="string">'\\"'</span>), zh=zh))</span><br><span class="line">                    <span class="keyword">if</span> len(word[<span class="string">'example'</span>]) &gt;= <span class="number">3</span>:</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">yield</span> word</span><br></pre></td></tr></table></figure><p>æœ€å <code>yield word</code>åˆ™æ˜¯è¿”å›è§£æçš„word ç»™<code>Item Pipeline</code>ï¼Œè¿›è¡Œéšåçš„æ•°æ®è¿‡æ»¤æˆ–è€…å­˜å‚¨ã€‚</p><h2 id="è¿è¡Œçˆ¬è™«-çˆ¬å–å•è¯é‡Šä¹‰"><a href="#è¿è¡Œçˆ¬è™«-çˆ¬å–å•è¯é‡Šä¹‰" class="headerlink" title="è¿è¡Œçˆ¬è™«-çˆ¬å–å•è¯é‡Šä¹‰"></a>è¿è¡Œçˆ¬è™«-çˆ¬å–å•è¯é‡Šä¹‰</h2><p>è¿è¡Œçˆ¬è™«ï¼Œä¼šçˆ¬å–agreeã€prophetã€proportionä¸‰ä¸ªå•è¯çš„è¯¦æƒ…ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆscrapy.cfgæ‰€åœ¨çš„ç›®å½•ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youdaoeng&gt;scrapy crawl EngSpider -o data.json</span><br></pre></td></tr></table></figure></p><p>å³å¯è¿è¡Œï¼Œçª—å£å¯ä»¥çœ‹è§çˆ¬å–çš„æ—¥å¿—å†…å®¹è¾“å‡ºï¼Œè¿è¡Œç»“æŸåä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªdata.jsonæ–‡ä»¶ã€‚<br><img src="/Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/1563334153.jpg" title="å¼€å§‹çˆ¬å–"><br><img src="/Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/1563334228.jpg" title="Itemè¾“å‡º"><br><img src="/Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/1563335067.jpg" title="ç”Ÿæˆçš„data.json"></p><p>ç”Ÿæˆçš„æ•°æ®ä¸ºæ‰€æœ‰itemçš„jsonæ ¼å¼æ•°ç»„ï¼Œä¸­æ–‡å­—ç¬¦éƒ½æ˜¯Unicodeç¼–ç ï¼Œå¯é€šè¿‡ä¸€äº›åœ¨çº¿çš„jsonè§£æç½‘ç«™å¦‚ <a href="https://www.bejson.com/" target="_blank" rel="noopener">https://www.bejson.com/</a> ï¼ŒUnicodeè½¬ä¸­æ–‡æŸ¥çœ‹æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p><h2 id="ä¸‹è½½å•è¯è¯­éŸ³æ–‡ä»¶"><a href="#ä¸‹è½½å•è¯è¯­éŸ³æ–‡ä»¶" class="headerlink" title="ä¸‹è½½å•è¯è¯­éŸ³æ–‡ä»¶"></a>ä¸‹è½½å•è¯è¯­éŸ³æ–‡ä»¶</h2><p>å•è¯è¯»éŸ³çš„mp3é“¾æ¥ä¸ºè§£ææ—¶å€™ä¿å­˜çš„<code>pron_url</code>å­—æ®µï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸‹è½½å•è¯mp3æ–‡ä»¶åˆ°æœ¬åœ°ã€‚<br>åœ¨Itemä¸‹å¢åŠ å±æ€§<code>pron_save_path</code>ï¼Œå­˜å‚¨å‘éŸ³æ–‡ä»¶çš„æœ¬åœ°åœ°å€ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘éŸ³ mp3 æœ¬åœ°å­˜æ”¾è·¯å¾„</span></span><br><span class="line">    pron_save_path = scrapy.Field()</span><br></pre></td></tr></table></figure></p><p>å¹¶åœ¨settings.pyæ–‡ä»¶ä¸­é…ç½®ä¸‹è½½æ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚åœ¨D:\scrapy_files\ç›®å½•ä¸‹ï¼Œåˆ™é…ç½®<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FILES_STORE = <span class="string">"D:\\scrapy_files\\"</span></span><br></pre></td></tr></table></figure></p><p>å¢åŠ ItemPipelineé‡æ–°å‘èµ·æ–‡ä»¶ä¸‹è½½è¯·æ±‚ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mp3Pipeline</span><span class="params">(FilesPipeline)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    è‡ªå®šä¹‰æ–‡ä»¶ä¸‹è½½ç®¡é“</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_media_requests</span><span class="params">(self, item, info)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        æ ¹æ®æ–‡ä»¶çš„urlå‘é€è¯·æ±‚ï¼ˆurlè·Ÿè¿›ï¼‰</span></span><br><span class="line"><span class="string">        :param item:</span></span><br><span class="line"><span class="string">        :param info:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="comment"># metaæºå¸¦çš„æ•°æ®å¯ä»¥åœ¨responseè·å–åˆ°</span></span><br><span class="line">        <span class="keyword">yield</span> scrapy.Request(url=item[<span class="string">'pron_url'</span>], meta=&#123;<span class="string">'item'</span>: item&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">item_completed</span><span class="params">(self, results, item, info)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        å¤„ç†è¯·æ±‚ç»“æœ</span></span><br><span class="line"><span class="string">        :param results:</span></span><br><span class="line"><span class="string">        :param item:</span></span><br><span class="line"><span class="string">        :param info:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        file_paths = [x[<span class="string">'path'</span>] <span class="keyword">for</span> ok, x <span class="keyword">in</span> results <span class="keyword">if</span> ok]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> file_paths:</span><br><span class="line">            <span class="keyword">raise</span> DropItem(<span class="string">"Item contains no files"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># old_name = FILES_STORE + file_paths[0]</span></span><br><span class="line">        <span class="comment"># new_name = FILES_STORE + item['word'] + '.mp3'</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ–‡ä»¶é‡å‘½å ï¼ˆç›¸å½“äºå‰ªåˆ‡ï¼‰</span></span><br><span class="line">        <span class="comment"># os.rename(old_name, new_name)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># item['pron_save_path'] = new_name</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿”å›çš„resultæ˜¯é™¤å»FILES_STOREçš„ç›®å½•</span></span><br><span class="line">        item[<span class="string">'pron_save_path'</span>] = FILES_STORE + file_paths[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">file_path</span><span class="params">(self, request, response=None, info=None)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        è‡ªå®šä¹‰æ–‡ä»¶ä¿å­˜è·¯å¾„</span></span><br><span class="line"><span class="string">        é»˜è®¤çš„ä¿å­˜è·¯å¾„æ˜¯åœ¨FILES_STOREä¸‹åˆ›å»ºçš„ä¸€ä¸ªfullæ¥å­˜æ”¾ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ç›´æ¥åœ¨FILES_STOREä¸‹å­˜æ”¾ï¼Œåˆ™éœ€è¦è‡ªå®šä¹‰å­˜æ”¾è·¯å¾„ã€‚</span></span><br><span class="line"><span class="string">        é»˜è®¤ä¸‹è½½çš„æ˜¯æ— åç¼€çš„æ–‡ä»¶ï¼Œéœ€è¦å¢åŠ .mp3åç¼€</span></span><br><span class="line"><span class="string">        :param request:</span></span><br><span class="line"><span class="string">        :param response:</span></span><br><span class="line"><span class="string">        :param info:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        file_name = request.meta[<span class="string">'item'</span>][<span class="string">'word'</span>] + <span class="string">".mp3"</span></span><br><span class="line">        <span class="keyword">return</span> file_name</span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ›´æ”¹settings.pyæ–‡ä»¶ï¼Œé…ç½®Mp3Pipelineï¼Œåé¢çš„300ä¸ºä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Configure item pipelines</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">    <span class="comment"># 'youdaoeng.pipelines.YoudaoengPipeline': 300,</span></span><br><span class="line">    <span class="string">'youdaoeng.pipelines.Mp3Pipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">youdaoeng&gt;scrapy crawl EngSpider -o data1.json</span><br></pre></td></tr></table></figure></p><p>ç­‰å¾…è¿è¡Œå®Œæˆï¼Œåˆ™åœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆäº†data1.jsonï¼Œå¹¶åœ¨D:\scrapy_files\ç›®å½•ä¸‹ç”Ÿæˆäº†æˆ‘ä»¬çˆ¬å–çš„ä¸‰ä¸ªå•è¯çš„é‡Šä¹‰ã€‚</p><p><a href="https://github.com/luohongxfb/Example_Spiders/tree/master/youdaoeng" target="_blank" rel="noopener">é¡¹ç›®æºç </a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ç†Ÿæ‚‰Scrapyæ¡†æ¶åï¼Œæˆ‘ä»¬æ‰‹å†™ç¬¬ä¸€ä¸ªçˆ¬è™«ï¼Œçˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯å‘éŸ³ï¼Œå‘éŸ³æ–‡ä»¶é“¾æ¥ï¼Œé‡Šä¹‰ï¼Œä¾‹å¥ã€‚&lt;/p&gt;
&lt;p id=&quot;div-border-left-yellow&quot;&gt;éœ€è¦å…ˆç†Ÿæ‚‰Scrapyæ¡†æ¶çš„åŒå­¦ï¼š&lt;a href=&quot;../../Scrapyè¯¦è§£-çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼/&quot;&gt;ç‚¹å‡»å­¦ä¹ &lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¦‚å•è¯&lt;code&gt;proportion&lt;/code&gt;ï¼šæœ‰é“ç¿»è¯‘çš„è¯¦æƒ…è¿æ¥ä¸º &lt;a href=&quot;http://dict.youdao.com/w/eng/proportion&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://dict.youdao.com/w/eng/proportion&lt;/a&gt; ã€‚æœ¬ç¯‡æ–‡ç« çˆ¬å–çš„å†…å®¹ç»“æœï¼š&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;example&quot;&lt;/span&gt;: [&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;en&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;I seemed to have lost all sense of proportion.&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;attr&quot;&gt;&quot;zh&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;æˆ‘å¥½è±¡å·²ç»ä¸§å¤±äº†æœ‰å…³æ¯”ä¾‹çš„ä¸€åˆ‡æ„Ÿè§‰ã€‚&quot;&lt;/span&gt;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;en&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;The price of this article is out of(all) proportion to its value.&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;attr&quot;&gt;&quot;zh&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;è¿™ä¸ªå•†å“çš„ä»·æ ¼ä¸å®ƒçš„ä»·å€¼å®Œå…¨ä¸æˆæ¯”ä¾‹ã€‚&quot;&lt;/span&gt;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;en&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;But, the use of interception bases on the violation of the citizen rights, so it should be satisfactory of the principle of legal reservation and the principle of proportion.&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;attr&quot;&gt;&quot;zh&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ä½†æ˜¯ï¼Œç›‘å¬çš„é€‚ç”¨æ˜¯ä»¥ä¾µå®³å…¬æ°‘æƒåˆ©ä¸ºå‰æçš„ï¼Œå› æ­¤ç›‘å¬åœ¨åˆ‘äº‹ä¾¦æŸ¥ä¸­çš„è¿ç”¨å¿…é¡»æ»¡è¶³æ³•å¾‹ä¿ç•™åŸåˆ™å’Œæ¯”ä¾‹åŸåˆ™çš„è¦æ±‚ã€‚&quot;&lt;/span&gt;&amp;#125;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;attr&quot;&gt;&quot;explain&quot;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&quot;n. æ¯”ä¾‹ï¼Œå æ¯”ï¼›éƒ¨åˆ†ï¼›é¢ç§¯ï¼›å‡è¡¡&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;vt. ä½¿æˆæ¯”ä¾‹ï¼›ä½¿å‡è¡¡ï¼›åˆ†æ‘Š&quot;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;attr&quot;&gt;&quot;pron&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;[prÉ™&#39;pÉ”ËÊƒ(É™)n]&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;attr&quot;&gt;&quot;pron_url&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;http://dict.youdao.com/dictvoice?audio=proportion&amp;amp;type=1&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;attr&quot;&gt;&quot;word&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;proportion&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Scrapy" scheme="https://sunflowercoder.com/categories/Scrapy/"/>
    
    
  </entry>
  
  <entry>
    <title>Scrapy çˆ¬å–ä¸ƒéº¦ appæ•°æ®æ’è¡Œæ¦œ</title>
    <link href="https://sunflowercoder.com/Scrapy-%E7%88%AC%E5%8F%96%E4%B8%83%E9%BA%A6-app%E6%95%B0%E6%8D%AE%E6%8E%92%E8%A1%8C%E6%A6%9C/"/>
    <id>https://sunflowercoder.com/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/</id>
    <published>2019-07-16T09:38:04.000Z</published>
    <updated>2019-08-07T03:34:49.579Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç†Ÿæ‚‰Scrapyä¹‹åï¼Œæœ¬ç¯‡æ–‡ç« å¸¦å¤§å®¶çˆ¬å–ä¸ƒéº¦æ•°æ®ï¼ˆ<a href="https://www.qimai.cn/rank" target="_blank" rel="noopener">https://www.qimai.cn/rank</a> ï¼‰çš„ios appstoreä»˜è´¹åº”ç”¨æ’è¡Œæ¦œå‰100ååº”ç”¨ã€‚</p><p>çˆ¬å–å†…å®¹åŒ…æ‹¬appåœ¨åˆ—è¡¨ä¸­çš„ä¸‹æ ‡ï¼Œappå›¾æ ‡åœ°å€ï¼Œappçš„åç§°ä¿¡æ¯ï¼Œappçš„ç±»å‹ï¼Œåœ¨åˆ†ç±»ä¸­çš„æ’è¡Œï¼Œå¼€å‘è€…ï¼Œè¯¦æƒ…ç­‰ã€‚</p><p>è€ƒè™‘çš„é—®é¢˜ï¼š</p><ul><li>Forbidden by robots.txtçš„é”™è¯¯</li><li>ç½‘é¡µè¿”å›403</li><li>é¡µé¢é€šè¿‡åŠ¨æ€æ¸²æŸ“ï¼Œæ™®é€šçš„è¯·æ±‚urlï¼Œåœ¨é¡µé¢æ¸²æŸ“ä¹‹å‰å·²ç»è¿”å›responseï¼Œè§£ææ²¡æœ‰æ•°æ®</li><li>åˆ—è¡¨ä¸€é¡µ20ä¸ªappï¼Œæƒ³è¦æ‹¿åˆ°å‰100ä¸ªéœ€è¦ç¿»é¡µï¼Œä½†æ˜¯ç¿»é¡µæ²¡æœ‰æ›´æ”¹urlï¼Œè€Œæ˜¯é€šè¿‡jsåŠ¨æ€åŠ è½½</li><li>â€¦</li></ul><p id="div-border-left-yellow">éœ€è¦å…ˆç†Ÿæ‚‰Scrapyæ¡†æ¶çš„åŒå­¦ï¼š<a href="../../Scrapyè¯¦è§£-çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼/">ç‚¹å‡»å­¦ä¹ </a></p><a id="more"></a><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563269958.jpg" title="ä¸ƒéº¦æ•°æ®"><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>åœ¨éœ€è¦æ”¾ç½®é¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; scrapy startproject qimairank</span><br></pre></td></tr></table></figure></p><p>å›è½¦å³å¯åˆ›å»ºé»˜è®¤çš„Scrapyé¡¹ç›®æ¶æ„ã€‚</p><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563271101.jpg" title="qimairank é¡¹ç›®ç›®å½•"><h2 id="åˆ›å»ºItem"><a href="#åˆ›å»ºItem" class="headerlink" title="åˆ›å»ºItem"></a>åˆ›å»ºItem</h2><p>åˆ›å»ºItemæ¥å­˜å‚¨æˆ‘ä»¬çˆ¬å–çš„appåœ¨åˆ—è¡¨ä¸­çš„ä¸‹æ ‡ï¼Œappå›¾æ ‡åœ°å€ï¼Œappçš„åç§°ä¿¡æ¯ï¼Œappçš„ç±»å‹ï¼Œåœ¨åˆ†ç±»ä¸­çš„æ’è¡Œï¼Œå¼€å‘è€…ï¼Œè¯¦æƒ…ã€‚<br>ä¿®æ”¹<code>items.py</code>ï¼Œåœ¨ä¸‹é¢å¢åŠ <br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RankItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># ä¸‹æ ‡</span></span><br><span class="line">    index = scrapy.Field()</span><br><span class="line">    <span class="comment"># å›¾æ ‡åœ°å€</span></span><br><span class="line">    src = scrapy.Field()</span><br><span class="line">    <span class="comment"># appæ ‡é¢˜ä¿¡æ¯</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    <span class="comment"># appç±»å‹</span></span><br><span class="line">    type = scrapy.Field()</span><br><span class="line">    <span class="comment"># åˆ†ç±»ä¸­çš„æ’è¡Œ</span></span><br><span class="line">    type_rank = scrapy.Field()</span><br><span class="line">    <span class="comment"># å¼€å‘è€…</span></span><br><span class="line">    company = scrapy.Field()</span><br><span class="line">    <span class="comment"># è¯¦æƒ…ä¿¡æ¯</span></span><br><span class="line">    info = scrapy.Field()</span><br></pre></td></tr></table></figure></p><h2 id="åˆ›å»ºSpider"><a href="#åˆ›å»ºSpider" class="headerlink" title="åˆ›å»ºSpider"></a>åˆ›å»ºSpider</h2><p>åœ¨<code>spiders</code>ç›®å½•ä¸‹åˆ›å»º<code>RankSpider.py</code>ï¼Œå¹¶åˆ›å»º<code>class RankSpider</code>ï¼Œç»§æ‰¿äºscrapy.Spiderã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RankSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"RankSpider"</span></span><br><span class="line">    start_urls = [<span class="string">"https://www.qimai.cn/rank"</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">       <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p><ul><li><code>name</code>ï¼šç”¨äºåŒºåˆ«Spiderï¼Œè¯¥åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</li><li><code>start_urls</code>ï¼šSpideråœ¨å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„urlåˆ—è¡¨ï¼Œé¦–å…ˆä¼šçˆ¬å–ç¬¬ä¸€ä¸ªã€‚</li><li><code>def parse(self, response)</code>ï¼šå¾—åˆ°urlçš„responseä¿¡æ¯åçš„è§£ææ–¹æ³•ã€‚</li></ul><h2 id="è§£æä»˜è´¹æ¦œ"><a href="#è§£æä»˜è´¹æ¦œ" class="headerlink" title="è§£æä»˜è´¹æ¦œ"></a>è§£æä»˜è´¹æ¦œ</h2><p>è§£æç”¨çš„Selectorsé€‰æ‹©å™¨æœ‰å¤šç§æ–¹æ³•ï¼š</p><ul><li>xpath(): ä¼ å…¥xpathè¡¨è¾¾å¼ï¼Œè¿”å›è¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨ ã€‚</li><li>css(): ä¼ å…¥CSSè¡¨è¾¾å¼ï¼Œè¿”å›è¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨.</li><li>extract(): åºåˆ—åŒ–è¯¥èŠ‚ç‚¹ä¸ºunicodeå­—ç¬¦ä¸²å¹¶è¿”å›listã€‚</li><li>re(): æ ¹æ®ä¼ å…¥çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œè¿”å›unicodeå­—ç¬¦ä¸²liståˆ—è¡¨ã€‚</li></ul><p>ä¸‹é¢æˆ‘ä»¬ç”¨xpath()é€‰æ‹©èŠ‚ç‚¹ï¼Œxpathçš„è¯­æ³•å¯å‚è€ƒw3cçš„<a href="http://www.w3school.com.cn/xpath/xpath_nodes.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/xpath/xpath_nodes.asp</a> å­¦ä¹ ï¼Œéœ€è¦ç†Ÿæ‚‰è¯­æ³•ã€è¿ç®—ç¬¦ã€å‡½æ•°ç­‰ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    base = response.xpath(</span><br><span class="line">        <span class="string">"//div[@class='ivu-row rank-all-item']/div[@class='ivu-col ivu-col-span-8'][2]//ul/li[@class='child-item']/div[@class='ivu-row']"</span>)</span><br><span class="line">    <span class="keyword">for</span> box <span class="keyword">in</span> base:</span><br><span class="line">        <span class="comment"># åˆ›å»ºå®ä¾‹</span></span><br><span class="line">        rankItem = RankItem()</span><br><span class="line">        <span class="comment"># ä¸‹æ ‡</span></span><br><span class="line">        rankItem[<span class="string">'index'</span>] = \</span><br><span class="line">            box.xpath(<span class="string">".//div[@class='ivu-col ivu-col-span-3 left-item']/span/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># å›¾æ ‡åœ°å€</span></span><br><span class="line">        rankItem[<span class="string">'src'</span>] = box.xpath(<span class="string">".//img/@src"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># appåç§°ä¿¡æ¯</span></span><br><span class="line">        rankItem[<span class="string">'title'</span>] = box.xpath(<span class="string">".//div[@class='info-content']//a/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># appç±»å‹</span></span><br><span class="line">        rankItem[<span class="string">'type'</span>] = box.xpath(<span class="string">".//div[@class='info-content']//p[@class='small-txt']/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># åˆ†ç±»ä¸­çš„æ’è¡Œ</span></span><br><span class="line">        rankItem[<span class="string">'type_rank'</span>] = box.xpath(</span><br><span class="line">            <span class="string">".//div[@class='info-content']//p[@class='small-txt']//span[@class='rank-item']/text()"</span>).extract()[</span><br><span class="line">            <span class="number">0</span>]</span><br><span class="line">        <span class="comment"># å¼€å‘è€…</span></span><br><span class="line">        rankItem[<span class="string">'company'</span>] = box.xpath(</span><br><span class="line">            <span class="string">".//div[@class='info-content']//p[@class='small-txt']//span[@class='company-item']/text()"</span>).extract()[</span><br><span class="line">            <span class="number">0</span>]</span><br><span class="line">        <span class="comment"># è¯¦æƒ…é¡µåœ°å€</span></span><br><span class="line">        infoUrl = <span class="string">"https://www.qimai.cn"</span> + box.xpath(<span class="string">".//div[@class='info-content']//a/@href"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">yield</span> rankItem</span><br></pre></td></tr></table></figure></p><h2 id="è¿è¡Œçˆ¬å–åˆå§‹appåˆ—è¡¨"><a href="#è¿è¡Œçˆ¬å–åˆå§‹appåˆ—è¡¨" class="headerlink" title="è¿è¡Œçˆ¬å–åˆå§‹appåˆ—è¡¨"></a>è¿è¡Œçˆ¬å–åˆå§‹appåˆ—è¡¨</h2><p>ç›´æ¥è¿è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qimairank&gt;scrapy crawl RankSpider -o data.json</span><br></pre></td></tr></table></figure></p><p>ä½ ä¼šå‘ç°çª—å£æ²¡æœ‰itemè¾“å‡ºï¼Œdata.jsonä¸­ä¹Ÿæ²¡æœ‰æ•°æ®ï¼Œæ˜¯æˆ‘ä»¬å†™é”™äº†å—ï¼Ÿ</p><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563358018.jpg" title="robotsæŠ¥é”™"><p>scrapyé»˜è®¤éµå®ˆrobotåè®®çš„ï¼Œåœ¨è®¿é—®ç½‘å€å‰ä¼šå…ˆè®¿é—®robot.txtæ¥æŸ¥çœ‹è‡ªå·±æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚å¦‚æœç½‘ç«™ä¸å…è®¸è¢«çˆ¬ï¼Œå°±ä¸èƒ½è®¿é—®ã€‚<br>æ€ä¹ˆæ ·ä¸éµå®ˆåè®®å‘¢ï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">settings.py</span><br><span class="line"></span><br><span class="line"># Obey robots.txt rules</span><br><span class="line">ROBOTSTXT_OBEY = False</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è¿è¡Œä»ç„¶å¤±è´¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“åŸå› ï¼š<br><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563358364.jpg" title="HTTP status codeæŠ¥é”™"><br>å› ä¸ºä¸ƒéº¦ç½‘ç«™å¯¹è¯·æ±‚çš„<code>User-Agent</code>åšäº†æ ¡éªŒï¼Œè§£å†³åŠæ³•æ˜¯åœ¨é…ç½®æ–‡ä»¶<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">settings.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable downloader middlewares</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span><br><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="comment">#    'qimairank.middlewares.QimairankDownloaderMiddleware': 543,</span></span><br><span class="line">    <span class="string">'qimairank.middlewares.RandomUserAgent'</span>: <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">USER_AGENTS = [</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20"</span>,</span><br><span class="line">    <span class="string">"Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52"</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>å¹¶åœ¨<code>middlewares.py</code>ä¸­åˆ›å»º<code>RandomUserAgent</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomUserAgent</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    éšæœºè·å–settings.pyä¸­é…ç½®çš„USER_AGENTSè®¾ç½®'User-Agent'</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, agents)</span>:</span></span><br><span class="line">        self.agents = agents</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_crawler</span><span class="params">(cls, crawler)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> cls(crawler.settings.getlist(<span class="string">'USER_AGENTS'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self, request, spider)</span>:</span></span><br><span class="line">        request.headers.setdefault(<span class="string">'User-Agent'</span>, random.choice(self.agents))</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è¿è¡Œï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ï¼Œæ˜¯æˆ‘ä»¬çš„xpathå†™é”™å•¦ï¼Ÿæˆ‘ä»¬åœ¨parseä¸­å¢åŠ è¾“å‡ºbodyçš„ä¿¡æ¯</p><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563428566.jpg" title="bodyä¸ºç©º"><p>å¯ä»¥çœ‹åˆ°bodyä¸ºç©ºï¼Œæ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„åˆ—è¡¨æ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºä¸ƒéº¦æ•°æ®æ˜¯é€šè¿‡jsåŠ¨æ€æ¸²æŸ“çš„ï¼Œåœ¨æ¸²æŸ“å®Œæˆå‰ï¼Œæˆ‘ä»¬çš„responseå·²ç»è¿”å›ï¼Œé‚£ä¹ˆæ€ä¹ˆæ ·æ‰èƒ½ç­‰ä¸€ç­‰å‘€ï¼Œç­‰åˆ°æ¸²æŸ“å®Œæˆæ‰è¿”å›å‘¢ï¼Ÿ</p><p>çˆ¬å–åŠ¨æ€æ¸²æŸ“çš„æ–¹å¼ï¼Œæˆ‘çŸ¥é“æ˜¯é€šè¿‡Splashæˆ–è€…Seleniumï¼Œåƒæˆ‘ä»¬çš„æ¡Œé¢ç‰ˆç³»ç»Ÿå¯ä»¥é€‰æ‹©ç”¨Seleniumï¼Œæ“ä½œå¯ä»¥è®¾ç½®å¯è§†åŒ–ï¼Œæ‰€æœ‰ç•Œé¢æ“ä½œéƒ½èƒ½çœ‹è§ï¼ŒSplashä¾èµ–äºDockerï¼Œæ— ç•Œé¢ã€‚</p><p>å®‰è£…SeleniumåŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨å‰éœ€è¦å®‰è£…é©±åŠ¨ï¼Œ<a href="../../Scrapy-Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™">é…ç½®è¯¦æƒ…ç‚¹å‡»</a></p><p>é©±åŠ¨å®‰è£…å®Œæˆï¼Œåœ¨middlewares.pyä¸­åˆ›å»º SeleniumMiddleware<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SeleniumMiddleware</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.timeout = <span class="number">50</span></span><br><span class="line">        <span class="comment"># 2.Firefox---------------------------------</span></span><br><span class="line">        <span class="comment"># å®ä¾‹åŒ–å‚æ•°å¯¹è±¡</span></span><br><span class="line">        options = webdriver.FirefoxOptions()</span><br><span class="line">        <span class="comment"># æ— ç•Œé¢</span></span><br><span class="line">        <span class="comment"># options.add_argument('--headless')</span></span><br><span class="line">        <span class="comment"># å…³é—­æµè§ˆå™¨å¼¹çª—</span></span><br><span class="line">        options.set_preference(<span class="string">'dom.webnotifications.enabled'</span>, <span class="literal">False</span>)</span><br><span class="line">        options.set_preference(<span class="string">'dom.push.enabled'</span>, <span class="literal">False</span>)</span><br><span class="line">        <span class="comment"># æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">        self.browser = webdriver.Firefox(firefox_options=options)</span><br><span class="line">        <span class="comment"># æŒ‡å®šæµè§ˆå™¨çª—å£å¤§å°</span></span><br><span class="line">        self.browser.set_window_size(<span class="number">1400</span>, <span class="number">700</span>)</span><br><span class="line">        <span class="comment"># è®¾ç½®é¡µé¢åŠ è½½è¶…æ—¶æ—¶é—´</span></span><br><span class="line">        self.browser.set_page_load_timeout(self.timeout)</span><br><span class="line">        self.wait = WebDriverWait(self.browser, self.timeout)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self, request, spider)</span>:</span></span><br><span class="line">        <span class="comment"># å½“è¯·æ±‚çš„é¡µé¢ä¸æ˜¯å½“å‰é¡µé¢æ—¶</span></span><br><span class="line">        <span class="keyword">if</span> self.browser.current_url != request.url:</span><br><span class="line">            <span class="comment"># è·å–é¡µé¢</span></span><br><span class="line">            self.browser.get(request.url)</span><br><span class="line">            time.sleep(<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="comment"># è¿”å›é¡µé¢çš„response</span></span><br><span class="line">        <span class="keyword">return</span> HtmlResponse(url=self.browser.current_url, body=self.browser.page_source,</span><br><span class="line">                            encoding=<span class="string">"utf-8"</span>, request=request)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spider_closed</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># çˆ¬è™«ç»“æŸ å…³é—­çª—å£</span></span><br><span class="line">        self.browser.close()</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_crawler</span><span class="params">(cls, crawler)</span>:</span></span><br><span class="line">        <span class="comment"># è®¾ç½®çˆ¬è™«ç»“æŸçš„å›è°ƒç›‘å¬</span></span><br><span class="line">        s = cls()</span><br><span class="line">        crawler.signals.connect(s.spider_closed, signal=signals.spider_closed)</span><br><span class="line">        <span class="keyword">return</span> s</span><br></pre></td></tr></table></figure></p><p>åœ¨settins.pyä¸­é…ç½®<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Enable or disable downloader middlewares</span></span><br><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="comment">#    'qimairank.middlewares.QimairankDownloaderMiddleware': 543,</span></span><br><span class="line">    <span class="string">'qimairank.middlewares.RandomUserAgent'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'qimairank.middlewares.SeleniumMiddleware'</span>: <span class="number">10</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è¿è¡Œ<code>scrapy crawl RankSpider -o data.json</code>ï¼Œå•¦å•¦å•¦~è¿™å›æœ‰æ•°æ®å•¦ã€‚</p><h2 id="Seleniumè°ƒç”¨JSè„šæœ¬"><a href="#Seleniumè°ƒç”¨JSè„šæœ¬" class="headerlink" title="Seleniumè°ƒç”¨JSè„šæœ¬"></a>Seleniumè°ƒç”¨JSè„šæœ¬</h2><p>è§‚å¯Ÿçˆ¬å–å‡ºæ¥çš„data.jsonï¼Œå‘ç°æ€ä¹ˆè‚¥å››ï¼Œåªæœ‰20æ¡æ•°æ®ï¼Œè€Œä¸”é™¤äº†å‰6ä¸ªçš„appå›¾æ ‡éƒ½æ˜¯ä¸ƒéº¦çš„é»˜è®¤å›¾æ ‡ã€‚</p><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563434696.jpg" title="1563434696.jpg"><p>è¿™æ˜¯å› ä¸ºä¸ƒéº¦æ•°æ®çš„åˆ—è¡¨é»˜è®¤æ¯é¡µ20æ¡ï¼Œè€Œä¸”é»˜è®¤æ¸²æŸ“å‰6ä¸ªçš„å›¾æ ‡ï¼Œå…¶ä½™çš„é¡µéœ€è¦è§¦å‘æ»‘åŠ¨äº‹ä»¶åŠ è½½ï¼Œè€Œä¸”æ»‘åŠ¨åˆ°çš„å›¾æ ‡æ‰å¼€å§‹æ¸²æŸ“ã€‚è¿™æ ·æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦æ»‘åŠ¨åˆ°å¯ä»¥åŠ è½½çš„æŒ‰é’®å°±å¯ä»¥å•¦ï¼Œæ£€æŸ¥å‘ç°åœ¨ä¸‰ä¸ªåˆ—è¡¨çš„å¤–å±‚æ ‡ç­¾æœ‰ä¸€ä¸ªclassä¸ºcm-explain-bottomçš„æ ‡ç­¾<br><img src="/Scrapy-çˆ¬å–ä¸ƒéº¦-appæ•°æ®æ’è¡Œæ¦œ/1563442615.jpg" title="1563442615.jpg"><br>æˆ‘ä»¬ç”¨Seleniumè°ƒç”¨jsè„šæœ¬ï¼Œæ»‘åŠ¨åˆ°è¿™ä¸ªæ ‡ç­¾å°±å¯ä»¥å•¦ï¼Œåœ¨ä¸­é—´ä»¶process_requestæ–¹æ³•æ›´æ”¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self, request, spider)</span>:</span></span><br><span class="line">    <span class="comment"># å½“è¯·æ±‚çš„é¡µé¢ä¸æ˜¯å½“å‰é¡µé¢æ—¶</span></span><br><span class="line">    <span class="keyword">if</span> self.browser.current_url != request.url:</span><br><span class="line">        <span class="comment"># è·å–é¡µé¢</span></span><br><span class="line">        self.browser.get(request.url)</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        <span class="comment"># è¯·æ±‚çš„urlå¼€å§‹ä¸ºhttps://www.qimai.cn/rank/æ—¶ï¼Œè°ƒç”¨æ»‘åŠ¨ç•Œé¢ï¼Œæ¯é¡µ20ä¸ªï¼Œæ»‘åŠ¨4æ¬¡</span></span><br><span class="line">        <span class="keyword">if</span> request.url.startswith(<span class="string">"https://www.qimai.cn/rank"</span>):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>):</span><br><span class="line">                    self.browser.execute_script(</span><br><span class="line">                        <span class="string">"document.getElementsByClassName('cm-explain-bottom')[0].scrollIntoView(true)"</span>)</span><br><span class="line">                    time.sleep(<span class="number">4</span>)</span><br><span class="line">            <span class="keyword">except</span> JavascriptException <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p><p>å†æ¬¡æ‰§è¡Œ<code>scrapy crawl RankSpider -o data1.json</code>ï¼Œåˆ™å¯çœ‹è§å·²ç»ç”Ÿæˆdata1.jsoné‡Œé¢æœ‰100ä¸ªitemã€‚</p><h2 id="è·å–appè¯¦æƒ…"><a href="#è·å–appè¯¦æƒ…" class="headerlink" title="è·å–appè¯¦æƒ…"></a>è·å–appè¯¦æƒ…</h2><p>è¯¦æƒ…é¡µéœ€è¦è·Ÿè¿›urlï¼Œæˆ‘ä»¬åœ¨RankSpider#parseæ–¹æ³•ä¸­ï¼Œä¸ç”¨yield Itemï¼Œè€Œæ˜¯yield Requestå°±å¯ä»¥è·Ÿè¿›ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯¦æƒ…é¡µåœ°å€</span></span><br><span class="line">infoUrl = <span class="string">"https://www.qimai.cn"</span> + box.xpath(<span class="string">".//div[@class='info-content']//a/@href"</span>).extract()[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># yield rankItem</span></span><br><span class="line"><span class="keyword">yield</span> Request(infoUrl.replace(<span class="string">"rank"</span>, <span class="string">"baseinfo"</span>), self.parseInfo,</span><br><span class="line">              meta=&#123;<span class="string">'rankItem'</span>: dict(rankItem).copy()&#125;, dont_filter=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></p><p>è§£æçš„infoUrlæ›¿æ¢â€rankâ€å­—ç¬¦ä¸²ä¸ºâ€baseinfoâ€å°±å¯ä»¥è®¿é—®appåº”ç”¨ä¿¡æ¯é¡µï¼Œç”¨metaä¼ é€’itemåˆ°ä¸‹ä¸€ä¸ªè§£ææ–¹æ³•ä¸­ï¼Œç”¨è½¯æ‹·è´çš„æ–¹å¼ï¼Œé¿å…Itemå› ä¸ºåœ°å€ç›¸åŒï¼Œå†…å®¹è¦†ç›–ã€‚</p><p>self.parseInfoä¸ºæŒ‡å®šè¿™æ¬¡è¯·æ±‚çš„è§£ææ–¹æ³•ï¼Œ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parseInfo</span><span class="params">(self, response)</span>:</span></span><br><span class="line">    print(<span class="string">"åŸºåœ°å€ï¼š"</span> + response.url)</span><br><span class="line">    <span class="keyword">if</span> response.status != <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    rankItem = response.meta[<span class="string">'rankItem'</span>]</span><br><span class="line"></span><br><span class="line">    info = dict()</span><br><span class="line">    base = response.xpath(<span class="string">"//div[@id='app-container']"</span>)</span><br><span class="line">    <span class="keyword">if</span> base.extract():</span><br><span class="line">        <span class="comment"># try:</span></span><br><span class="line">        <span class="comment"># æè¿°</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            info[<span class="string">'desc'</span>] = base.xpath(</span><br><span class="line">                <span class="string">".//div[@class='app-header']//div[@class='app-subtitle']/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(<span class="string">"æ— æè¿°"</span>)</span><br><span class="line">        <span class="comment"># å¼€å‘å•†</span></span><br><span class="line">        info[<span class="string">'auther'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='app-header']//div[@class='auther']//div[@class='value']/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># åˆ†ç±»</span></span><br><span class="line">        info[<span class="string">'classify'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='app-header']//div[@class='genre']//div[@class='value']/a/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># appid</span></span><br><span class="line">        info[<span class="string">'appid'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='app-header']//div[@class='appid']//div[@class='value']/a/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># appstoreåœ°å€</span></span><br><span class="line">        info[<span class="string">'appstorelink'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='app-header']//div[@class='appid']//div[@class='value']/a/@href"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># ä»·æ ¼</span></span><br><span class="line">        info[<span class="string">'price'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='app-header']//div[@class='price']//div[@class='value']/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">        info[<span class="string">'version'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='app-header']//div[@class='version']//div[@class='value']/text()"</span>).extract()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># åº”ç”¨æˆªå›¾</span></span><br><span class="line">        info[<span class="string">'screenshot'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='router-wrapper']//div[@class='app-screenshot']//div[@class='screenshot-box']//img/@src"</span>).extract()</span><br><span class="line">        <span class="comment"># åº”ç”¨æè¿°</span></span><br><span class="line">        info[<span class="string">'desc'</span>] = base.xpath(</span><br><span class="line">            <span class="string">".//div[@class='router-wrapper']//div[@class='app-describe']//div[@class='description']"</span>).extract()[</span><br><span class="line">            <span class="number">0</span>]</span><br><span class="line">        <span class="comment"># åº”ç”¨åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">        info[<span class="string">'baseinfo'</span>] = []</span><br><span class="line">        <span class="keyword">for</span> infoBase <span class="keyword">in</span> base.xpath(</span><br><span class="line">                <span class="string">".//div[@class='router-wrapper']//div[@class='app-baseinfo']//ul[@class='baseinfo-list']/li"</span>):</span><br><span class="line">            <span class="comment"># print(info['baseinfo'])</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                info[<span class="string">'baseinfo'</span>].append(dict(type=infoBase.xpath(<span class="string">".//*[@class='type']/text()"</span>).extract()[<span class="number">0</span>],</span><br><span class="line">                                             info=infoBase.xpath(<span class="string">".//*[@class='info-txt']/text()"</span>).extract()[<span class="number">0</span>]))</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">        rankItem[<span class="string">'info'</span>] = info</span><br><span class="line">        <span class="comment"># æ›¿æ¢å›¾æ ‡ åˆ—è¡¨åŠ è½½ä¸ºé»˜è®¤å›¾æ ‡</span></span><br><span class="line">        rankItem[<span class="string">'src'</span>] = \</span><br><span class="line">            response.xpath(<span class="string">"//*[@id='app-side-bar']//div[@class='logo-wrap']/img/@src"</span>).extract()[</span><br><span class="line">                <span class="number">0</span>]</span><br><span class="line">        <span class="keyword">yield</span> rankItem</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡æ‰§è¡Œ<code>scrapy crawl RankSpider -o data1.json</code>ï¼Œåˆ™å¯çœ‹è§å·²ç»ç”Ÿæˆdata2.jsonï¼Œä½†æ˜¯ç”Ÿæˆçš„åˆ—è¡¨ä¸æ˜¯æ’è¡Œçš„åˆ—è¡¨ï¼Œç”šè‡³æ˜¯ä¹±åºçš„ï¼ŒåŸå› æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†urlè·Ÿè¿›è¿”å›ï¼Œæ¯ä¸ªé¡µé¢çš„è¯·æ±‚è¿”å›çš„é€Ÿåº¦ä¸ä¸€æ ·ï¼Œéœ€è¦æ’åºçš„è¯å°±å†™ä¸ªå°è„šæœ¬æŒ‰ç…§indexæ’ä¸ªåºã€‚</p><p><a href="https://github.com/luohongxfb/Example_Spiders/tree/master/qimairank" target="_blank" rel="noopener">é¡¹ç›®æºç </a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ç†Ÿæ‚‰Scrapyä¹‹åï¼Œæœ¬ç¯‡æ–‡ç« å¸¦å¤§å®¶çˆ¬å–ä¸ƒéº¦æ•°æ®ï¼ˆ&lt;a href=&quot;https://www.qimai.cn/rank&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.qimai.cn/rank&lt;/a&gt; ï¼‰çš„ios appstoreä»˜è´¹åº”ç”¨æ’è¡Œæ¦œå‰100ååº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;çˆ¬å–å†…å®¹åŒ…æ‹¬appåœ¨åˆ—è¡¨ä¸­çš„ä¸‹æ ‡ï¼Œappå›¾æ ‡åœ°å€ï¼Œappçš„åç§°ä¿¡æ¯ï¼Œappçš„ç±»å‹ï¼Œåœ¨åˆ†ç±»ä¸­çš„æ’è¡Œï¼Œå¼€å‘è€…ï¼Œè¯¦æƒ…ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Forbidden by robots.txtçš„é”™è¯¯&lt;/li&gt;
&lt;li&gt;ç½‘é¡µè¿”å›403&lt;/li&gt;
&lt;li&gt;é¡µé¢é€šè¿‡åŠ¨æ€æ¸²æŸ“ï¼Œæ™®é€šçš„è¯·æ±‚urlï¼Œåœ¨é¡µé¢æ¸²æŸ“ä¹‹å‰å·²ç»è¿”å›responseï¼Œè§£ææ²¡æœ‰æ•°æ®&lt;/li&gt;
&lt;li&gt;åˆ—è¡¨ä¸€é¡µ20ä¸ªappï¼Œæƒ³è¦æ‹¿åˆ°å‰100ä¸ªéœ€è¦ç¿»é¡µï¼Œä½†æ˜¯ç¿»é¡µæ²¡æœ‰æ›´æ”¹urlï¼Œè€Œæ˜¯é€šè¿‡jsåŠ¨æ€åŠ è½½&lt;/li&gt;
&lt;li&gt;â€¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p id=&quot;div-border-left-yellow&quot;&gt;éœ€è¦å…ˆç†Ÿæ‚‰Scrapyæ¡†æ¶çš„åŒå­¦ï¼š&lt;a href=&quot;../../Scrapyè¯¦è§£-çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼/&quot;&gt;ç‚¹å‡»å­¦ä¹ &lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Scrapy" scheme="https://sunflowercoder.com/categories/Scrapy/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo--ç¬¬äºŒå¼¹</title>
    <link href="https://sunflowercoder.com/Hexo-%E7%AC%AC%E4%BA%8C%E5%BC%B9/"/>
    <id>https://sunflowercoder.com/Hexo-ç¬¬äºŒå¼¹/</id>
    <published>2019-07-10T08:00:09.000Z</published>
    <updated>2019-07-15T10:02:48.486Z</updated>
    
    <content type="html"><![CDATA[<p><strong>ç›®å½•</strong></p><ul><li><a href="#Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾">1. Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾</a></li><li><a href="#Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶">2. Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶</a></li><li><a href="#Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ">3. Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ</a></li></ul><h2 id="Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾"><a href="#Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾" class="headerlink" title="Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾"></a>Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾</h2><p>ç”»æµç¨‹å›¾è¿˜éœ€è¦ç”¨åˆ«çš„ç¼–è¾‘å™¨ç”»äº†ç”¨å›¾ç‰‡å¯¼å…¥ï¼ŸHexoå®ç°æ‰‹å†™æµç¨‹å›¾ä¹Ÿå¾ˆç®€å•å“¦ï¼Œä½†æ˜¯æœ‰ä¸ªå°å‘ï¼Œå°ç¼–è¢«å‘äº†å¥½ä¹…ï¼Œæ¥ä¸‹æ¥æ‰‹æŠŠæ‰‹ğŸ‘‡å¸¦ä½ ä»¬è¿‡å‘ã€‚</p><p>markdownè¯­æ³•å®ç°æµç¨‹å›¾çš„æ–¹å¼å¯ä»¥é€šè¿‡mermaidæˆ–flowchartï¼Œæ—¶åºå›¾åˆ™å¯ä»¥mermaidæˆ–sequenceï¼Œä½†æ˜¯é»˜è®¤æ˜¯ä¸ä¼šè¯†åˆ«è¯­æ³•çš„ï¼Œåªæ˜¯å½“åšæ™®é€šçš„å¤šè¡Œä»£ç ï¼Œéœ€è¦å®‰è£…æ’ä»¶ã€‚</p><a id="more"></a>  <h3 id="æ–¹å¼ä¸€ï¼šmermaid"><a href="#æ–¹å¼ä¸€ï¼šmermaid" class="headerlink" title="æ–¹å¼ä¸€ï¼šmermaid"></a>æ–¹å¼ä¸€ï¼šmermaid</h3><p>æ”¯æŒæµç¨‹å›¾ï¼ˆgraphï¼‰ã€æ—¶åºå›¾ï¼ˆsequenceDiagramï¼‰ã€ç”˜ç‰¹å›¾ï¼ˆganttï¼‰ï¼Œå¯ä»¥è¯´æ”¯æŒå¾ˆå¤šäº†ã€‚é…ç½®æ•™æ–¹å¼äºŒéº»çƒ¦ä¸€ç‚¹ã€‚</p><p id="div-border-left-yellow">åœ¨çº¿ç¼–è¾‘å™¨åœ°å€ï¼š<a href="https://mermaidjs.github.io/mermaid-live-editor/" target="_blank" rel="noopener">https://mermaidjs.github.io/mermaid-live-editor/</a> ï¼Œå¯ä»¥åˆ©ç”¨åœ¨çº¿ç¼–è¾‘å™¨ç¼–è¾‘å®Œæµç¨‹å›¾ä¹‹åï¼Œä¸‹è½½SVGæˆ–è€…ç›´æ¥linkã€‚</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>å®˜æ–¹è¯´çš„æ˜¯é€šè¿‡yarnå®‰è£…ï¼ˆå¦‚æœæ²¡æœ‰å®‰è£…yarnï¼Œä½¿ç”¨<code>npm install -g yarn</code>å®‰è£…ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add hexo-filter-mermaid-diagrams</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨npmï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo-filter-mermaid-diagrams</span><br></pre></td></tr></table></figure></p><p><a href="https://www.npmjs.com/package/hexo-filter-mermaid-diagrams" target="_blank" rel="noopener">æ’ä»¶çš„å®˜æ–¹ç½‘å€</a></p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>ï¼ˆ1ï¼‰ä¿®æ”¹<span id="inline-green">ç«™ç‚¹é…ç½®æ–‡ä»¶_config.yml</span><br>åœ¨æœ€ååŠ å…¥<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mermaid chart </span></span><br><span class="line"><span class="attr">mermaid:</span> <span class="comment">## mermaid url https://github.com/knsv/mermaid </span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span>  <span class="comment"># default true </span></span><br><span class="line"><span class="attr">  version:</span> <span class="string">"7.1.2"</span> <span class="comment"># default v7.1.2 </span></span><br><span class="line"><span class="attr">  options:</span>  <span class="comment"># find more api options from https://github.com/knsv/mermaid/blob/master/src/mermaidAPI.js </span></span><br><span class="line">    <span class="comment">#startOnload: true  // default true</span></span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰Nextä¸»é¢˜æ›´æ”¹ï¼šåœ¨themes/next/_partials/footer.swig æœ€ååŠ å…¥<br><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="keyword">if</span></span> theme.mermaid.enable %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'https://unpkg.com/mermaid@</span></span></span><span class="template-variable">&#123;&#123; theme.mermaid.version &#125;&#125;</span><span class="xml"><span class="tag"><span class="string">/dist/mermaid.min.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></span><br><span class="line"><span class="xml">    if (window.mermaid) &#123;</span></span><br><span class="line"><span class="xml">      mermaid.initialize(&#123;theme: 'default'&#125;);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="keyword">endif</span></span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure></p><p>ä¸»é¢˜å¯æ›´æ”¹ï¼ŒåŒ…å« default | forest</p><p>é‡æ–°<code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debug</code>å¯åŠ¨æ¸²æŸ“ä¹Ÿç”Ÿæ•ˆäº†ã€‚</p><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p><strong>1. æµç¨‹å›¾ç¤ºä¾‹</strong></p><blockquote><p>```mermaid<br>graph TB<br>    start(å¼€å§‹)â€“&gt;inputA[è¾“å…¥ç”¨æˆ·åå¯†ç ]<br>    inputAâ€“&gt;opA{æ•°æ®åº“æŸ¥è¯¢å­ç±»}<br>    opAâ€“&gt;conditionA{æ˜¯å¦æœ‰æ­¤ç”¨æˆ·}<br>    conditionAâ€“yesâ€“&gt;conditionB{å¯†ç æ˜¯å¦æ­£ç¡®}<br>    conditionAâ€“noâ€“&gt;inputA<br>    conditionBâ€“yesâ€“&gt;opB[è¯»å…¥ç”¨æˆ·ä¿¡æ¯]<br>    conditionBâ€“noâ€“&gt;inputA<br>    opBâ€“&gt;en(ç™»å½•)<br> ```</p></blockquote><p>mermaidæµç¨‹å›¾å±•ç¤ºï¼š</p><pre class="mermaid">graph TB    start(å¼€å§‹)-->inputA[è¾“å…¥ç”¨æˆ·åå¯†ç ]    inputA-->opA{æ•°æ®åº“æŸ¥è¯¢å­ç±»}    opA-->conditionA{æ˜¯å¦æœ‰æ­¤ç”¨æˆ·}    conditionA--yes-->conditionB{å¯†ç æ˜¯å¦æ­£ç¡®}    conditionA--no-->inputA    conditionB--yes-->opB[è¯»å…¥ç”¨æˆ·ä¿¡æ¯]    conditionB--no-->inputA    opB-->en(ç™»å½•)</pre><p><strong>2. æ—¶åºå›¾ç¤ºä¾‹</strong></p><blockquote><p>```mermaid<br>sequenceDiagram<br>participant Client<br>participant Server</p><p>Note left of Client:SYN_SENT<br>Client-&gt;Server:SYN=1 seq=x<br>Note right of Server:SYN_RCVD<br>Server-&gt;Client:SYN=1 seq=y ACK=x+1<br>Note left of Client:ESTABLISHED<br>Client-&gt;Server:ACK=y+1<br>Note right of Server:ESTABLISHED<br>```</p></blockquote><p>mermaidæ—¶åºå›¾å±•ç¤ºï¼š</p><pre class="mermaid">sequenceDiagramparticipant Clientparticipant ServerNote left of Client:SYN_SENTClient->Server:SYN=1 seq=xNote right of Server:SYN_RCVDServer->Client:SYN=1 seq=y ACK=x+1Note left of Client:ESTABLISHEDClient->Server:ACK=y+1Note right of Server:ESTABLISHED</pre><h4 id="è¦è¯´çš„è¯"><a href="#è¦è¯´çš„è¯" class="headerlink" title="è¦è¯´çš„è¯"></a>è¦è¯´çš„è¯</h4><p>mermaidå¸®åŠ©æ–‡æ¡£ï¼š<a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">https://mermaidjs.github.io/</a> ï¼Œå¯åœ¨é‡Œé¢æŸ¥çœ‹æ›´å¤šçš„ä½¿ç”¨ä»‹ç»åŠè¯­æ³•ã€‚</p><p><strong>ä¼˜ç‚¹</strong>ï¼šé¢œè‰²é²œè‰³ï¼›è¯­æ³•ç»“æ„ç®€å•ï¼Œä¸éœ€è¦å…ˆå£°æ˜ï¼›æ–¹å‘å¯æŒ‡å®šï¼›çµæ´»ï¼Œå¯ä»¥æ›´æ”¹æ ·å¼ã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼šæ–¹å—æ¨¡å¼æä¾›æ²¡æœ‰æ ‡å‡†æµç¨‹å›¾çš„è§„èŒƒçš„å½¢çŠ¶ï¼Œæ¯”å¦‚è¾“å…¥æ¡†çš„å¹³è¡Œå››è¾¹å½¢æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦è‡ªå®šä¹‰ï¼›åŠ è½½æ¸²æŸ“è¾ƒæ…¢ï¼Œä¼šå‡ºç°å±•ç¤ºå¤šè¡Œä»£ç æ ·å¼ã€‚<br>Â·Â·Â·mermaid<br>graph LR<br>id1&gt;id1]â€“&gt;id2[id2]<br>id2â€”id3(id3)<br>id3â€”|text|id4((id4))<br>id4â€“&gt;|text|id5{id5}</p><p>style id1 fill:#f9f,stroke:#333,stroke-width:4px<br>style id2 fill:#ccf,stroke:#f66,stroke-width:2px,stroke-dasharray: 5, 5<br>Â·Â·Â·</p><pre class="mermaid">graph LRid1>id1]-->id2[id2]id2---id3(id3)id3---|text|id4((id4))id4-->|text|id5{id5}style id1 fill:#f9f,stroke:#333,stroke-width:4pxstyle id2 fill:#ccf,stroke:#f66,stroke-width:2px,stroke-dasharray: 5, 5</pre><p>æ›´å¤šæµç¨‹å›¾ä½¿ç”¨æŸ¥çœ‹ï¼š<a href="https://mermaidjs.github.io/flowchart.html" target="_blank" rel="noopener">https://mermaidjs.github.io/flowchart.html</a></p><p>æµç¨‹å›¾è¿‡é•¿ä¼šå ç”¨ç•Œé¢å¤§éƒ¨åˆ†ç©ºé—´ï¼Œåšå®¢ä¸­è®¾ç½®äº†æœ€å¤§é«˜åº¦ï¼ŒåŠå±…ä¸­å±•ç¤ºï¼Œåœ¨themes/next/source/css/_custom/custom.stylä¸‹é¢åŠ å…¥<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*mermaidå›¾å±…ä¸­*/</span></span><br><span class="line"><span class="selector-class">.mermaid</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ–¹å¼äºŒï¼šflowchart-sequence"><a href="#æ–¹å¼äºŒï¼šflowchart-sequence" class="headerlink" title="æ–¹å¼äºŒï¼šflowchart+sequence"></a>æ–¹å¼äºŒï¼šflowchart+sequence</h3><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>æ”¯æŒæµç¨‹å›¾ï¼Œå®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save hexo-filter-flowchart</span><br></pre></td></tr></table></figure></p><p>æ”¯æŒæ—¶åºå›¾ï¼Œå®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save hexo-filter-sequence</span><br></pre></td></tr></table></figure></p><h4 id="é…ç½®ï¼ˆéå¿…é¡»ï¼‰"><a href="#é…ç½®ï¼ˆéå¿…é¡»ï¼‰" class="headerlink" title="é…ç½®ï¼ˆéå¿…é¡»ï¼‰"></a>é…ç½®ï¼ˆéå¿…é¡»ï¼‰</h4><p>æ’ä»¶å®˜æ–¹åœ°å€ï¼š <a href="https://github.com/bubkoo/hexo-filter-flowchart" target="_blank" rel="noopener">flowchart</a>  <a href="https://github.com/bubkoo/hexo-filter-sequence" target="_blank" rel="noopener">sequence</a></p><p>å®˜æ–¹é…ç½®æåˆ°éœ€è¦æ›´æ”¹<span id="inline-green">ç«™ç‚¹é…ç½®æ–‡ä»¶_config.yml</span>ï¼Œå¢åŠ ï¼š<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flowchart:</span></span><br><span class="line">  <span class="comment"># raphael:   # optional, the source url of raphael.js</span></span><br><span class="line">  <span class="comment"># flowchart: # optional, the source url of flowchart.js</span></span><br><span class="line"><span class="attr">  options:</span> <span class="comment"># options used for `drawSVG`</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">sequence:</span></span><br><span class="line">  <span class="comment"># webfont:     # optional, the source url of webfontloader.js</span></span><br><span class="line">  <span class="comment"># snap:        # optional, the source url of snap.svg.js</span></span><br><span class="line">  <span class="comment"># underscore:  # optional, the source url of underscore.js</span></span><br><span class="line">  <span class="comment"># sequence:    # optional, the source url of sequence-diagram.js</span></span><br><span class="line">  <span class="comment"># css: # optional, the url for css, such as hand drawn theme </span></span><br><span class="line"><span class="attr">  options:</span> </span><br><span class="line"><span class="attr">    theme:</span> </span><br><span class="line"><span class="attr">    css_class:</span></span><br></pre></td></tr></table></figure></p><p>äº²æµ‹ä¸é…ç½®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br><code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debug</code>å¯åŠ¨æ¸²æŸ“ä¹Ÿç”Ÿæ•ˆäº†ã€‚</p><h4 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p><strong>1.æµç¨‹å›¾ç¤ºä¾‹</strong></p><blockquote><p>```flow<br>st=&gt;start: å¼€å§‹<br>inputA=&gt;inputoutput: è¾“å…¥ç”¨æˆ·åå¯†ç <br>opA=&gt;operation: æ•°æ®åº“æŸ¥è¯¢å­ç±»<br>conditionA=&gt;condition: æ˜¯å¦æœ‰æ­¤ç”¨æˆ·<br>conditionB=&gt;condition: å¯†ç æ˜¯å¦æ­£ç¡®<br>opB=&gt;operation: è¯»å…¥ç”¨æˆ·ä¿¡æ¯<br>e=&gt;end: ç™»å½•<br>st-&gt;inputA-&gt;opA-&gt;conditionA<br>conditionA(yes)-&gt;conditionB<br>conditionA(no)-&gt;inputA<br>conditionB(yes)-&gt;opB-&gt;e<br>conditionB(no)-&gt;inputA<br>```</p></blockquote><p>flowchartæµç¨‹å›¾å±•ç¤ºï¼š</p><div id="flowchart-0" class="flow-chart"></div><p><strong>2.æ—¶åºå›¾ç¤ºä¾‹</strong></p><blockquote><p>```sequence<br>participant Client<br>participant Server</p><p>Note left of Client:SYN_SENT<br>Client-&gt;Server:SYN=1 seq=x<br>Note right of Server:SYN_RCVD<br>Server-&gt;Client:SYN=1 seq=y ACK=x+1<br>Note left of Client:ESTABLISHED<br>Client-&gt;Server:ACK=y+1<br>Note right of Server:ESTABLISHED<br>```</p></blockquote><p>sequenceæ—¶åºå›¾å±•ç¤ºï¼š</p><p><div id="sequence-0" class="sequence"></div></p><h4 id="è¦è¯´çš„è¯-1"><a href="#è¦è¯´çš„è¯-1" class="headerlink" title="è¦è¯´çš„è¯"></a>è¦è¯´çš„è¯</h4><p><strong>ä¼˜ç‚¹</strong>ï¼šæ ‡å‡†æµç¨‹å›¾çš„æ ·å¼å±•ç¤ºï¼›æ¸²æŸ“å¿«ï¼Œå‡ ä¹ä¸ä¼šå‡ºç°å±•ç¤ºå¤šè¡Œä»£ç çš„æ—¶å€™ï¼›å®ç°ç®€å•ã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼šæ ·å¼ä¸èƒ½æ›´æ”¹ï¼Œé»‘ç™½ç•Œé¢ï¼›æµç¨‹å›¾è¯­æ³•éœ€è¦å…ˆå£°æ˜åä½¿ç”¨ã€‚</p><p>è®¾ç½®æœ€å¤§é«˜åº¦åŠå±…ä¸­å±•ç¤ºï¼ŒèƒŒæ™¯è‰²ï¼Œè¶…å‡ºéƒ¨åˆ†æ»‘åŠ¨ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flow-chart</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f7f7f7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sequence</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f7f7f7</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>sequenceçš„å°ç¼–ä¸èµ°å¿ƒï¼Œæ²¡æœ‰æä¾›classï¼Œéœ€è¦åœ¨node_modules/hexo-filter-sequence/lib/renderer.jsä¿®æ”¹ï¼Œå¤§çº¦22è¡Œï¼Œè®¾ç½®idçš„æ—¶å€™åŒæ—¶å¢åŠ classï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> start + <span class="string">'&lt;div id="'</span> + seqId + <span class="string">'" class="sequence"&gt;&lt;/div&gt;'</span> + end;</span><br></pre></td></tr></table></figure></p></blockquote><p><strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼šå¾ˆå¤šäººè¯´sequenceè®¾ç½®æ— æ•ˆï¼Œéœ€è¦æ›´æ”¹ä¾èµ–çš„snapä¸ºraphaelï¼Œä¹Ÿæœ‰è¯´æ›´æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶çš„external_linkä¸ºfalseï¼Œå°ç¼–éƒ½è¯•è¿‡äº†ï¼Œæ— æ•ˆã€‚ä¸ºå•¥å­æ—¶åºå›¾è¿˜æ˜¯å¤±è´¥äº†å‘¢ï¼Ÿå°ç¼–æœäº†æ•´ä¸ªé¡¹ç›®å·®ç‚¹ä»¥ä¸ºæ˜¯è·Ÿmotion.jsé‡Œé¢çš„sequenceé‡åˆæœ‰ç¼ºé™·ï¼Œéƒ½æ‰“ç®—æ”¹æ’ä»¶äº†ï¼Œç„¶è€Œå¹¶ä¸éœ€è¦ï¼ï¼<br>å¦‚æœæ‚¨çš„ä½¿ç”¨çš„Hexoï¼Œè€Œä¸”æ—¶åºå›¾æ”¾åœ¨mdæ–‡ä»¶çš„æœ€åä¸€ä¸ªï¼Œå¯¼è‡´æ¸²æŸ“å¤±æ•ˆäº†çš„è¯ï¼Œè¯·åœ¨æ–‡ç« çš„æœ€åè¾“å…¥ä¸€ä¸ªå›è½¦ï¼Œæ²¡é”™å°±æ˜¯åªéœ€è¦ä¸€ä¸ªå›è½¦å°±è§£å†³äº†ã€‚ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯Hexoçš„bugï¼Œæ‰€æœ‰çš„å¤šè¡Œä»£ç åœ¨æ–‡ç« æœ«å°¾çš„éƒ½ä¼šå‡ºç°æ¸²æŸ“é—®é¢˜ï¼Œå¹¶ä¸æ˜¯sequenceçš„é—®é¢˜ã€‚</p><h2 id="Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶"><a href="#Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶" class="headerlink" title="Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶"></a>Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶</h2><p>å¢åŠ å¤åˆ¶æŒ‰é’®åŠå“åº”çš„jsï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">clipboard.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> initCopyCode = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> copyHtml = <span class="string">''</span>;</span><br><span class="line">    copyHtml += <span class="string">'&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'</span>;</span><br><span class="line">    copyHtml += <span class="string">'  &lt;i class="fa fa-clipboard"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'</span>;</span><br><span class="line">    copyHtml += <span class="string">'&lt;/button&gt;'</span>;</span><br><span class="line">    $(<span class="string">".highlight .code pre"</span>).before(copyHtml);</span><br><span class="line">    <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn-copy'</span>, &#123;</span><br><span class="line">      target: <span class="function"><span class="keyword">function</span> (<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> trigger.nextElementSibling;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>èµ„æºä¸‹è½½ï¼š<a href="/download/Hexo-ç¬¬äºŒå¼¹.zip">ç‚¹å‡»ä¸‹è½½</a></p><p>ä¸‹è½½å®Œæˆåï¼Œå°†clipboard.jså’Œclipboard-use.jsæ”¾åœ¨ themes/next/source/js/src/ä¸‹ï¼Œå¹¶æ›´æ”¹themes/next/layout/_layout.swigï¼Œåœ¨ä¸Šé¢åŠ å…¥<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä»£ç å—å¤åˆ¶åŠŸèƒ½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span> <span class="attr">src</span>=<span class="string">'/js/src/clipboard.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/clipboard-use.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·åœ¨é¼ æ ‡åœ¨ä»£ç åŒºåŸŸæ—¶å³ä¸Šè§’æ˜¾ç¤ºcopyã€‚</p><h2 id="Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ"><a href="#Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ" class="headerlink" title="Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ"></a>Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ</h2><p>è™½ç„¶åœ¨<span id="inline-blue">ä¸»é¢˜é…ç½®æ–‡ä»¶_config.yml</span>ä¸­æ›´æ”¹post_copyrightå¯ä»¥åœ¨æ–‡ç« åº•éƒ¨å¢åŠ ç‰ˆæƒå£°æ˜ä¿¡æ¯ï¼Œå¤åˆ¶æ—¶å¹¶ä¸èƒ½åƒå¾ˆå¤šåšå®¢ç½‘ç«™ä¸€æ ·å¤åˆ¶æ—¶ç›´æ¥è¿½åŠ ã€‚</p><p>å®ç°æ˜¯é€šè¿‡ç›‘å¬copyäº‹ä»¶ï¼Œè¿½åŠ ä¿¡æ¯ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">copyright.js</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.getElementsByClassName(<span class="string">"post-copyright"</span>).length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> author=<span class="built_in">document</span>.getElementsByClassName(<span class="string">"author"</span>)[<span class="number">0</span>].textContent;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'copy'</span>, e =&gt; &#123;</span><br><span class="line">      <span class="keyword">let</span> clipboardData = e.clipboardData || <span class="built_in">window</span>.clipboardData;</span><br><span class="line">      <span class="keyword">if</span>(!clipboardData) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      e.preventDefault();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> selection = <span class="built_in">window</span>.getSelection().toString();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> textData = selection + <span class="string">'\n-----------------------\n'</span></span><br><span class="line">        + (author ? <span class="string">`ä½œè€…: <span class="subst">$&#123;author&#125;</span>\n`</span> : <span class="string">''</span>)</span><br><span class="line">        + <span class="string">'åŸæ–‡: '</span> + <span class="built_in">window</span>.location.href + <span class="string">'\n'</span></span><br><span class="line">        + <span class="string">'ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼\n\n'</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> htmlData = selection + <span class="string">'&lt;br/&gt;-----------------------&lt;br/&gt;'</span></span><br><span class="line">        + (author ? <span class="string">`&lt;b&gt;ä½œè€…&lt;/b&gt;: <span class="subst">$&#123;author&#125;</span>&lt;br/&gt;`</span> : <span class="string">''</span>)</span><br><span class="line">        + <span class="string">`&lt;b&gt;åŸæ–‡&lt;/b&gt;: &lt;a href="<span class="subst">$&#123;<span class="built_in">window</span>.location.href&#125;</span>"&gt;<span class="subst">$&#123;<span class="built_in">window</span>.location.href&#125;</span>&lt;/a&gt;&lt;br/&gt;`</span></span><br><span class="line">        + <span class="string">'ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ &lt;a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"&gt;CC BY-NC-SA 3.0&lt;/a&gt; è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼&lt;br/&gt;'</span>;</span><br><span class="line"></span><br><span class="line">      clipboardData.setData(<span class="string">'text/html'</span>, htmlData);</span><br><span class="line">      clipboardData.setData(<span class="string">'text/plain'</span>, textData);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p><p>èµ„æºä¸‹è½½ï¼šcopyright.js <a href="/download/Hexo-ç¬¬äºŒå¼¹.zip">ç‚¹å‡»ä¸‹è½½</a><br>ä¸‹è½½å®Œæˆåï¼Œcopyright.jsæ”¾åœ¨ themes/next/source/js/src/ä¸‹ï¼Œå¹¶æ›´æ”¹themes/next/layout/_layout.swigï¼Œåœ¨ä¸Šé¢åŠ å…¥<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&#123;#å¤åˆ¶ç‰ˆæƒç”³æ˜#&#125;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/copyright.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç‰ˆæƒå¼€å¯æ—¶ï¼Œå¤åˆ¶æ—¶å³å¯å¢åŠ ç‰ˆæƒä¿¡æ¯ã€‚</p><p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: å¼€å§‹inputA=>inputoutput: è¾“å…¥ç”¨æˆ·åå¯†ç opA=>operation: æ•°æ®åº“æŸ¥è¯¢å­ç±»conditionA=>condition: æ˜¯å¦æœ‰æ­¤ç”¨æˆ·conditionB=>condition: å¯†ç æ˜¯å¦æ­£ç¡®opB=>operation: è¯»å…¥ç”¨æˆ·ä¿¡æ¯e=>end: ç™»å½•st->inputA->opA->conditionAconditionA(yes)->conditionBconditionA(no)->inputAconditionB(yes)->opB->econditionB(no)->inputA</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script><textarea id="sequence-0-code" style="display: none">participant Clientparticipant ServerNote left of Client:SYN_SENTClient->Server:SYN=1 seq=xNote right of Server:SYN_RCVDServer->Client:SYN=1 seq=y ACK=x+1Note left of Client:ESTABLISHEDClient->Server:ACK=y+1Note right of Server:ESTABLISHED</textarea><textarea id="sequence-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("sequence-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-0", options);</script></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;ç›®å½•&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾&quot;&gt;1. Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶&quot;&gt;2. Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ&quot;&gt;3. Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾&quot;&gt;&lt;a href=&quot;#Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾&quot; class=&quot;headerlink&quot; title=&quot;Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾&quot;&gt;&lt;/a&gt;Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾&lt;/h2&gt;&lt;p&gt;ç”»æµç¨‹å›¾è¿˜éœ€è¦ç”¨åˆ«çš„ç¼–è¾‘å™¨ç”»äº†ç”¨å›¾ç‰‡å¯¼å…¥ï¼ŸHexoå®ç°æ‰‹å†™æµç¨‹å›¾ä¹Ÿå¾ˆç®€å•å“¦ï¼Œä½†æ˜¯æœ‰ä¸ªå°å‘ï¼Œå°ç¼–è¢«å‘äº†å¥½ä¹…ï¼Œæ¥ä¸‹æ¥æ‰‹æŠŠæ‰‹ğŸ‘‡å¸¦ä½ ä»¬è¿‡å‘ã€‚&lt;/p&gt;
&lt;p&gt;markdownè¯­æ³•å®ç°æµç¨‹å›¾çš„æ–¹å¼å¯ä»¥é€šè¿‡mermaidæˆ–flowchartï¼Œæ—¶åºå›¾åˆ™å¯ä»¥mermaidæˆ–sequenceï¼Œä½†æ˜¯é»˜è®¤æ˜¯ä¸ä¼šè¯†åˆ«è¯­æ³•çš„ï¼Œåªæ˜¯å½“åšæ™®é€šçš„å¤šè¡Œä»£ç ï¼Œéœ€è¦å®‰è£…æ’ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://sunflowercoder.com/categories/Hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>Scrapyè¯¦è§£ çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼</title>
    <link href="https://sunflowercoder.com/Scrapy%E8%AF%A6%E8%A7%A3-%E7%88%AC%E8%99%AB%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8%E7%9C%8B%E8%BF%99%E4%B8%80%E7%AF%87%E5%B0%B1%E5%A4%9F%E4%BA%86%EF%BC%81/"/>
    <id>https://sunflowercoder.com/Scrapyè¯¦è§£-çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼/</id>
    <published>2019-07-10T06:20:06.000Z</published>
    <updated>2019-08-07T03:31:35.565Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å­¦ä¹ Scrapyæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå½“æ—¶æƒ³è¦è·å–ä¸€ä¸‹ç™¾åº¦æ±‰å­—çš„è§£æï¼Œåˆä¸æƒ³ä¸€ä¸ªä¸ªæ±‰å­—å»æœï¼Œå¤åˆ¶ç²˜è´´å¤ªè´¹åŠ²ï¼Œè€ƒè™‘åˆ°çˆ¬è™«çš„ä¾¿åˆ©æ€§ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä»‹ç»ä¸€ä¸ªçˆ¬è™«æ¡†æ¶â€“<strong>Scrapy</strong>ï¼Œéå¸¸ä¸»æµçš„çˆ¬è™«æ¡†æ¶ï¼Œå†™çˆ¬è™«è¿˜ä¸ä¼šScrapyï¼Œä½ å°±outå•¦ğŸ™ˆ~</p><p>ğŸçˆ¬è™«çš„åº”ç”¨åœºæ™¯ï¼š</p><ul><li>æœç´¢å¤šä¸ªæ±‰å­—ï¼Œå­˜å‚¨ä¸‹æ¥æ±‰å­—çš„è§£æ</li><li>æ¯éš”ä¸€æ®µæ—¶é—´è·å–ä¸€ä¸‹æœ€æ–°å¤©æ°”ï¼Œæ–°é—»ç­‰ç­‰</li><li>æ‹¿åˆ°è±†ç“£ç”µå½±ï¼ˆè±†ç“£å›¾ä¹¦ï¼‰çš„top100çš„ç”µå½±åå­—ã€æ¼”å‘˜ã€ä¸Šæ˜ æ—¶é—´ä»¥åŠå„å¤§ç½‘å‹çš„è¯„è®º</li><li>éœ€è¦ä¸‹è½½ç½‘ç«™çš„ä¸€ç³»åˆ—å›¾ç‰‡ï¼Œè§†é¢‘ç­‰ï¼Œä¸‹è½½æ…•è¯¾ç½‘çš„è¯¾ç¨‹è§†é¢‘</li><li>æœé›†å®‰å±…å®¢çš„æ‰€æœ‰æˆ¿æºï¼Œæ€§ä»·æ¯”åˆ†æ</li><li>åˆ·ç¥¨ã€æŠ¢ç¥¨</li><li>æ‹¿åˆ°å¾®åšå½“å‰çš„çƒ­é—¨è¯é¢˜ï¼Œè‡ªåª’ä½“éœ€è¦å³æ—¶å†™æ–‡ç« å•¦</li><li>â€¦</li></ul><a id="more"></a>             <h2 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h2><p><a href="https://scrapy-chs.readthedocs.io/zh_CN/0.24/intro/overview.html" target="_blank" rel="noopener">å®˜æ–¹è§£æ</a>ï¼šScrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ã€‚å¯ä»¥åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨å†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­ã€‚</p><p>å…¶æœ€åˆæ˜¯ä¸ºäº†é¡µé¢æŠ“å–ï¼ˆæ›´ç¡®åˆ‡æ¥è¯´,ç½‘ç»œæŠ“å–ï¼‰æ‰€è®¾è®¡çš„ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åœ¨è·å–APIæ‰€è¿”å›çš„æ•°æ®æˆ–è€…é€šç”¨çš„ç½‘ç»œçˆ¬è™«ã€‚</p><img src="/Scrapyè¯¦è§£-çˆ¬è™«æ¡†æ¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼/2351264496.png" title="Scrapyæ¶æ„å›¾"><p><strong>æ¶æ„åˆ†æ</strong>ï¼š</p><ul><li><code>Scrapy Engine</code>ï¼šScrapyå¼•æ“ã€‚è´Ÿè´£æ§åˆ¶æ•°æ®æµåœ¨ç³»ç»Ÿä¸­æ‰€æœ‰ç»„ä»¶ä¸­æµåŠ¨ï¼Œå¹¶åœ¨ç›¸åº”åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘äº‹ä»¶ã€‚</li><li><code>Scheduler</code>ï¼šè°ƒåº¦å™¨ã€‚ä»Scrapy Engineæ¥å—è¯·æ±‚ï¼ˆrequestsï¼‰å¹¶æ’åºåˆ—å…¥é˜Ÿåˆ—ï¼Œå¹¶åœ¨å¼•æ“å†æ¬¡è¯·æ±‚æ—¶è¿”å›ã€‚ç”¨å®ƒæ¥å†³å®šä¸‹ä¸€ä¸ªæŠ“å–çš„ç½‘å€æ˜¯ä»€ä¹ˆï¼ŒåŒæ—¶å»é™¤é‡å¤çš„ç½‘å€ã€‚</li><li><code>Downloader</code>ï¼šä¸‹è½½å™¨ã€‚æŠ“å–ç½‘é¡µå¹¶å°†ç½‘é¡µå†…å®¹è¿”è¿˜ç»™Spidersã€‚å»ºç«‹åœ¨twistedå¼‚æ­¥æ¨¡å‹ã€‚</li><li><code>Spiders</code>ï¼šçˆ¬è™«ã€‚ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»ï¼Œä¸»è¦ç”¨æ¥è§£æç½‘é¡µï¼Œæå–Itemsï¼Œå‘é€urlè·Ÿè¿›ç­‰æ–°è¯·æ±‚ç­‰ã€‚</li><li><code>Item Pipelines</code>ï¼šç®¡é“ã€‚ä¸»è¦ç”¨æ¥å¤„ç†Spiderè§£æå‡ºæ¥çš„Itemsï¼Œè¿›è¡ŒæŒ‰è§„åˆ™è¿‡æ»¤ï¼ŒéªŒè¯ï¼ŒæŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚æ•°æ®åº“å­˜å‚¨ï¼‰ç­‰</li><li><code>Downloader Middlewares</code>ï¼šä¸‹è½½ä¸­é—´ä»¶ã€‚ä½äºScrapy Engineå’ŒDownloaderä¹‹é—´ï¼Œä¸»è¦æ˜¯å¤„ç†Scrapyå¼•æ“ä¸ä¸‹è½½å™¨ä¹‹é—´çš„è¯·æ±‚åŠå“åº”ã€‚</li><li><code>Spider Middlewares</code>ï¼šçˆ¬è™«ä¸­é—´ä»¶ã€‚ä½äºScrapy Engineå’ŒSpidersä¹‹é—´ï¼Œä¸»è¦å·¥ä½œæ˜¯å¤„ç†Spidersçš„å“åº”è¾“å…¥å’Œè¯·æ±‚è¾“å‡ºã€‚</li><li><code>Scheduler Middlewares</code>ï¼šè°ƒåº¦ä¸­é—´ä»¶ã€‚ä½äºScrapy Engineå’ŒSchedulerä¹‹é—´ã€‚ä¸»è¦å·¥ä½œæ˜¯å¤„ç†ä»Scrapy Engineå‘é€åˆ°Schedulerçš„è¯·æ±‚å’Œå“åº”ã€‚</li></ul><p><strong>æ•°æ®å¤„ç†æµç¨‹</strong>ï¼š<br>1ã€å¼•æ“æ‰“å¼€ä¸€ä¸ªç½‘ç«™(open a domain)ï¼Œæ‰¾åˆ°å¤„ç†è¯¥ç½‘ç«™çš„Spiderå¹¶å‘è¯¥Spiderè¯·æ±‚è¦çˆ¬å–çš„ç¬¬ä¸€ä¸ªstart_urlsã€‚<br>2ã€å¼•æ“ä»Spiderä¸­è·å–åˆ°ç¬¬ä¸€ä¸ªè¦çˆ¬å–çš„URLå¹¶åœ¨è°ƒåº¦å™¨(Scheduler)ä»¥Requestè°ƒåº¦ã€‚<br>3ã€å¼•æ“å‘è°ƒåº¦å™¨è¯·æ±‚ä¸‹ä¸€ä¸ªè¦çˆ¬å–çš„URLã€‚<br>4ã€è°ƒåº¦å™¨è¿”å›ä¸‹ä¸€ä¸ªè¦çˆ¬å–çš„URLç»™å¼•æ“ï¼Œå¼•æ“å°†URLé€šè¿‡<code>Downloader Middlewares</code>ï¼ˆrequestï¼‰è½¬å‘ç»™ä¸‹è½½å™¨(Downloader)ã€‚<br>5ã€ä¸€æ—¦é¡µé¢ä¸‹è½½å®Œæ¯•ï¼Œ<code>Downloader</code>ç”Ÿæˆä¸€ä¸ªè¯¥é¡µé¢çš„Responseï¼Œå¹¶å°†å…¶é€šè¿‡<code>Downloader Middlewares</code>(response)å‘é€ç»™å¼•æ“ã€‚<br>6ã€å¼•æ“ä»<code>Downloader</code>ä¸­æ¥æ”¶åˆ°Responseå¹¶é€šè¿‡<code>Spider Middlewares</code>ï¼ˆrequestï¼‰å‘é€ç»™Spiderå¤„ç†ã€‚<br>7ã€Spiderå¤„ç†Responseå¹¶è¿”å›çˆ¬å–åˆ°çš„ItemåŠ(è·Ÿè¿›çš„)æ–°çš„Requestç»™å¼•æ“ã€‚<br>8ã€å¼•æ“å°†(Spiderè¿”å›çš„)çˆ¬å–åˆ°çš„Itemç»™<code>Item Pipeline</code>ï¼Œå°†(Spiderè¿”å›çš„)Requestç»™è°ƒåº¦å™¨ã€‚<br>9ã€ç³»ç»Ÿé‡å¤2-9çš„æ“ä½œï¼Œç›´åˆ°è°ƒåº¦ä¸­æ²¡æœ‰æ›´å¤šåœ°requestï¼Œç„¶åæ–­å¼€å¼•æ“ä¸ç½‘ç«™ä¹‹é—´çš„è”ç³»ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä¾èµ–ç¯å¢ƒï¼š</p><ul><li>Python 2.7åŠä»¥ä¸Š</li><li>Python Package: pip and setuptools. ç°åœ¨ pip ä¾èµ– setuptools ï¼Œå¦‚æœæœªå®‰è£…ï¼Œåˆ™ä¼šè‡ªåŠ¨å®‰è£… setuptools ã€‚</li></ul><p>ä½¿ç”¨pipå®‰è£…:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Scrapy</span><br></pre></td></tr></table></figure></p><p>åˆ›å»ºé¡¹ç›®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject [é¡¹ç›®å]</span><br></pre></td></tr></table></figure></p><p>å¦‚åˆ›å»º scrapy startproject qimairankï¼Œä¼šè‡ªåŠ¨åˆ›å»ºScrapyçš„é¡¹ç›®æ¶æ„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">qimairank</span><br><span class="line"></span><br><span class="line">|--qimairank</span><br><span class="line">    |--spiders</span><br><span class="line">        |--__init__.py</span><br><span class="line">    |--__init__.py</span><br><span class="line">    |--items.py</span><br><span class="line">    |--middlewares.py</span><br><span class="line">    |--pipelines.py</span><br><span class="line">    |--settings.py</span><br><span class="line">|--scrapy.cfg</span><br></pre></td></tr></table></figure></p><ul><li><code>scrapy.cfg</code>ï¼šé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®š<code>settings</code>æ–‡ä»¶ï¼Œéƒ¨ç½²deployçš„projectåç§°ç­‰ç­‰ã€‚</li><li><code>qimairank</code>ï¼šé¡¹ç›®çš„pythonæ¨¡å—ã€‚</li><li><code>spiders</code>ï¼šæ”¾ç½®spiderä»£ç çš„ç›®å½•ã€‚</li><li><code>items.py</code>ï¼šé¡¹ç›®ä¸­çš„itemæ–‡ä»¶ã€‚</li><li><code>pipelines.py</code>:é¡¹ç›®ä¸­çš„pipelinesæ–‡ä»¶ã€‚</li><li><code>middlewares.py</code>ï¼šé¡¹ç›®çš„ä¸­é—´ä»¶ã€‚</li><li><code>settings.py</code>ï¼šScrapy é…ç½®æ–‡ä»¶ã€‚æ›´å¤šé…ç½®ä¿¡æ¯æŸ¥çœ‹ï¼š<a href="https://scrapy-chs.readthedocs.io/zh_CN/0.24/topics/settings.html" target="_blank" rel="noopener">https://scrapy-chs.readthedocs.io/zh_CN/0.24/topics/settings.html</a></li></ul><h2 id="ç¬¬ä¸€ä¸ªçˆ¬è™«"><a href="#ç¬¬ä¸€ä¸ªçˆ¬è™«" class="headerlink" title="ç¬¬ä¸€ä¸ªçˆ¬è™«"></a>ç¬¬ä¸€ä¸ªçˆ¬è™«</h2><p>çˆ¬è™«å®ç°è®²è§£ï¼š</p><p>ç¬¬ä¸€å¼¹ï¼šçˆ¬å–æœ‰é“ç¿»è¯‘ <a href="../../Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰/">ğŸ‘‰ ç‚¹å‡»å‰å¾€</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å­¦ä¹ Scrapyæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå½“æ—¶æƒ³è¦è·å–ä¸€ä¸‹ç™¾åº¦æ±‰å­—çš„è§£æï¼Œåˆä¸æƒ³ä¸€ä¸ªä¸ªæ±‰å­—å»æœï¼Œå¤åˆ¶ç²˜è´´å¤ªè´¹åŠ²ï¼Œè€ƒè™‘åˆ°çˆ¬è™«çš„ä¾¿åˆ©æ€§ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä»‹ç»ä¸€ä¸ªçˆ¬è™«æ¡†æ¶â€“&lt;strong&gt;Scrapy&lt;/strong&gt;ï¼Œéå¸¸ä¸»æµçš„çˆ¬è™«æ¡†æ¶ï¼Œå†™çˆ¬è™«è¿˜ä¸ä¼šScrapyï¼Œä½ å°±outå•¦ğŸ™ˆ~&lt;/p&gt;
&lt;p&gt;ğŸçˆ¬è™«çš„åº”ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœç´¢å¤šä¸ªæ±‰å­—ï¼Œå­˜å‚¨ä¸‹æ¥æ±‰å­—çš„è§£æ&lt;/li&gt;
&lt;li&gt;æ¯éš”ä¸€æ®µæ—¶é—´è·å–ä¸€ä¸‹æœ€æ–°å¤©æ°”ï¼Œæ–°é—»ç­‰ç­‰&lt;/li&gt;
&lt;li&gt;æ‹¿åˆ°è±†ç“£ç”µå½±ï¼ˆè±†ç“£å›¾ä¹¦ï¼‰çš„top100çš„ç”µå½±åå­—ã€æ¼”å‘˜ã€ä¸Šæ˜ æ—¶é—´ä»¥åŠå„å¤§ç½‘å‹çš„è¯„è®º&lt;/li&gt;
&lt;li&gt;éœ€è¦ä¸‹è½½ç½‘ç«™çš„ä¸€ç³»åˆ—å›¾ç‰‡ï¼Œè§†é¢‘ç­‰ï¼Œä¸‹è½½æ…•è¯¾ç½‘çš„è¯¾ç¨‹è§†é¢‘&lt;/li&gt;
&lt;li&gt;æœé›†å®‰å±…å®¢çš„æ‰€æœ‰æˆ¿æºï¼Œæ€§ä»·æ¯”åˆ†æ&lt;/li&gt;
&lt;li&gt;åˆ·ç¥¨ã€æŠ¢ç¥¨&lt;/li&gt;
&lt;li&gt;æ‹¿åˆ°å¾®åšå½“å‰çš„çƒ­é—¨è¯é¢˜ï¼Œè‡ªåª’ä½“éœ€è¦å³æ—¶å†™æ–‡ç« å•¦&lt;/li&gt;
&lt;li&gt;â€¦&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Scrapy" scheme="https://sunflowercoder.com/categories/Scrapy/"/>
    
    
  </entry>
  
  <entry>
    <title>æ’é™¤aar/jarä¸­å†—ä½™æˆ–è€…å†²çªåŒ…ã€ç±»çš„è„šæœ¬</title>
    <link href="https://sunflowercoder.com/%E6%8E%92%E9%99%A4aar-jar%E4%B8%AD%E5%86%97%E4%BD%99%E6%88%96%E8%80%85%E5%86%B2%E7%AA%81%E5%8C%85%E3%80%81%E7%B1%BB%E7%9A%84%E8%84%9A%E6%9C%AC/"/>
    <id>https://sunflowercoder.com/æ’é™¤aar-jarä¸­å†—ä½™æˆ–è€…å†²çªåŒ…ã€ç±»çš„è„šæœ¬/</id>
    <published>2019-07-05T08:51:49.000Z</published>
    <updated>2019-07-05T08:55:19.668Z</updated>
    
    <content type="html"><![CDATA[<p>å¼•å…¥aarçš„å†²çªæ— æ‰€ä¸åœ¨ï¼Œé€šè¿‡è¿œç¨‹ä¾èµ–mavençš„åŒ…å¯ä»¥é€šè¿‡<code>exclude</code>å…³é”®å­—æ­é…<code>module</code>å’Œ<code>group</code>å»é™¤æŸä¸ªç»„ï¼Œæ²¡åŠæ³•å»é™¤å…·ä½“çš„ç±»ã€‚</p><p>é‚£ä¹ˆå¦‚æœæ˜¯å•ç‹¬çš„aaråŒ…ï¼Œæƒ³è¦æ’é™¤aarä¸‹classes.jaråŒ…é‡Œçš„æŸä¸ªå•ç‹¬çš„åŒ…æˆ–è€…ç±»æ€ä¹ˆåŠï¼Ÿ</p><p>éœ€è¦æ¥å…¥çš„jaråŒ…å·²ç»å¸¦äº†è…¾è®¯X5æ ¸å¿ƒï¼Œå½“å‰ä¾èµ–çš„å·²ç»åŒ…å«X5æ ¸å¿ƒï¼Œå†²çªåˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><p>å½“å‰çš„gradleè„šæœ¬ï¼ˆé¡¹ç›®é“¾æ¥ï¼š<a href="https://github.com/luohongxfb/ExcludeAar" target="_blank" rel="noopener">https://github.com/luohongxfb/ExcludeAar</a> ï¼‰å¯ä»¥è§£å†³ã€‚</p><a id="more"></a><ul><li><strong>ç›®å½•</strong><ul><li><a href="#1-æ•ˆæœå±•ç¤º"> 1 æ•ˆæœå±•ç¤º</a></li><li><a href="#2-å¦‚ä½•ä½¿ç”¨"> 2 å¦‚ä½•ä½¿ç”¨</a></li><li><a href="#3-å¦‚ä½•å®ç°çš„"> 3 å¦‚ä½•å®ç°çš„</a><ul><li><a href="#è§£å‹aarjaråŒ…"> è§£å‹AAR/JARåŒ…</a></li><li><a href="#æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…è¿™ä¸ªæ˜¯é‡ç‚¹"> æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…(è¿™ä¸ªæ˜¯é‡ç‚¹)</a></li><li><a href="#é‡æ–°æ‰“åŒ…æˆaaråŒ…"> é‡æ–°æ‰“åŒ…æˆAARåŒ…</a></li></ul></li></ul></li></ul><h2 id="1-æ•ˆæœå±•ç¤º"><a href="#1-æ•ˆæœå±•ç¤º" class="headerlink" title="1 æ•ˆæœå±•ç¤º"></a>1 æ•ˆæœå±•ç¤º</h2><p>å¦‚excludelib/libs/exampleAAR.aarï¼Œå·¦è¾¹æ˜¯æœªå»é™¤çš„åŒ…ç»“æ„ï¼Œå³è¾¹æ˜¯å»é™¤<code>com.baidu</code>ä¹‹åçš„ï¼š</p><img src="/æ’é™¤aar-jarä¸­å†—ä½™æˆ–è€…å†²çªåŒ…ã€ç±»çš„è„šæœ¬/1562307807.jpg" title="aaræ’é™¤"><p>å¦‚excludelib/libs/exampleJAR.jarï¼š</p><img src="/æ’é™¤aar-jarä¸­å†—ä½™æˆ–è€…å†²çªåŒ…ã€ç±»çš„è„šæœ¬/1562308266.jpg" title="jaræ’é™¤å±•ç¤º"><h2 id="2-å¦‚ä½•ä½¿ç”¨"><a href="#2-å¦‚ä½•ä½¿ç”¨" class="headerlink" title="2 å¦‚ä½•ä½¿ç”¨"></a>2 å¦‚ä½•ä½¿ç”¨</h2><p>ï¼ˆ1ï¼‰å°†éœ€è¦æ’é™¤çš„aaræˆ–è€…jaråŒ…æ”¾åœ¨excludelib/libsä¸‹ã€‚</p><p>ï¼ˆ2ï¼‰æ›´æ”¹excludelib/build.gradle<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éœ€è¦æ’é™¤çš„aaræˆ–è€…jarã€‚ï¼ˆæ›¿æ¢æˆéœ€è¦æ’é™¤çš„ï¼‰</span></span><br><span class="line">artifacts.add(<span class="string">"exclude"</span>, file(<span class="string">'libs/exampleAAR.aar'</span>))</span><br><span class="line">artifacts.add(<span class="string">"exclude"</span>, file(<span class="string">'libs/exampleJAR.jar'</span>))</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ3ï¼‰è®¾ç½®æ’é™¤è§„åˆ™ å¦‚æœæ‚¨éœ€è¦æ’é™¤aarï¼Œé‚£ä¹ˆè¯·æ›´æ”¹excludelib/excludeAar.gradleï¼›å¦‚æœæ‚¨éœ€è¦æ’é™¤jarï¼Œé‚£ä¹ˆè¯·æ›´æ”¹excludelib/excludeJar.gradle<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éœ€è¦æ’é™¤çš„åŒ…å</span></span><br><span class="line"><span class="keyword">def</span> excludePackages = [<span class="string">'com.baidu'</span>]</span><br><span class="line"><span class="comment">//éœ€è¦æ’é™¤çš„ç±»(éœ€è¦å…¨ç±»å)</span></span><br><span class="line"><span class="keyword">def</span> excludeClasses = []</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ4ï¼‰è¿è¡Œæ’é™¤ä»»åŠ¡</p><img src="/æ’é™¤aar-jarä¸­å†—ä½™æˆ–è€…å†²çªåŒ…ã€ç±»çš„è„šæœ¬/1562312299.jpg" title="è¿è¡Œæ’é™¤"><p>æ’é™¤åç”Ÿæˆçš„aaråœ¨excludelib/build/excludeaarä¸‹ï¼Œæ’é™¤åç”Ÿæˆçš„jarä½äºexcludelib/build/excludejarã€‚</p><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨å•¦~</p><h2 id="3-å¦‚ä½•å®ç°çš„"><a href="#3-å¦‚ä½•å®ç°çš„" class="headerlink" title="3 å¦‚ä½•å®ç°çš„"></a>3 å¦‚ä½•å®ç°çš„</h2><p><strong>aaræ’é™¤æ­¥éª¤ï¼š</strong></p><p>1ã€è·å–åˆ°éœ€è¦æ’é™¤çš„åŸå§‹AARåŒ…</p><p>2ã€è§£å‹AARåŒ…ï¼ˆzipTreeé…åˆTask Copyï¼‰</p><p>3ã€è§£å‹AARåŒ…ä¸­çš„class.jarï¼ˆzipTreeé…åˆTask Copyï¼‰</p><p>4ã€æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„class.jaré‡æ–°æ‰“åŒ…(Task Jar)</p><p>5ã€é‡æ–°æ‰“åŒ…æˆAARåŒ…(Task Zip)</p><p><strong>jaræ’é™¤æ­¥éª¤</strong></p><p>1ã€è·å–åˆ°éœ€è¦æ’é™¤çš„åŸå§‹jaråŒ…</p><p>2ã€è§£å‹jaråŒ…ï¼ˆzipTreeé…åˆTask Copyï¼‰</p><p>3ã€æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…(Task Jar)</p><h3 id="è§£å‹AAR-JARåŒ…"><a href="#è§£å‹AAR-JARåŒ…" class="headerlink" title="è§£å‹AAR/JARåŒ…"></a>è§£å‹AAR/JARåŒ…</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">task unZipAar(<span class="string">type:</span> Copy) &#123;</span><br><span class="line">    <span class="keyword">def</span> zipFile = getDefaultAar()</span><br><span class="line">    <span class="keyword">def</span> outputDir = unZipAarFile</span><br><span class="line">    from zipTree(zipFile)</span><br><span class="line">    into outputDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»è¦åŸç†ï¼šzipTreeé…åˆCopyï¼Œå®ç°è§£å‹ã€‚</p><p>Copy Taskå®˜æ–¹è®²è§£ï¼š<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Copy.html" target="_blank" rel="noopener">https://docs.gradle.org/current/dsl/org.gradle.api.tasks.Copy.html</a></p><p>ziptreeæºç ä¸»è¦è§£æï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„file treeåŒ…å«åŸæ¥zipçš„å†…å®¹ï¼Œå¯ä»¥é…åˆCopyå®ç°è§£å‹ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Project</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * &lt;p&gt;Creates a new &#123;<span class="doctag">@code</span> FileTree&#125; which contains the contents of the given ZIP file.</span></span><br><span class="line"><span class="comment">     * You can combine this method with the &#123;<span class="doctag">@link</span> #copy(groovy.lang.Closure)&#125;</span></span><br><span class="line"><span class="comment">     * method to unzip a ZIP file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> zipPath The ZIP file. Evaluated as per &#123;<span class="doctag">@link</span> #file(Object)&#125;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the file tree. Never returns null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">FileTree <span class="title">zipTree</span><span class="params">(Object zipPath)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…-è¿™ä¸ªæ˜¯é‡ç‚¹"><a href="#æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…-è¿™ä¸ªæ˜¯é‡ç‚¹" class="headerlink" title="æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…(è¿™ä¸ªæ˜¯é‡ç‚¹)"></a>æŒ‰ç…§æ’é™¤è§„åˆ™å¯¹è§£å‹çš„jaré‡æ–°æ‰“åŒ…(è¿™ä¸ªæ˜¯é‡ç‚¹)</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">task zipJar(<span class="string">type:</span> Jar) &#123;</span><br><span class="line">    baseName = <span class="string">'classes'</span></span><br><span class="line">    from unZipJarFile</span><br><span class="line">    destinationDir unZipAarFile</span><br><span class="line">    exclude getExcludePackageRegex(excludePackages)</span><br><span class="line">    exclude getExcludeClassRegex(excludeClasses)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ­¥éª¤å°±æ˜¯æŠŠä¹‹å‰è§£å‹çš„classes.jaræ–‡ä»¶ï¼ŒæŒ‰ç…§æ’é™¤è§„åˆ™ç”¨Task Jaré‡æ–°æ‰“åŒ…æˆjaræ–‡ä»¶ã€‚</p><p>Task Jarå®˜æ–¹è®²è§£ï¼š<a href="https://docs.gradle.org/current/dsl/org.gradle.jvm.tasks.Jar.html" target="_blank" rel="noopener">https://docs.gradle.org/current/dsl/org.gradle.jvm.tasks.Jar.html</a></p><table><thead><tr><th style="text-align:left">Property/Method</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">baseName</td><td style="text-align:left">å‹ç¼©åçš„jaræ–‡ä»¶åã€‚</td></tr><tr><td style="text-align:left">from(sourcePaths)</td><td style="text-align:left">éœ€è¦å‹ç¼©çš„ç›®å½•ã€‚</td></tr><tr><td style="text-align:left">destinationDir</td><td style="text-align:left">å‹ç¼©åå­˜æ”¾çš„ç›®å½•ã€‚</td></tr><tr><td style="text-align:left">exclude(excludes)</td><td style="text-align:left">éœ€è¦æ’é™¤çš„æ–‡ä»¶ã€‚</td></tr></tbody></table><h3 id="é‡æ–°æ‰“åŒ…æˆAARåŒ…"><a href="#é‡æ–°æ‰“åŒ…æˆAARåŒ…" class="headerlink" title="é‡æ–°æ‰“åŒ…æˆAARåŒ…"></a>é‡æ–°æ‰“åŒ…æˆAARåŒ…</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">task excludeAar(<span class="string">type:</span> Zip) &#123;</span><br><span class="line">    group <span class="string">'ex'</span></span><br><span class="line">    description <span class="string">'ç”Ÿæˆä¸€ä¸ªæ’é™¤ä¹‹åçš„aaråŒ…'</span></span><br><span class="line">    baseName excludeAarName</span><br><span class="line">    extension <span class="string">"aar"</span></span><br><span class="line">    from unZipAarFile</span><br><span class="line">    destinationDir excludeAarFile</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹classes.jarå¤„ç†å®Œæˆçš„aaré‡æ‰“åŒ…ï¼Œä¸»è¦ç”¨åˆ°Task Zipã€‚</p><p>Task Zipå®˜æ–¹è®²è§£ï¼š<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html" target="_blank" rel="noopener">https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html</a></p><table><thead><tr><th style="text-align:left">Property/Method</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">group</td><td style="text-align:left">setGroup(String group) å°†å½“å‰çš„Taskè®¾ç½®åˆ°æŒ‡å®šç»„ã€‚</td></tr><tr><td style="text-align:left">description</td><td style="text-align:left">setDescription(@Nullable String description) Taskæè¿°ã€‚</td></tr><tr><td style="text-align:left">baseName</td><td style="text-align:left">å‹ç¼©åçš„aaræ–‡ä»¶åã€‚</td></tr><tr><td style="text-align:left">extension</td><td style="text-align:left">å‹ç¼©åçš„æ–‡ä»¶æ‰©å±•åã€‚</td></tr><tr><td style="text-align:left">from(sourcePaths)</td><td style="text-align:left">éœ€è¦å‹ç¼©çš„ç›®å½•ã€‚</td></tr><tr><td style="text-align:left">destinationDir</td><td style="text-align:left">å‹ç¼©åå­˜æ”¾çš„ç›®å½•ã€‚</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¼•å…¥aarçš„å†²çªæ— æ‰€ä¸åœ¨ï¼Œé€šè¿‡è¿œç¨‹ä¾èµ–mavençš„åŒ…å¯ä»¥é€šè¿‡&lt;code&gt;exclude&lt;/code&gt;å…³é”®å­—æ­é…&lt;code&gt;module&lt;/code&gt;å’Œ&lt;code&gt;group&lt;/code&gt;å»é™¤æŸä¸ªç»„ï¼Œæ²¡åŠæ³•å»é™¤å…·ä½“çš„ç±»ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¦‚æœæ˜¯å•ç‹¬çš„aaråŒ…ï¼Œæƒ³è¦æ’é™¤aarä¸‹classes.jaråŒ…é‡Œçš„æŸä¸ªå•ç‹¬çš„åŒ…æˆ–è€…ç±»æ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;p&gt;éœ€è¦æ¥å…¥çš„jaråŒ…å·²ç»å¸¦äº†è…¾è®¯X5æ ¸å¿ƒï¼Œå½“å‰ä¾èµ–çš„å·²ç»åŒ…å«X5æ ¸å¿ƒï¼Œå†²çªåˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å½“å‰çš„gradleè„šæœ¬ï¼ˆé¡¹ç›®é“¾æ¥ï¼š&lt;a href=&quot;https://github.com/luohongxfb/ExcludeAar&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/luohongxfb/ExcludeAar&lt;/a&gt; ï¼‰å¯ä»¥è§£å†³ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://sunflowercoder.com/categories/Android/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo--ç¬¬ä¸€å¼¹</title>
    <link href="https://sunflowercoder.com/Hexo-%E7%AC%AC%E4%B8%80%E5%BC%B9/"/>
    <id>https://sunflowercoder.com/Hexo-ç¬¬ä¸€å¼¹/</id>
    <published>2019-07-04T11:23:14.000Z</published>
    <updated>2019-07-04T11:30:31.051Z</updated>
    
    <content type="html"><![CDATA[<ul><li><strong>ç›®å½•</strong><ul><li><a href="#1-ä¸æ¸²æŸ“mdæˆ–è€…layout"> 1. ä¸æ¸²æŸ“.mdæˆ–è€…layout</a></li><li><a href="#2-æ–°å»ºæ–‡ä»¶è‰ç¨¿"> 2. æ–°å»ºæ–‡ä»¶è‰ç¨¿</a></li></ul></li></ul><h2 id="1-ä¸æ¸²æŸ“-mdæˆ–è€…layout"><a href="#1-ä¸æ¸²æŸ“-mdæˆ–è€…layout" class="headerlink" title="1. ä¸æ¸²æŸ“.mdæˆ–è€…layout"></a>1. ä¸æ¸²æŸ“.mdæˆ–è€…layout</h2><p>Hexo åœ¨ source æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ md æ–‡ä»¶æˆ–è€… html æ–‡ä»¶éƒ½ä¼šè¢«æ¸²æŸ“ï¼Œ<br><a id="more"></a><br><img src="/Hexo-ç¬¬ä¸€å¼¹/1562235707.jpg" title="ä¸å¤„ç†çš„.mdæ¸²æŸ“åçš„æºç "><br>æˆ‘ä»¬æƒ³ç»™è¾“å‡ºé¡¹ç›®æ·»åŠ ä¸€ä¸ªREADME.mdæ–‡ä»¶ï¼Œä¸æƒ³è¢«æ¸²æŸ“ï¼Œä¿æŒmarkdownæ–‡ä»¶æ ¼å¼ï¼Œä¸è½¬æ¢ä¸ºhtmlæ€ä¹ˆåŠå‘¢</p><p><strong>ä¸æ¸²æŸ“html</strong><br>åœ¨å¤´éƒ¨æ·»åŠ Front-matterã€‚.mdè¿˜æ˜¯ä¼šè½¬æ¢æˆ.htmlï¼Œä½†æ˜¯ä¸ä¼šæ¸²æŸ“æ ·å¼ã€‚å•çº¯åªæ˜¯æ ‡ç­¾ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">layout: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><img src="/Hexo-ç¬¬ä¸€å¼¹/1562235861.jpg" title="ä¸æ¸²æŸ“htmlçš„.md"><p><span id="inline-green">.mdè¿˜æ˜¯è¢«è½¬æ¢æˆäº†.htmlï¼Œä½†æ˜¯æ²¡æœ‰æ¸²æŸ“ã€‚</span>æƒ³è¦è‡ªå®šä¹‰æ ·å¼çš„.htmlæ–‡ä»¶å¯å‚è€ƒè®¾ç½®ï¼Œä½†æ˜¯è¿˜ä¸ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ï¼Œæˆ‘ä»¬æƒ³è¦çš„ä¿æŒ.mdæ ·å¼å‘€ã€‚</p><p><strong>ä¸æ¸²æŸ“.mdæ–‡ä»¶</strong><br>åœ¨<span id="inline-blue">ç«™ç‚¹é…ç½®æ–‡ä»¶_config.yml</span>æŸ¥æ‰¾<code>skip_render</code>ï¼Œè®¾ç½®éœ€è¦è·³è¿‡æ¸²æŸ“çš„æ–‡ä»¶ã€‚<br><img src="/Hexo-ç¬¬ä¸€å¼¹/1562237746.jpg" title="è·³è¿‡æ¸²æŸ“çš„ç¤ºä¾‹æ–‡ä»¶"></p><p>è®¾ç½®ä¸è¢«æ¸²æŸ“çš„æ˜¯source/README.mdå’Œsource/test/a.html</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#è·³è¿‡æ¸²æŸ“ ç›¸å¯¹ç›®å½•æ˜¯`source`ç›®å½•</span><br><span class="line">skip_render:</span><br><span class="line">  - README.md</span><br><span class="line">  - test/a.html</span><br></pre></td></tr></table></figure><p>åœ¨<code>public</code>ç›®å½•å¯ä»¥çœ‹è§æˆ‘ä»¬çš„ç›®çš„è¾¾åˆ°äº†~</p><h2 id="2-æ–°å»ºæ–‡ä»¶è‰ç¨¿"><a href="#2-æ–°å»ºæ–‡ä»¶è‰ç¨¿" class="headerlink" title="2. æ–°å»ºæ–‡ä»¶è‰ç¨¿"></a>2. æ–°å»ºæ–‡ä»¶è‰ç¨¿</h2><p>å½“æˆ‘ä»¬æœ‰çš„æ–‡ç« æ²¡å†™å®Œï¼Œæˆ–è€…æš‚æ—¶ä¸æƒ³å±•ç¤ºæ—¶ï¼Œå¯ä»¥æ–°å»ºè‰ç¨¿ã€‚<br>åœ¨é¡¹ç›®ç›®å½•ä¸‹ç»ˆç«¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ–°å»ºè‰ç¨¿</span><br><span class="line">$ hexo new draft &quot;è‰ç¨¿&quot;</span><br></pre></td></tr></table></figure></p><p>åœ¨<code>source/_drafts</code>ä¼šç”Ÿæˆä¸€ä¸ª è‰ç¨¿.mdæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œé“¾æ¥ä¹Ÿè®¿é—®ä¸åˆ°ã€‚<br>æƒ³è¦æ¸²æŸ“è‰ç¨¿éœ€è¦åœ¨<span id="inline-blue">ç«™ç‚¹é…ç½®æ–‡ä»¶_config.yml</span>æŸ¥æ‰¾<code>render_drafts</code>ï¼Œè®¾ç½®ä¸ºtrueã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å¦‚æœä½ å¸Œæœ›å¼ºè¡Œé¢„è§ˆè‰ç¨¿ï¼Œæ›´æ”¹é…ç½®æ–‡ä»¶ï¼š</span><br><span class="line">render_drafts: true</span><br></pre></td></tr></table></figure></p><p><span id="inline-purple">æ³¨æ„ï¼šæ”¹ä¸ºtrueä¹‹åï¼Œdeployçº¿ä¸Šéƒ¨ç½²ä¹Ÿä¼šæ˜¾ç¤ºï¼Œä¸éœ€è¦çš„æ—¶å€™åŠ¡å¿…æ”¹æˆfalseã€‚</span><br>å°†è‰ç¨¿å‘å¸ƒï¼Œè½¬æ¢åˆ°<code>source/_posts</code>ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å‘å¸ƒè‰ç¨¿</span><br><span class="line">$ hexo publish [è‰ç¨¿]</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›®å½•&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1-ä¸æ¸²æŸ“mdæˆ–è€…layout&quot;&gt; 1. ä¸æ¸²æŸ“.mdæˆ–è€…layout
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2-æ–°å»ºæ–‡ä»¶è‰ç¨¿&quot;&gt; 2. æ–°å»ºæ–‡ä»¶è‰ç¨¿
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1-ä¸æ¸²æŸ“-mdæˆ–è€…layout&quot;&gt;&lt;a href=&quot;#1-ä¸æ¸²æŸ“-mdæˆ–è€…layout&quot; class=&quot;headerlink&quot; title=&quot;1. ä¸æ¸²æŸ“.mdæˆ–è€…layout&quot;&gt;&lt;/a&gt;1. ä¸æ¸²æŸ“.mdæˆ–è€…layout&lt;/h2&gt;&lt;p&gt;Hexo åœ¨ source æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ md æ–‡ä»¶æˆ–è€… html æ–‡ä»¶éƒ½ä¼šè¢«æ¸²æŸ“ï¼Œ&lt;br&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://sunflowercoder.com/categories/Hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>æœ€å®Œå–„çš„markdownè½¬html/pdfæ–¹æ³•ã€å¸¦ç›®å½•ç”Ÿæˆ</title>
    <link href="https://sunflowercoder.com/markdown%E8%BD%AChtml%E3%80%81pdf-%E5%B8%A6%E7%9B%AE%E5%BD%95%E7%94%9F%E6%88%90/"/>
    <id>https://sunflowercoder.com/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/</id>
    <published>2019-07-04T02:45:49.000Z</published>
    <updated>2019-07-04T09:07:51.858Z</updated>
    
    <content type="html"><![CDATA[<p id="div-border-top-purple">æœ€è¿‘å°ç¼–éœ€è¦å†™ä¸ªSDKæ¥å…¥æ–‡æ¡£ï¼Œç”¨wordè°ƒæ ¼å¼å½“ç„¶ä¸å¦‚markdownæ¥çš„èˆ’æœï¼Œå†™èµ·æ¥èˆ’æœäº†ï¼Œä½†æ˜¯.mdæ²¡åŠæ³•ç›´æ¥çœ‹æ•ˆæœï¼Œæœ€ç»ˆèŒç”Ÿå‡ºæŠŠmarkdownè½¬æˆhtmlå½¢å¼çš„æƒ³æ³•ã€‚</p><p>ç½‘ä¸Šmarkdownè½¬æ¢htmlçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬åœ¨çº¿è½¬æ¢å’Œå€ŸåŠ©å·¥å…·ï¼Œæœ€ç»ˆå°ç¼–é€‰æ‹©äº†<strong>VisualStudio Codeçš„æ’ä»¶Markdown Preview Enhanced</strong>ã€‚</p><ul><li><strong>ç›®å½•</strong><ul><li><a href="#1åœ¨çº¿è½¬æ¢çš„ç½‘ç«™"> 1.åœ¨çº¿è½¬æ¢çš„ç½‘ç«™</a></li><li><a href="#2å€ŸåŠ©å·¥å…·"> 2.å€ŸåŠ©å·¥å…·</a><ul><li><a href="#21-typora"> 2.1 typora</a></li><li><a href="#22-i5ting_toc"> 2.2 i5ting_toc</a></li><li><a href="#23-visualstudio-codeæ’ä»¶"> 2.3 VisualStudio Codeæ’ä»¶</a><ul><li><a href="#æ’ä»¶1copy-markdown-as-html"> æ’ä»¶1ï¼šcopy Markdown as HTML</a></li><li><a href="#æ’ä»¶2markdownmath"> æ’ä»¶2ï¼šMarkdown+Math</a></li><li><a href="#æ’ä»¶3markdown-preview-enhanced-æ¨è"> æ’ä»¶3ï¼šMarkdown Preview Enhanced ï¼ˆæ¨èï¼‰ </a></li></ul></li></ul></li></ul></li></ul><a id="more"></a><h2 id="1-åœ¨çº¿è½¬æ¢çš„ç½‘ç«™"><a href="#1-åœ¨çº¿è½¬æ¢çš„ç½‘ç«™" class="headerlink" title="1.åœ¨çº¿è½¬æ¢çš„ç½‘ç«™"></a>1.åœ¨çº¿è½¬æ¢çš„ç½‘ç«™</h2><ul><li><a href="http://www.bejson.com/convert/html2markdown/" target="_blank" rel="noopener">http://www.bejson.com/convert/html2markdown/</a> ï¼šä¸æ”¯æŒè¡¨æ ¼ï¼Œ<strong>ä¸æ¨è</strong></li><li><a href="http://www.atool9.com/html2markdown.php" target="_blank" rel="noopener">http://www.atool9.com/html2markdown.php</a> ï¼šä¸æ”¯æŒè¡¨æ ¼ï¼Œ<strong>ä¸æ¨è</strong></li><li><a href="https://www.zai17.com/md2html/" target="_blank" rel="noopener">https://www.zai17.com/md2html/</a> ï¼š```{ä»£ç }```åŒ…å«çš„ä»£ç å¤„ç†ä¸å¤ªç†æƒ³ï¼Œ<strong>ä¸æ¨è</strong></li><li><a href="https://github.com/markedjs/marked" target="_blank" rel="noopener">https://github.com/markedjs/marked</a> ï¼š<strong>è½¬æ¢ç»“æœæ¯”è¾ƒç†æƒ³ï¼Œæ¸²æŸ“éœ€æ›´æ”¹</strong>ã€‚å¯ä»¥ç”¨<a href="https://marked.js.org/demo/" target="_blank" rel="noopener">Demo Page</a>æŸ¥çœ‹æ•ˆæœã€‚æ¸²æŸ“å¯ä»¥ä½¿ç”¨<a href="https://github.com/sindresorhus/github-markdown-css" target="_blank" rel="noopener">github-markdown-css</a>ï¼Œgithubé£æ ¼ã€‚</li><li>â€¦ï¼ˆåœ¨çº¿çš„è¿˜æœ‰å¾ˆå¤šï¼Œåæ­£å°ç¼–æ²¡æœ‰æ‰¾åˆ°ç†æƒ³çš„ï¼‰</li></ul><h2 id="2-å€ŸåŠ©å·¥å…·"><a href="#2-å€ŸåŠ©å·¥å…·" class="headerlink" title="2.å€ŸåŠ©å·¥å…·"></a>2.å€ŸåŠ©å·¥å…·</h2><h3 id="2-1-typora"><a href="#2-1-typora" class="headerlink" title="2.1 typora"></a>2.1 typora</h3><p><a href="https://www.typora.io/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½ã€‚å¾ˆå¤šäººè¯´å¥½ç”¨ã€‚Q@QåŸè°…å°ç¼–æ²¡ä½¿æ˜ç™½ã€‚</p><h3 id="2-2-i5ting-toc"><a href="#2-2-i5ting-toc" class="headerlink" title="2.2 i5ting_toc"></a>2.2 i5ting_toc</h3><p><span id="inline-blue">è§£ææ¸²æŸ“okï¼Œå¯è‡ªåŠ¨ç”Ÿæˆä¾§è¾¹ç›®å½•ï¼Œä¸å¯ä»¥ç¼–å†™è¿‡ç¨‹ä¸­å®æ—¶é¢„è§ˆï¼Œç”Ÿæˆçš„ä¾§è¾¹æ ä¸æ›´æ”¹æœ¬èº«.mdæ–‡ä»¶ï¼Œé™„å¸¦çš„æ ·å¼å¤ªå¤šã€‚</span><br>ä¾èµ–Nodeç¯å¢ƒï¼Œé€šè¿‡<code>npm install i5ting_toc -g</code>å®‰è£…ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚</p><p>è¾“å…¥<code>i5ting_toc -h</code>å›è½¦æŸ¥çœ‹å¸®åŠ©ã€‚<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562150197.jpg" title="i5ting_toc -h"></p><p>è½¬æ¢htmlï¼Œè¾“å…¥<code>i5ting_toc -f [éœ€è¦è½¬æ¢æ–‡ä»¶å].md</code>é»˜è®¤åœ¨åŒçº§ç›®å½•ç”Ÿæˆ<strong>preview</strong>æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€previewä¸‹çš„åŒå.htmlæ–‡ä»¶æˆ–è€…ç›´æ¥<code>i5ting_toc -o</code>å¯é¢„è§ˆã€‚<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562150452.jpg" title="ç”Ÿæˆpreview"><br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562150862.jpg" title="æµè§ˆå™¨é¢„è§ˆ"></p><h3 id="2-3-VisualStudio-Codeæ’ä»¶"><a href="#2-3-VisualStudio-Codeæ’ä»¶" class="headerlink" title="2.3 VisualStudio Codeæ’ä»¶"></a>2.3 VisualStudio Codeæ’ä»¶</h3><p>éœ€è¦å…ˆ<a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener">å®‰è£…VisualStudio Code</a>ã€‚å³é”®.mdé€‰æ‹©æ‰“å¼€æ–¹å¼ä¸ºVisualStudio Codeã€‚ä¸‹è½½æ’ä»¶è½¬æ¢ã€‚<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562143385.jpg" title="æ’ä»¶ä¸‹è½½"></p><h4 id="æ’ä»¶1ï¼šcopy-Markdown-as-HTML"><a href="#æ’ä»¶1ï¼šcopy-Markdown-as-HTML" class="headerlink" title="æ’ä»¶1ï¼šcopy Markdown as HTML"></a>æ’ä»¶1ï¼šcopy Markdown as HTML</h4><p><code>Ctrl+Shift+P</code>ï¼ˆMacOSï¼šcmd+shift+pï¼‰å‘¼å‡ºå‘½ä»¤é¢æ¿ã€‚è¾“å…¥<code>markdown:copy as html</code>é€‰ä¸­ï¼Œå¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œæ–°å»ºä¸€ä¸ª.htmlæ–‡ä»¶ï¼Œç²˜è´´ä¿®æ”¹ã€‚<strong>è½¬æ¢ç»“æœæ¯”è¾ƒç†æƒ³ï¼Œæ¸²æŸ“éœ€æ›´æ”¹</strong></p><h4 id="æ’ä»¶2ï¼šMarkdown-Math"><a href="#æ’ä»¶2ï¼šMarkdown-Math" class="headerlink" title="æ’ä»¶2ï¼šMarkdown+Math"></a>æ’ä»¶2ï¼šMarkdown+Math</h4><p><code>Ctrl+Shift+P</code>ï¼ˆMacOSï¼šcmd+shift+pï¼‰å‘¼å‡ºå‘½ä»¤é¢æ¿ã€‚è¾“å…¥<code>markdown:clip markdown+math to html</code>é€‰ä¸­ï¼ŒåŒæ ·å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ª.htmlæ–‡ä»¶ï¼Œç²˜è´´ä¿®æ”¹ã€‚<strong>è½¬æ¢ç»“æœæ¯”è¾ƒç†æƒ³ï¼Œæ¸²æŸ“éœ€æ›´æ”¹</strong></p><h4 id="æ’ä»¶3ï¼šMarkdown-Preview-Enhanced-ï¼ˆæ¨èï¼‰"><a href="#æ’ä»¶3ï¼šMarkdown-Preview-Enhanced-ï¼ˆæ¨èï¼‰" class="headerlink" title="æ’ä»¶3ï¼šMarkdown Preview Enhanced ï¼ˆæ¨èï¼‰"></a>æ’ä»¶3ï¼šMarkdown Preview Enhanced ï¼ˆæ¨èï¼‰</h4><p>å†ç»åƒè¾›ä¸‡è‹¦ï¼Œå°ç¼–ç»ˆäºæ‰¾åˆ°äº†æ‡’äººçš„ç¦éŸ³ï¼Œå¯ä»¥<strong>ä¸€é”®ç”Ÿæˆç›®å½•ã€è¾“å‡ºhtml/pdf</strong>çš„å¼ºå¤§markdownæ’ä»¶â€“<strong>Markdown Preview Enhanced</strong>ã€‚è¯¦ç»†ç”¨æ³•<a href="https://shd101wyy.github.io/markdown-preview-enhanced/#/zh-cn/" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹å®˜ç½‘</a>ã€‚</p><p>å¤šç§ç‰¹æ€§ï¼š</p><ul><li>è‡ªåŠ¨ç¼–è¾‘å™¨åŠé¢„è§ˆæ»‘åŠ¨åŒæ­¥</li><li>å¯å¯¼å‡ºçš„æ ¼å¼ï¼šæ¼‚äº®çš„htmlã€pandocã€ç”µå­ä¹¦ã€å¹»ç¯ç‰‡ã€PDFã€ PNGã€JPEG ã€‚ã€‚</li><li>æ”¯æŒLaTeX æ•°å­¦ã€æµç¨‹å›¾ / æ—¶åºå›¾ ä»¥åŠå„ç§å…¶ä»–ç§ç±»çš„å›¾å½¢ï¼ŒåµŒå…¥ LaTeX, æ¸²æŸ“ TikZ, Chemfig ç­‰å›¾å½¢</li><li>æ”¯æŒè‡ªå®šä¹‰é¢„è§ˆ CSS</li><li>ç”Ÿæˆç›®å½•ã€‚ï¼ˆTOC ç”Ÿæˆï¼‰</li><li>â€¦</li></ul><p>è¿™é‡Œå°ç¼–ä»‹ç»ä¸€ä¸‹ç›®å½•ç”ŸæˆåŠè¾“å‡ºhtmlã€‚<br>é¦–å…ˆå®‰è£…æ’ä»¶ï¼šç‚¹å‡»ä¾§è¾¹æ æœ€åä¸€ä¸ª<strong>Extensions</strong>ï¼Œåœ¨æœç´¢æ¡†è¾“å…¥<strong>Markdown Preview Enhanced</strong>ï¼Œç‚¹å‡»<strong>Install</strong>ç­‰å¾…å®‰è£…å®Œæˆã€‚<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562145483.jpg" title="å®‰è£…æ’ä»¶"></p><p>æ‰“å¼€éœ€è¦è½¬æ¢çš„.mdæ–‡ä»¶ï¼Œå³é”®é€‰æ‹©æ‰“å¼€åŒæ­¥é¢„è§ˆã€‚<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562147451.jpg" title="æ‰“å¼€åŒæ­¥é¢„è§ˆ"></p><p>ç”Ÿæˆç›®å½•ï¼š<a href="https://shd101wyy.github.io/markdown-preview-enhanced/#/zh-cn/toc" target="_blank" rel="noopener">è¯¦ç»†è®²è§£</a> å…‰æ ‡æ”¾ç½®æƒ³è¦ç”Ÿæˆç›®å½•çš„è¾“å‡ºä½ç½®ï¼Œ<code>Ctrl+Shift+P</code>ï¼ˆMacOSï¼šcmd+shift+pï¼‰å‘¼å‡ºå‘½ä»¤é¢æ¿ï¼Œè¾“å…¥<strong>Markdown Preview Enhanced: Create Toc</strong>ä¼šç”Ÿæˆä¸€æ®µç±»ä¼¼<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562147864.jpg" title="ç›®å½•ä¸´æ—¶"><br>ç„¶åCtrl+sä¿å­˜ï¼Œå°±ä¼šç”Ÿæˆç›®å½•ã€‚<span id="inline-blue">æ³¨æ„ï¼šå¿…é¡»è¦åœ¨é¢„è§ˆæ‰“å¼€çš„æƒ…å†µä¸‹ç”Ÿæˆæ“ä½œï¼Œä¿å­˜æ‰èƒ½æ›´æ–°ã€‚</span></p><p>è¾“å‡ºhtmlï¼šåœ¨å³ä¾§çš„é¢„è§ˆç•Œé¢ï¼Œå³é”®ç‚¹å‡»é€‰æ‹©<code>HTML-&gt;HTML(offline)</code>ã€‚åœ¨å½“å‰.mdæ–‡ä»¶çš„åŒçº§ç›®å½•ä¼šç”Ÿæˆä¸€ä¸ªåŒå.htmlæ–‡ä»¶ï¼Œè§£ææ¸²æŸ“éƒ½ç†æƒ³~<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/1562148417.jpg" title="è¾“å‡ºhtml"></p><p>â€”â€”â€”â€”â€”â€”æœ¬æ–‡ç»“æŸâ€”â€”â€”â€”â€”â€”</p><p>ç”Ÿæˆçš„htmlæ˜¯ä½ æƒ³è¦çš„æ ·å¼å—ï¼Ÿæˆ–è€…ä½ æœ‰æ›´å¥½çš„æ–¹æ³•æ¬¢è¿è”ç³»æˆ‘</p><p>æ›´å¤šå¥½æ–‡æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<br><img src="/markdownè½¬htmlã€pdf-å¸¦ç›®å½•ç”Ÿæˆ/wx_subscription.jpg" title="æˆ‘çš„å…¬ä¼—å·"></p>]]></content>
    
    <summary type="html">
    
      &lt;p id=&quot;div-border-top-purple&quot;&gt;æœ€è¿‘å°ç¼–éœ€è¦å†™ä¸ªSDKæ¥å…¥æ–‡æ¡£ï¼Œç”¨wordè°ƒæ ¼å¼å½“ç„¶ä¸å¦‚markdownæ¥çš„èˆ’æœï¼Œå†™èµ·æ¥èˆ’æœäº†ï¼Œä½†æ˜¯.mdæ²¡åŠæ³•ç›´æ¥çœ‹æ•ˆæœï¼Œæœ€ç»ˆèŒç”Ÿå‡ºæŠŠmarkdownè½¬æˆhtmlå½¢å¼çš„æƒ³æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ç½‘ä¸Šmarkdownè½¬æ¢htmlçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬åœ¨çº¿è½¬æ¢å’Œå€ŸåŠ©å·¥å…·ï¼Œæœ€ç»ˆå°ç¼–é€‰æ‹©äº†&lt;strong&gt;VisualStudio Codeçš„æ’ä»¶Markdown Preview Enhanced&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›®å½•&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1åœ¨çº¿è½¬æ¢çš„ç½‘ç«™&quot;&gt; 1.åœ¨çº¿è½¬æ¢çš„ç½‘ç«™
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2å€ŸåŠ©å·¥å…·&quot;&gt; 2.å€ŸåŠ©å·¥å…·
&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#21-typora&quot;&gt; 2.1 typora
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#22-i5ting_toc&quot;&gt; 2.2 i5ting_toc
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#23-visualstudio-codeæ’ä»¶&quot;&gt; 2.3 VisualStudio Codeæ’ä»¶
&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#æ’ä»¶1copy-markdown-as-html&quot;&gt; æ’ä»¶1ï¼šcopy Markdown as HTML
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#æ’ä»¶2markdownmath&quot;&gt; æ’ä»¶2ï¼šMarkdown+Math
&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#æ’ä»¶3markdown-preview-enhanced-æ¨è&quot;&gt; æ’ä»¶3ï¼šMarkdown Preview Enhanced ï¼ˆæ¨èï¼‰ 
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hexo--GitHub Pageséƒ¨ç½²</title>
    <link href="https://sunflowercoder.com/Hexo-GitHub-Pages%E9%83%A8%E7%BD%B2/"/>
    <id>https://sunflowercoder.com/Hexo-GitHub-Pageséƒ¨ç½²/</id>
    <published>2019-03-22T11:08:16.000Z</published>
    <updated>2019-03-26T10:42:08.973Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>éƒ¨ç½²åˆ°GitHub Pagesè¯·å…ˆå‡†å¤‡ä¸€ä¸ªGitHubè´¦å·ï¼Œæ²¡æœ‰çš„è¯ï¼Œå‡ºé—¨å³è½¬æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š<a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a>  Sign Upå¼€å§‹æ³¨å†Œ</p></blockquote><p>æœ‰Gitè´¦å·çš„å‡†å¤‡æ–°å»ºä»“åº“ï¼š<a href="https://github.com/new" target="_blank" rel="noopener">https://github.com/new</a></p><p><code>Repository name</code><span id="inline-blue">å»ºè®®</span>å¡«è‡ªå·±ç”¨æˆ·å<code>Owner</code>å¸¦ä¸Š<code>.github.io</code></p><a id="more"></a><img src="/Hexo-GitHub-Pageséƒ¨ç½²/git_new_repo.png" title="æ–°å»ºä»“åº“"><p><strong>æ³¨æ„ä¸¤ç‚¹</strong>ï¼š</p><ul><li><p>ä»“åº“åä¸º<code>[Owner].github.io</code>æ—¶æ‰å¯ä»¥é€šè¿‡<code>https://[Owner].github.io</code>è®¿é—®ï¼Œå¦‚æœä¸æ˜¯åˆ™éœ€è¦æŒ‰ç…§åŸæ¥çš„ä»“åº“å½¢å¼ï¼Œ<br>å³Gitåœ°å€+ç”¨æˆ·å+ä»“åº“å</p></li><li><p>ä»“åº“æƒé™å¿…é¡»ä¸º<code>Public</code></p></li></ul><p>åœ¨Hexo<span id="inline-green">é¡¹ç›®é…ç½®æ–‡ä»¶</span>_config.ymlä¸­ï¼Œæ‹‰åˆ°åº•éƒ¨ï¼Œæ‰¾åˆ°<code>deploy</code>é…ç½®å­—æ®µï¼Œ<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repository:</span> <span class="comment">#å‰é¢åˆ›å»ºçš„ä»“åº“åœ°å€</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">  message:</span> <span class="comment">#æè¿°</span></span><br></pre></td></tr></table></figure></p><img src="/Hexo-GitHub-Pageséƒ¨ç½²/git_deploy.png" title="éƒ¨ç½²é…ç½®"><p>è¿è¡Œ<code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy</code>ï¼Œæ²¡è®¾ç½®å…¨å±€ç”¨æˆ·åçš„å¯èƒ½éœ€è¦è¾“å…¥Gitç”¨æˆ·åå¯†ç ã€‚</p><p>ç­‰å¾…ä¸€æ®µæ—¶é—´~ å®Œæˆååœ¨ä»“åº“çš„<strong>Settings</strong>ä¸­ï¼Œé…ç½®<strong>Source</strong>ä¸º<strong>master branch</strong>å°±èƒ½é€šè¿‡<code>https://[Owner].github.io</code>è®¿é—®å•¦~<br><img src="/Hexo-GitHub-Pageséƒ¨ç½²/git_pages.png" title="GitHub Pagesé…ç½®"></p><p id="div-border-top-purple"><strong>é…ç½®åŸŸåè®¿é—®</strong><br>åœ¨è…¾è®¯äº‘åŸŸåï¼ˆ<a href="https://www.qcloud.com/act/event/dnspod_baidu?!preview" target="_blank" rel="noopener">https://www.qcloud.com/act/event/dnspod_baidu?!preview</a> ï¼‰æˆ–é˜¿é‡Œäº‘åŸŸåï¼ˆ<a href="https://wanwang.aliyun.com/domain/?spm=a2c4g.11174283.2.1.789dc8caQX0KM1" target="_blank" rel="noopener">https://wanwang.aliyun.com/domain/?spm=a2c4g.11174283.2.1.789dc8caQX0KM1</a> ï¼‰è´­ä¹°ä¸€ä¸ªåŸŸå<br>ç™»é™†ç®¡ç†åå°ï¼Œé…ç½®<strong>äº‘è§£æ</strong>ï¼Œæ·»åŠ è®°å½•å°†æƒ³è¦çš„å‰ç¼€é…ç½®<strong>CNAME</strong>è§„åˆ™åˆ°gitåŸŸå<code>[Owner].github.io</code><br>åœ¨ä»“åº“çš„<strong>Settings</strong>ä¸­GitHub Pagesçš„<strong>Custom domain</strong>å¡«å…¥é…ç½®çš„å‰ç¼€+åŸŸåå³å¯ã€‚<br><strong>Enforce HTTPS</strong>ä¼šå¼ºåˆ¶åŸŸåè®¿é—®çš„æ—¶å€™ä¹Ÿæ˜¯é€šè¿‡httpsã€‚<br></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;éƒ¨ç½²åˆ°GitHub Pagesè¯·å…ˆå‡†å¤‡ä¸€ä¸ªGitHubè´¦å·ï¼Œæ²¡æœ‰çš„è¯ï¼Œå‡ºé—¨å³è½¬æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š&lt;a href=&quot;https://github.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/&lt;/a&gt;  Sign Upå¼€å§‹æ³¨å†Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ‰Gitè´¦å·çš„å‡†å¤‡æ–°å»ºä»“åº“ï¼š&lt;a href=&quot;https://github.com/new&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/new&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Repository name&lt;/code&gt;&lt;span id=&quot;inline-blue&quot;&gt;å»ºè®®&lt;/span&gt;å¡«è‡ªå·±ç”¨æˆ·å&lt;code&gt;Owner&lt;/code&gt;å¸¦ä¸Š&lt;code&gt;.github.io&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://sunflowercoder.com/categories/Hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo--åšå®¢æ­å»º</title>
    <link href="https://sunflowercoder.com/Hexo--%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>https://sunflowercoder.com/Hexo--åšå®¢æ­å»º/</id>
    <published>2019-03-22T08:38:05.000Z</published>
    <updated>2019-08-07T03:36:50.112Z</updated>
    
    <content type="html"><![CDATA[<p id="div-border-top-purple">æœ¬ç«™çš„åšå®¢æ­å»ºé‡‡ç”¨<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a>+<a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT</a>ä¸»é¢˜ï¼Œéƒ¨ç½²åœ¨<code>GitHub Pages</code>ã€‚<br>ä¸‹é¢æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºå…è´¹é«˜æ•ˆçš„åšå®¢ç³»ç»Ÿ~<br></p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>Hexo</code>â€“å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼ŒåŸºäº<a href="https://nodejs.org/en/" target="_blank" rel="noopener">NodeJS</a>ç¯å¢ƒã€‚</p><p><ul><li><div><div><i class="fa fa-bolt"> è¶…å¿«é€Ÿåº¦</i></div><p><code>Node.js</code> æ‰€å¸¦æ¥çš„è¶…å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œè®©ä¸Šç™¾ä¸ªé¡µé¢åœ¨å‡ ç§’å†…ç¬é—´å®Œæˆæ¸²æŸ“ã€‚</p></div></li><li><div><div><i class="fa fa-pencil"></i> æ”¯æŒ <code>Markdown</code></div><p>Hexo æ”¯æŒ <code>GitHub Flavored Markdown</code> çš„æ‰€æœ‰åŠŸèƒ½ï¼Œç”šè‡³å¯ä»¥æ•´åˆ <code>Octopress</code> çš„å¤§å¤šæ•°æ’ä»¶ã€‚</p></div></li><li><div><div><i class="fa fa-cloud-upload"></i> ä¸€é”®éƒ¨ç½²</div><p>åªéœ€ä¸€æ¡æŒ‡ä»¤å³å¯éƒ¨ç½²åˆ° <code>GitHub Pages</code>, <code>Heroku</code> æˆ–å…¶ä»–ç½‘ç«™ã€‚</p></div></li><li><div><div><i class="fa fa-cog"></i> ä¸°å¯Œçš„æ’ä»¶</div><p class="intro-feature-desc">Hexo æ‹¥æœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œå®‰è£…æ’ä»¶å¯ä»¥è®© Hexo æ”¯æŒ <code>Jade</code>, <code>CoffeeScript</code>ã€‚</p></div></li></ul><br><code>Hexo</code> ä½¿ç”¨ <code>Markdown</code>ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p><a id="more"></a><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®‰è£…å‰æï¼š</p><ul><li><code>NodeJS</code>ç¯å¢ƒï¼š<a href="https://nodejs.org/en/" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a> </li><li><code>Git</code>ï¼š<a href="https://git-scm.com/download/win" target="_blank" rel="noopener">Windows</a> | <a href="https://sourceforge.net/projects/git-osx-installer/" target="_blank" rel="noopener">Mac</a></li></ul><p>å®‰è£…Hexoï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p><blockquote><p>å…·ä½“çš„å®‰è£…è¿‡ç¨‹çš„é—®é¢˜ï¼Œè¿™é‡Œä¸å†è¿‡å¤šæåŠã€‚å®˜æ–¹å®‰è£…æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a></p></blockquote><h2 id="å»ºç«™"><a href="#å»ºç«™" class="headerlink" title="å»ºç«™"></a>å»ºç«™</h2><p>æ–°å»ºæ–‡ä»¶å¤¹åˆ›å»ºé¡¹ç›®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></p><p>è‹¥éœ€è¦åœ¨å½“å‰æ–‡ä»¶å¤¹ç›´æ¥åˆ›å»ºï¼Œåœ¨å½“å‰ç›®å½•ä¸‹<code>hexo init</code>ã€‚</p><p>Hexoé¡¹ç›®ç›®å½•ç»“æ„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure></p><p><code>_config.yml</code>ï¼šç½‘ç«™çš„é…ç½®ä¿¡æ¯ã€‚å®˜æ–¹é…ç½®æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/docs/configuration" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/configuration</a> ã€‚</p><p><code>package.json</code>ï¼šåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚</p><p><code>scaffolds</code>ï¼š<strong>æ¨¡ç‰ˆ</strong>æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ®scaffoldæ¥å»ºç«‹æ–‡ä»¶ã€‚å®˜æ–¹æ¨¡æ¿é…ç½®æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/docs/templates" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/templates</a></p><p><code>source</code>ï¼š<strong>èµ„æº</strong>æ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ <code>_posts</code> æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚</p><p><code>themes</code>ï¼š<strong>ä¸»é¢˜</strong>æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</p><p id="div-border-top-green">é¡¹ç›®ä¸‹çš„<code>_config.yml</code>ä¸º<strong>é¡¹ç›®é…ç½®æ–‡ä»¶</strong>ï¼Œä¸»é¢˜ä¸‹çš„<code>_config.yml</code>ä¸º<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong>ã€‚<br></p><p>æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate &amp;&amp; hexo server --debug</span><br></pre></td></tr></table></figure></p><p>å³å¯åœ¨æœ¬åœ°<a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> æŸ¥çœ‹é»˜è®¤çš„ç½‘ç«™æ ·å¼å•¦~</p><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><h3 id="æ–°å»ºç½‘ç«™é¡¹ç›®"><a href="#æ–°å»ºç½‘ç«™é¡¹ç›®" class="headerlink" title="æ–°å»ºç½‘ç«™é¡¹ç›®"></a>æ–°å»ºç½‘ç«™é¡¹ç›®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init [folder]</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰è®¾ç½® folder ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™ã€‚</p><h3 id="æ–°å»ºæ–‡ç« "><a href="#æ–°å»ºæ–‡ç« " class="headerlink" title="æ–°å»ºæ–‡ç« "></a>æ–°å»ºæ–‡ç« </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰è®¾ç½® <code>layout</code> çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ ç½‘ç«™é…ç½®<code>_config.yml</code> ä¸­çš„ <code>default_layout</code> å‚æ•°ä»£æ›¿ã€‚</p><p><strong>å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</strong></p><p>ä¹Ÿå¯ä»¥ç®€å†™ï¼š<code>hexo n [layout] &lt;title&gt;</code></p><h3 id="ç”Ÿæˆé™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶"></a>ç”Ÿæˆé™æ€æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure><ul><li>-d, â€“deploy    æ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™</li><li>-w, â€“watch    ç›‘è§†æ–‡ä»¶å˜åŠ¨</li></ul><p>ä¹Ÿå¯ä»¥ç®€å†™ï¼š<code>hexo g</code></p><h3 id="æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨"><a href="#æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨"></a>æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š <a href="http://localhost:4000/ã€‚" target="_blank" rel="noopener">http://localhost:4000/ã€‚</a></p><ul><li>-p, â€“port    é‡è®¾ç«¯å£</li><li>-s, â€“static    åªä½¿ç”¨é™æ€æ–‡ä»¶</li><li>-l, â€“log    å¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼</li></ul><p>ä¹Ÿå¯ä»¥ç®€å†™ï¼š<code>hexo s</code></p><h3 id="çº¿ä¸Šéƒ¨ç½²"><a href="#çº¿ä¸Šéƒ¨ç½²" class="headerlink" title="çº¿ä¸Šéƒ¨ç½²"></a>çº¿ä¸Šéƒ¨ç½²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><ul><li>-g, â€“generate    éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶</li></ul><p>ä¹Ÿå¯ä»¥ç®€å†™ï¼š<code>hexo d</code></p><p>éƒ¨ç½²åˆ°<code>GitHub Pages</code>è¯·çœ‹<a href="../../Hexo-GitHub-Pageséƒ¨ç½²/">è¿™ç¯‡æ–‡ç« </a>~</p><h3 id="æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶"><a href="#æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶" class="headerlink" title="æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶"></a>æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚</p><p>åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚</p><p>æ›´æ”¹é…ç½®æ–‡ä»¶<code>_config.yml</code>åéœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ä¸ç„¶å¯èƒ½ä¼šæŠ¥<code>Unhandled rejection Error: ENOENT: no such file or directory, open &#39;**&#39;</code>ã€‚</p><h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><p>Hexoçš„é»˜è®¤ä¸»é¢˜æ˜¯<code>landscape</code>ï¼Œå®˜æ–¹æ¨èä¸»é¢˜ï¼š<a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a></p><p>æœ¬åšå®¢ç½‘ç«™ä½¿ç”¨çš„ä¸»é¢˜æ˜¯<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">NexT.Pisces</a><br>å¦‚éœ€è¦v6åŠä»¥ä¸Šçš„ï¼Œè¯·çœ‹æ–°ä»“åº“<a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">https://github.com/theme-next/hexo-theme-next</a></p><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å…ˆä»gitå°†ä¸»é¢˜æ‹‰ä¸‹æ¥ï¼Œåœ¨é¡¹ç›®ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p><p>åœ¨<strong>é¡¹ç›®é…ç½®æ–‡ä»¶</strong><code>_config.yml</code>ä¸­æŸ¥æ‰¾<code>theme</code>ï¼Œä¿®æ”¹å€¼ä¸º<code>theme: next</code>ã€‚ï¼ˆæ³¨æ„nextå‰çš„ç©ºæ ¼å“¦ï¼‰</p><p>ç„¶å<code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debug</code>å°±èƒ½çœ‹è§nextä¸»é¢˜çš„é»˜è®¤æ ·å¼å•¦</p><p>é€‰æ‹©NexT.Pisceséœ€è¦åœ¨<code>themes/next</code>ä¸‹çš„<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong><code>_config.yml</code>ä¸­æŸ¥æ‰¾<code>scheme</code>ï¼Œä¿®æ”¹å€¼ä¸º<code>scheme: Pisces</code>å†è¿è¡Œä¸Šé¢çš„é‡æ–°å¯åŠ¨ï¼Œ<br>å°±èƒ½çœ‹åˆ°æ ·å¼å•¦</p><p><span id="inline-green">å®‰è£…Hexoå’ŒNextä¸»é¢˜åˆ°æ­¤å°±ç»“æŸå•¦~</span></p><h2 id="è¦è¯´çš„è¯"><a href="#è¦è¯´çš„è¯" class="headerlink" title="è¦è¯´çš„è¯"></a>è¦è¯´çš„è¯</h2><p>å»ºè®®åœ¨é¡¹ç›®ä¸‹<code>package.json</code>ä¸­é…ç½®å¼€å‘è¿è¡Œè„šæœ¬å’Œéƒ¨ç½²è„šæœ¬ï¼Œåœ¨æœ€å¤–å±‚jsonä¸­æ·»åŠ ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "dev": "hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debug",</span><br><span class="line">    "start": "hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy"</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>ä»¥åå¼€å‘è¿è¡Œ<code>npm run dev</code>å°±å¥½å•¦ã€‚çº¿ä¸Šéƒ¨ç½²ä½¿ç”¨<code>npm run start</code>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p id=&quot;div-border-top-purple&quot;&gt;æœ¬ç«™çš„åšå®¢æ­å»ºé‡‡ç”¨&lt;a href=&quot;https://hexo.io/zh-cn/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;+&lt;a href=&quot;http://theme-next.iissnan.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;NexT&lt;/a&gt;ä¸»é¢˜ï¼Œéƒ¨ç½²åœ¨&lt;code&gt;GitHub Pages&lt;/code&gt;ã€‚&lt;br&gt;ä¸‹é¢æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºå…è´¹é«˜æ•ˆçš„åšå®¢ç³»ç»Ÿ~&lt;br&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Hexo&lt;/code&gt;â€“å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼ŒåŸºäº&lt;a href=&quot;https://nodejs.org/en/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;NodeJS&lt;/a&gt;ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;&lt;div&gt;&lt;i class=&quot;fa fa-bolt&quot;&gt; è¶…å¿«é€Ÿåº¦&lt;/i&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Node.js&lt;/code&gt; æ‰€å¸¦æ¥çš„è¶…å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œè®©ä¸Šç™¾ä¸ªé¡µé¢åœ¨å‡ ç§’å†…ç¬é—´å®Œæˆæ¸²æŸ“ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;&lt;div&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; æ”¯æŒ &lt;code&gt;Markdown&lt;/code&gt;&lt;/div&gt;&lt;p&gt;Hexo æ”¯æŒ &lt;code&gt;GitHub Flavored Markdown&lt;/code&gt; çš„æ‰€æœ‰åŠŸèƒ½ï¼Œç”šè‡³å¯ä»¥æ•´åˆ &lt;code&gt;Octopress&lt;/code&gt; çš„å¤§å¤šæ•°æ’ä»¶ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;&lt;div&gt;&lt;i class=&quot;fa fa-cloud-upload&quot;&gt;&lt;/i&gt; ä¸€é”®éƒ¨ç½²&lt;/div&gt;&lt;p&gt;åªéœ€ä¸€æ¡æŒ‡ä»¤å³å¯éƒ¨ç½²åˆ° &lt;code&gt;GitHub Pages&lt;/code&gt;, &lt;code&gt;Heroku&lt;/code&gt; æˆ–å…¶ä»–ç½‘ç«™ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div&gt;&lt;div&gt;&lt;i class=&quot;fa fa-cog&quot;&gt;&lt;/i&gt; ä¸°å¯Œçš„æ’ä»¶&lt;/div&gt;&lt;p class=&quot;intro-feature-desc&quot;&gt;Hexo æ‹¥æœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œå®‰è£…æ’ä»¶å¯ä»¥è®© Hexo æ”¯æŒ &lt;code&gt;Jade&lt;/code&gt;, &lt;code&gt;CoffeeScript&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;code&gt;Hexo&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;Markdown&lt;/code&gt;ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://sunflowercoder.com/categories/Hexo/"/>
    
    
  </entry>
  
  <entry>
    <title>Scrapydä½¿ç”¨è¯¦è§£</title>
    <link href="https://sunflowercoder.com/scrapyd%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/"/>
    <id>https://sunflowercoder.com/scrapydä½¿ç”¨è¯¦è§£/</id>
    <published>2019-03-13T08:54:45.000Z</published>
    <updated>2019-07-26T06:57:13.584Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>Scrapydé€šå¸¸ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œå®ƒä¾¦å¬è¿è¡Œçˆ¬è™«çš„è¯·æ±‚ï¼Œå¹¶ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹åŸºæœ¬ä¸Šæ‰§è¡Œ:<code>scrapy crawl [myspider]</code>ã€‚</p><p>Scrapydè¿˜å¹¶è¡Œè¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œå°†å®ƒä»¬åˆ†é…åˆ°<code>max_proc</code>å’Œ<code>max_proc_per_cpu</code>é€‰é¡¹æä¾›çš„å›ºå®šæ•°é‡çš„æ’æ§½ä¸­ï¼Œå¯åŠ¨å°½å¯èƒ½å¤šçš„è¿›ç¨‹æ¥å¤„ç†è´Ÿè½½ã€‚</p><p>é™¤äº†è°ƒåº¦å’Œç®¡ç†è¿›ç¨‹ä¹‹å¤–ï¼ŒScrapydè¿˜æä¾›äº†ä¸€ä¸ªJSON webæœåŠ¡æ¥ä¸Šè½½æ–°çš„é¡¹ç›®ç‰ˆæœ¬(ä½œä¸ºegg)å’Œè°ƒåº¦çˆ¬è™«ã€‚</p><blockquote><p>Scrapydå®˜æ–¹æ–‡æ¡£ <a href="https://scrapyd.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">https://scrapyd.readthedocs.io/en/latest/index.html</a></p></blockquote><a id="more"></a><h3 id="ä½¿ç”¨è¯¦è§£"><a href="#ä½¿ç”¨è¯¦è§£" class="headerlink" title="ä½¿ç”¨è¯¦è§£"></a>ä½¿ç”¨è¯¦è§£</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapyd</span><br></pre></td></tr></table></figure><p>ä¾èµ–çš„åº“åŠç‰ˆæœ¬ï¼š</p><ul><li>Python 2.7 or above</li><li>Twisted 8.0 or above</li><li>Scrapy 1.0 or above</li><li>six</li></ul><h4 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h4><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œè¾“å…¥<code>scrapyd</code>å³å¯è¿è¡Œï¼Œé»˜è®¤åœ°å€ä¸º<code>http://localhost:6800</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapyd</span><br></pre></td></tr></table></figure></p><blockquote><p>å®˜æ–¹è¯¦ç»†é…ç½®æ–‡æ¡£è¯´æ˜ï¼š<a href="https://scrapyd.readthedocs.io/en/latest/config.html" target="_blank" rel="noopener">https://scrapyd.readthedocs.io/en/latest/config.html</a></p></blockquote><p>ä¿®æ”¹é»˜è®¤é…ç½®ä¿¡æ¯å¯ä»¥åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ª<code>scrapyd.conf</code>æˆ–è€…åœ¨<code>scrapy.cfg</code>ä¸­å¢åŠ <code>[scrapyd]</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[scrapyd]</span><br><span class="line"># ç½‘é¡µå’ŒJsonæœåŠ¡ç›‘å¬çš„IPåœ°å€ï¼Œé»˜è®¤ä¸º127.0.0.1</span><br><span class="line">bind_address = 127.0.0.1</span><br><span class="line"># ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä¸º6800</span><br><span class="line">http_port   = 6800</span><br><span class="line">debug       = off</span><br></pre></td></tr></table></figure></p><h4 id="é¡¹ç›®éƒ¨ç½²"><a href="#é¡¹ç›®éƒ¨ç½²" class="headerlink" title="é¡¹ç›®éƒ¨ç½²"></a>é¡¹ç›®éƒ¨ç½²</h4><p>éƒ¨ç½²ä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>å°†é¡¹ç›®æ‰“åŒ…æˆ<code>egg</code></li><li>å°†<code>egg</code>é€šè¿‡Scrapydçš„<code>addversion.json</code>æ¥å£ä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨</li></ul><p>å®˜æ–¹çš„éƒ¨ç½²ä¸Šä¼ æ¥å£æ–‡æ¡£ï¼š<a href="https://scrapyd.readthedocs.io/en/latest/api.html#addversion-json" target="_blank" rel="noopener">https://scrapyd.readthedocs.io/en/latest/api.html#addversion-json</a></p><p>æ¨èä½¿ç”¨<code>Scrapyd-client</code>ä¸­çš„<a href="https://github.com/scrapy/scrapyd-client#scrapyd-deploy" target="_blank" rel="noopener">scrapyd-deploy</a>ä¸€æ­¥ä¸Šä¼ ï¼Œå…³äº<code>Scrapyd-client</code>ä»‹ç»ï¼š</p><blockquote><p>Scrapyd-client is a client for Scrapyd. It provides the general scrapyd-client and the scrapyd-deploy utility which allows you to deploy your project to a Scrapyd server.</p></blockquote><h5 id="Scrapy-clientå®‰è£…"><a href="#Scrapy-clientå®‰è£…" class="headerlink" title="Scrapy-clientå®‰è£…"></a>Scrapy-clientå®‰è£…</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapyd-client</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;Scrapydé€šå¸¸ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œå®ƒä¾¦å¬è¿è¡Œçˆ¬è™«çš„è¯·æ±‚ï¼Œå¹¶ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹åŸºæœ¬ä¸Šæ‰§è¡Œ:&lt;code&gt;scrapy crawl [myspider]&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Scrapydè¿˜å¹¶è¡Œè¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œå°†å®ƒä»¬åˆ†é…åˆ°&lt;code&gt;max_proc&lt;/code&gt;å’Œ&lt;code&gt;max_proc_per_cpu&lt;/code&gt;é€‰é¡¹æä¾›çš„å›ºå®šæ•°é‡çš„æ’æ§½ä¸­ï¼Œå¯åŠ¨å°½å¯èƒ½å¤šçš„è¿›ç¨‹æ¥å¤„ç†è´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è°ƒåº¦å’Œç®¡ç†è¿›ç¨‹ä¹‹å¤–ï¼ŒScrapydè¿˜æä¾›äº†ä¸€ä¸ªJSON webæœåŠ¡æ¥ä¸Šè½½æ–°çš„é¡¹ç›®ç‰ˆæœ¬(ä½œä¸ºegg)å’Œè°ƒåº¦çˆ¬è™«ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Scrapydå®˜æ–¹æ–‡æ¡£ &lt;a href=&quot;https://scrapyd.readthedocs.io/en/latest/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://scrapyd.readthedocs.io/en/latest/index.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Scrapy" scheme="https://sunflowercoder.com/categories/Scrapy/"/>
    
    
      <category term="Scrapyçº¿ä¸Šéƒ¨ç½²" scheme="https://sunflowercoder.com/tags/Scrapy%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2/"/>
    
      <category term="Scrapyd" scheme="https://sunflowercoder.com/tags/Scrapyd/"/>
    
  </entry>
  
</feed>
