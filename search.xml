<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Centos7é˜²ç«å¢™è®¾ç½®]]></title>
    <url>%2F2019%2F08%2F05%2FCentos7%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[CentOS 7ä¸­ä½¿ç”¨çš„é˜²ç«å¢™ä¸ºfirewallï¼Œåœ¨CentOS 6.5ä¸­åœ¨iptablesé˜²ç«å¢™ä¸­è¿›è¡Œäº†å‡çº§äº†ã€‚ ç”¨äºŽå®žçŽ°æŒä¹…çš„ç½‘ç»œæµé‡è§„åˆ™ã€‚ å¯ä»¥åŠ¨æ€ä¿®æ”¹å•æ¡è§„åˆ™ï¼ŒåŠ¨æ€ç®¡ç†è§„åˆ™é›†ï¼Œå…è®¸æ›´æ–°è§„åˆ™è€Œä¸ç ´åçŽ°æœ‰ä¼šè¯å’Œè¿žæŽ¥ ä½¿ç”¨åŒºåŸŸ(zone)å’ŒæœåŠ¡(service) é»˜è®¤æ˜¯æ‹’ç»çš„ï¼Œéœ€è¦è®¾ç½®ä»¥åŽæ‰èƒ½æ”¾è¡Œ CentOS 7æ”¾è¡Œç«¯å£éœ€è¦åœ¨äº‘æœåŠ¡å™¨ç®¡ç†åŽå°å’ŒæœåŠ¡å™¨firewallåŒæ—¶è®¾ç½®æ‰æœ‰æ•ˆï¼æ³¨æ„é»˜è®¤å…¨éƒ¨æ‹’ç»ï¼ç®¡ç†åŽå°é€šè¿‡æƒé™ç»„æ·»åŠ è§„åˆ™ã€‚ é…ç½®ç›®å½•/usr/lib/firewalld/services ç›®å½•ä¸­å­˜æ”¾å®šä¹‰å¥½çš„ç½‘ç»œæœåŠ¡å’Œç«¯å£å‚æ•°ï¼Œç³»ç»Ÿå‚æ•°ã€‚é…ç½®æ—¶å¼•ç”¨æœåŠ¡åç§° /etc/firewalld/ä¸ºé…ç½®ç›®å½•ï¼Œä½¿ç”¨åŒºåŸŸåœ¨zonesä¸‹ å¸¸ç”¨å‘½ä»¤firewall-cmdï¼šæ˜¯Linuxæä¾›çš„æ“ä½œfirewallçš„ä¸€ä¸ªå·¥å…·ã€‚ ï¼ˆ1ï¼‰firewalldæœåŠ¡å¯åŠ¨ã€å…³é—­ã€é‡å¯ï¼Œè®¾ç½®å¼€æœºè‡ªå¯1234567891011121314151617# å¯åŠ¨systemctl start firewalld # å…³é—­systemctl stop firewalld # é‡å¯systemctl restart firewalld # å¼€æœºå¯åŠ¨ systemctl enable firewalld # å–æ¶ˆå¼€æœºå¯åŠ¨systemctl disable firewalld # æŸ¥çœ‹æ˜¯å¦å¼€æœºè‡ªå¯systemctl is-enabled firewalld ï¼ˆ2ï¼‰æ·»åŠ ç«¯å£/æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼æ·»åŠ ç«¯å£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤çš„æ–¹å¼æ·»åŠ ç«¯å£ï¼Œæ³¨æ„ï¼Œä¿®æ”¹çš„å†…å®¹ä¼šåœ¨/etc/firewalld/ ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­è¿˜ä½“çŽ°ã€‚ä¾‹å¦‚åœ¨publicåŒºåŸŸæ·»åŠ tcpç«¯å£80201firewall-cmd --zone=public --permanent --add-port=8010/tcp â€“permanentï¼šè¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…ï¼› â€“add-portï¼šæ ‡è¯†æ·»åŠ çš„ç«¯å£ï¼› å¯ä»¥åœ¨/etc/firewalld/zones/public.xmlä¸­çœ‹è§å·²ç»æ·»åŠ æˆåŠŸã€‚ è¿™ä¸ªé…ç½®æ–‡ä»¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ï¼Œå¦‚æ·»åŠ æœåŠ¡123vi /etc/firewalld/zones/public.xmliåŠ å…¥ &lt;service name=&quot;mysql&quot;/&gt; ä¹Ÿå¯ä»¥é€šè¿‡--add-serviceæ·»åŠ ï¼Œ1firewall-cmd --permanent --zone=public --add-service=mysql é‡è½½å¯ç”Ÿæ•ˆfirewall-cmd --reloadã€‚ ï¼ˆ3ï¼‰æŸ¥çœ‹è§„åˆ™1firewall-cmd --list-all ï¼ˆ4ï¼‰å…¶å®ƒ1234567891011121314151617181920# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€firewall-cmd --state # æŸ¥çœ‹é»˜è®¤çš„åŸŸfirewall-cmd --get-default-zone# æŸ¥çœ‹æ‰€æœ‰çš„åŸŸfirewall-cmd --get-zones# æŸ¥çœ‹æ‰€æœ‰åŸŸçš„ä¿¡æ¯firewall-cmd --list-all-zones# æŸ¥çœ‹æŒ‡å®šåŸŸçš„ä¿¡æ¯firewall-cmd --zone=public --list-all# æŸ¥çœ‹å¯ä»¥æ·»åŠ çš„æœåŠ¡firewall-cmd --get-services# è®¾ç½®æŒ‡å®šåŸŸä¸ºé»˜è®¤åŸŸfirewall-cmd --set-default-zone=public]]></content>
      <tags>
        <tag>CentOS7</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Centos 7åˆ©ç”¨yumå®‰è£…apache+mysql 8+php7 ä¸€ç¯‡æžå®šï¼]]></title>
    <url>%2F2019%2F08%2F04%2FCentos-7%E5%88%A9%E7%94%A8yum%E5%AE%89%E8%A3%85apache-mysql-8-php7%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»äº†centos7åˆ©ç”¨yumé…ç½®phpçŽ¯å¢ƒçš„è¯¦ç»†æ­¥éª¤ï¼Œå¸¦ä½ è¿‡å‘~å®‰è£…çš„mysqlç‰ˆæœ¬ä¸ºVer 8.0.17 for Linux on x86_64 (MySQL Community Server - GPL)å®‰è£…çš„phpç‰ˆæœ¬ä¸ºPHP 7.0.33 ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¤åˆ¶codeï¼Œæœ¬ç¯‡æ–‡ç« å…³é—­å¤åˆ¶è‡ªåŠ¨è¿½åŠ ç‰ˆæƒã€‚ mysqlå®‰è£…1. æ¸…ç†åŽŸæ¥çš„mysqlæ–‡ä»¶(1)æŸ¥çœ‹æ˜¯å¦æœ‰å·²å®‰è£…çš„mysqlç‰ˆæœ¬1rpm -qa | grep mysql å¯èƒ½çš„æ˜¾ç¤ºï¼šmysql-community-libs-8.0.12-1.el7.x86_64mysql80-community-release-el7-1.noarchmysql-community-client-8.0.12-1.el7.x86_64mysql-community-common-8.0.12-1.el7.x86_64mysql-community-server-8.0.12-1.el7.x86_64 å¦‚æžœæœ‰çš„è¯ï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œåˆ é™¤1yum remove mysql-xxx-xxx- (2)æŸ¥æ‰¾mysqlçš„ç›¸å…³æ–‡ä»¶ï¼ˆå¦‚æœ‰å»ºè®®åˆ é™¤ï¼‰1find / -name mysql (3)æ ¹æ®è‡ªèº«çš„éœ€æ±‚å†³å®šæ˜¯å¦åˆ é™¤mysqlçš„é…ç½®æ–‡ä»¶ä¿¡æ¯1rm -rf /var/lib/mysql (4)æŸ¥æ‰¾å¹¶åˆ é™¤æ•°æ®åº“mariadb1rpm -qa | grep mariadb å¯èƒ½å‡ºçŽ°çš„ç»“æžœmariadb-libs-5.5.56-2.el7.x86_64 å°†æŸ¥æ‰¾å‡ºæ¥çš„ç»“æžœè¿›è¡Œå¼ºåˆ¶åˆ é™¤1rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64 2. ä¸‹è½½å®‰è£…mysql(1)è¿›å…¥mysql yumæºé€‰æ‹©linux7è·³è½¬ï¼Œ ä¸ç®¡loginå’Œsign upï¼Œå³é”®ç‚¹å‡»ä¸‹æ–¹çš„No thanks, just start my download.é€‰æ‹©å¤åˆ¶é“¾æŽ¥åœ°å€ é€‰æ‹©ä¸‹è½½å­˜æ”¾çš„åœ°å€ï¼Œæ¯”å¦‚1cd /usr/local (2)ä½¿ç”¨å¤åˆ¶çš„é“¾æŽ¥åœ°å€yumæºï¼Œå¦‚ https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm1wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm (3)å®‰è£…yumæº1yum localinstall mysql80-community-release-el7-3.noarch.rpm (4)æ›´æ–°yumæº12yum clean allyum makecache (5)å¼€å§‹å®‰è£…MySQL1yum install mysql-community-server (6)å¯åŠ¨MySQL1systemctl start mysqld 3. æ›´æ”¹mysqlé»˜è®¤çš„éšæœºå¯†ç å¯åŠ¨æˆåŠŸåŽå¯ä»¥æŸ¥çœ‹åˆå§‹åŒ–å¯†ç éšæœºç”Ÿæˆçš„1cat /var/log/mysqld.log | grep password ç™»å½•MySQLï¼Œè¾“å…¥åˆšåˆšçš„éšæœºå¯†ç 12mysql -u root -pEnter password: æ›´æ”¹å¯†ç ï¼Œå¯†ç è¦æ±‚å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯æ•°å­—åŠä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼1mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;æ–°å¯†ç &apos;; 4. è¿œç¨‹è¿žæŽ¥è®¾ç½®12mysql&gt; use mysql;mysql&gt; update user set host=&apos;%&apos; where user=&apos;root&apos;; æŽˆæƒç”¨æˆ·åçš„æƒé™ï¼Œèµ‹äºˆä»»ä½•ä¸»æœºè®¿é—®æ•°æ®çš„æƒé™12mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; WITH GRANT OPTION;mysql&gt; FLUSH PRIVILEGES; æ³¨æ„ï¼šcentos7éœ€è¦åœ¨äº‘æœåŠ¡å™¨ç®¡ç†åŽå°å’ŒæœåŠ¡å™¨é˜²ç«å¢™éƒ½è¦å¼€å¯mysqlæœåŠ¡ç«¯å£ï¼Œé»˜è®¤ä¸º3306ï¼Œé˜²ç«å¢™é…ç½®æ–¹å¼æŸ¥çœ‹12firewall-cmd --permanent --zone=public --add-service=mysqlfirewall-cmd --reload å¯é€šè¿‡è¿œç¨‹è¿žæŽ¥å·¥å…·Navicatç­‰è¿žæŽ¥å°è¯•ï¼Œå¦‚è¿žæŽ¥å¤±è´¥2003... unknown error 1006åˆ™ä¸ºé˜²ç«å¢™é—®é¢˜ï¼Œå…¶ä»–é—®é¢˜å¯ä»¥å°è¯•æ›´æ”¹/etc/my.cnfå†é‡å¯1234567[mysqld]# è¡¨ç¤ºå…è®¸ä»»ä½•ä¸»æœºç™»é™†MySQLbind-address = 0.0.0.0port=3306default-authentication-plugin=mysql_native_password apacheå®‰è£…ï¼ˆ1ï¼‰å®‰è£…ä¹‹å‰å…ˆæ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿæ˜¯å¦æœ‰é»˜è®¤å®‰è£…çš„apache1rpm -qa | grep httpd æœ‰çš„è¯ï¼Œåˆ é™¤1rpm -e * * * *(åŒ…å) ï¼ˆ2ï¼‰å®‰è£…1234567891011121314# æ›´æ–°yum update# å®‰è£…å¿…å¤‡çš„åŒ…yum -y install gcc gcc-c++ make# å®‰è£…apacheyum install httpd# apache æœåŠ¡å¼€å¯systemctl start httpd# è®¾ç½®apacheå¼€æœºå¯åŠ¨systemctl enable httpd ï¼ˆ3ï¼‰é…ç½®é˜²ç«å¢™ï¼Œå¼€å¯80ç«¯å£ã€‚æ³¨æ„ï¼šcentos7éœ€è¦åœ¨äº‘æœåŠ¡å™¨ç®¡ç†åŽå°å’ŒæœåŠ¡å™¨é˜²ç«å¢™éƒ½è¦å¼€å¯httpæœåŠ¡ç«¯å£ï¼Œé»˜è®¤ä¸º80ï¼Œé˜²ç«å¢™é…ç½®æ–¹å¼æŸ¥çœ‹12firewall-cmd --permanent --zone=public --add-service=httpfirewall-cmd --reload ï¼ˆ4ï¼‰çŽ°åœ¨é€šè¿‡æœåŠ¡å™¨ip:80ç«¯å£è®¿é—®ï¼Œå°±å¯ä»¥çœ‹è§é»˜è®¤çš„apacheç•Œé¢å°±ç®—æˆåŠŸã€‚ å¦‚æžœä¸è¡Œï¼Œå¯å°è¯•æ›´æ”¹vi /etc/httpd/conf/httpd.conf é…ç½®æ–‡ä»¶å†é‡å¯1ServerName localhost:80 phpå®‰è£…ï¼ˆ1ï¼‰æŸ¥çœ‹æ˜¯å¦æœ‰ä»¥å‰çš„æ–‡ä»¶ï¼Œyumé»˜è®¤å®‰è£…çš„ä¸æ˜¯7.0ï¼Œå¦‚æžœæœ‰å°è¯•ï¼Œéœ€è¦å®Œå…¨åˆ é™¤ä»¥å‰çš„ç‰ˆæœ¬1rpm -qa|grep php å¯èƒ½æœ‰å¦‚ä¸‹çš„åŒ…php-pdo-5.1.6-27.el5_5.3php-mysql-5.1.6-27.el5_5.3php-xml-5.1.6-27.el5_5.3php-cli-5.1.6-27.el5_5.3php-common-5.1.6-27.el5_5.3php-gd-5.1.6-27.el5_5.3 å¦‚æžœæœ‰çš„è¯éœ€è¦åˆ é™¤ã€‚æ³¨æ„åŒ…ä¹‹é—´å¯èƒ½ä¼šæœ‰äº’ç›¸ä¾èµ–ï¼Œå…ˆåˆ é™¤æ— ä¾èµ–çš„1rpm -e * * * *(åŒ…å) ï¼ˆ2ï¼‰å®‰è£…ã€‚æ›´æ”¹yumæº12rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm yum -y install php70w.x86_64 php70w-cli.x86_64 php70w-common.x86_64 php70w-gd.x86_64 php70w-ldap.x86_64 php70w-mbstring.x86_64 php70w-mysql.x86_64 php70w-pdo.x86_64 php70w-pear.noarch php70w-process.x86_64 php70w-xml.x86_64 php70w-xmlrpc.x86_64 phpçŽ¯å¢ƒæµ‹è¯•ï¼Œåœ¨/var/www/htmlç›®å½•ä¸‹ï¼Œvi index.phpè¾“å…¥å¦‚ä¸‹å†…å®¹ä¿å­˜ã€‚123&lt;?php phpinfo();?&gt; é‡å¯httpdæœåŠ¡ï¼Œsystemctl restart httpdåŽæŸ¥çœ‹ip:80/index.phpï¼Œå‡ºçŽ°å¦‚ä¸‹ç•Œé¢å°±ç®—æˆåŠŸã€‚ å¦‚æžœåŽŸæ ·è¾“å‡ºï¼Œæˆ–è€…ç›´æŽ¥ä¸‹è½½åˆ™å¤±è´¥ï¼Œå¤±è´¥æ£€æŸ¥å¯å°è¯•æ›´æ”¹/etc/httpd/conf/httpd.confé‡å¯123456&lt;IfModule mime_module&gt;....AddType application/x-compress .ZAddType application/x-gzip .gz .tgzä¸‹æ·»åŠ AddType application/x-httpd-php .php]]></content>
      <tags>
        <tag>CentOS7</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å›½å¤–VPSäº‘æœåŠ¡å™¨è´­ä¹°åŠssræ­å»º]]></title>
    <url>%2F2019%2F08%2F04%2F%E5%9B%BD%E5%A4%96VPS%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B4%AD%E4%B9%B0%E5%8F%8Assr%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[æ˜¯å¦éœ€è¦ä¹°ä¸€ä¸ªäº‘ä¸»æœºï¼ŸVPSäº‘ï¼Ÿå½“å‰å¸¸è§çš„äº‘ä¸»æœºç®¡ç†å¹³å°åŒ…æ‹¬Eucalyptusäº‘ä¸»æœºï¼ŒCloudStackäº‘ä¸»æœºï¼ŒOpenStackäº‘ä¸»æœº , OpenNebulaäº‘ä¸»æœºï¼Œonappäº‘ä¸»æœºç­‰ã€‚å›½å¤–çš„æœåŠ¡å™¨æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿç®€å•æ¥è¯´ä¸éœ€è¦å¤‡æ¡ˆï¼Œæ­ä¸ªssrå…äº†ä¹°vpnçš„é’±ã€‚ å›½å¤–VPSé€‰è´­SSRçš„é€Ÿåº¦å®Œå…¨å–å†³äºŽä½ VPSé€Ÿåº¦çš„å¿«æ…¢ï¼Œå›½å¤–VPSå•†å®¶ä¼—å¤šï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦æŽ¨èvultrå’Œæ¬ç“¦å·¥è¿™ä¸¤å®¶ã€‚ 1.vultr ç›®å‰åœ¨å…¨çƒæœ‰16ä¸ªæœºæˆ¿ï¼ˆåŒ…æ‹¬æ—¥æœ¬ã€æ–°åŠ å¡ã€ç¾Žå›½ç­‰ï¼‰ï¼ŒåŸºäºŽKVMè™šæ‹Ÿï¼Œçº¯SSDç¡¬ç›˜ï¼ŒåŽå°å…è®¸è´­ä¹°Windowsç³»ç»Ÿçš„VPSï¼Œæ”¯æŒAlipayï¼ˆæ”¯ä»˜å®ç­‰ï¼‰ã€PayPalç­‰ã€‚å®˜æ–¹ç½‘ç«™ï¼šwww.vultr.comç‚¹å‡»Vultræ³¨å†Œå……å€¼é€50ç¾Žé‡‘ç‚¹å‡»è¿›å…¥ï¼Œæ³¨å†Œå®Œæˆç‚¹å‡»Productsï¼Œé€‰æ‹©deploy new serveré€‰æ‹©åˆé€‚çš„æœºå™¨ã€‚å……å€¼é€‰æ‹©Billingï¼Œä»Žé“¾æŽ¥è¿›å…¥ä¼šçœ‹è§å……å€¼é€50ç¾Žåˆ€ 2.æ¬ç“¦å·¥ KVMè™šæ‹Ÿï¼Œæ”¯æŒCentos, Debian, Ubuntuï¼ŒSSDç¡¬ç›˜ï¼Œæ¯ä¸ªVPSè‡ªå¸¦ä¸€ä¸ªç‹¬ç«‹IPv4ï¼Œå¯é€‰æœºæˆ¿æœ‰å››ä¸ªã€‚ ç‚¹å‡»æ³¨å†Œæ¬ç“¦å·¥ï¼Œæ³¨å†ŒæˆåŠŸåŽç‚¹å‡»VPS Hostingé€‰æ‹©ã€‚ æœåŠ¡å™¨è¿žæŽ¥ä»¥vulträ¸ºä¾‹ï¼Œé€‰è´­å®ŒæˆåŽåœ¨Productsèƒ½çœ‹è§ç­‰å¾…è®¾å¤‡å®‰è£…ï¼Œç‚¹å‡»è¿›å…¥è®¾å¤‡å¯ä»¥çœ‹è§ipï¼Œusernameå’Œpasswordï¼Œé»˜è®¤çš„é˜²ç«å¢™æ˜¯æ‰“å¼€ssh 22ç«¯å£çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿œç¨‹ç™»å½•ç®¡ç†ï¼Œå°ç¼–ä½¿ç”¨çš„xshellï¼Œæ™®é€šçš„xshellæ˜¯è¯•ç”¨æœŸ30å¤©ï¼Œå°ç¼–è¿™é‡Œæ”¶é›†äº†ä¸€ä¸ªFree for home/schoolç‰ˆæœ¬çš„ï¼Œå¦‚æžœé“¾æŽ¥å¤±æ•ˆå¯ä»¥è”ç³»æˆ‘ é“¾æŽ¥ï¼šhttps://pan.baidu.com/s/1ARlnKwUBWz9wQocCzmEU1Qæå–ç ï¼š50qfå¤åˆ¶è¿™æ®µå†…å®¹åŽæ‰“å¼€ç™¾åº¦ç½‘ç›˜æ‰‹æœºAppï¼Œæ“ä½œæ›´æ–¹ä¾¿å“¦ å®‰è£…å®ŒåŽé€‰æ‹©æ–‡ä»¶-&gt;æ–°å»ºï¼Œè®¾ç½®ä¸»æœºåï¼Œå³ä¸ºvultråŽå°çš„ip addressã€‚ç‚¹å‡»ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œå¡«å†™ç”¨æˆ·åä¸ºvultrçš„usernameï¼Œå¯†ç ä¸ºvultrçš„passwordï¼Œç‚¹å‡»ç¡®å®šã€‚ä¼šè¯åˆ›å»ºå®Œæˆï¼ŒåŒå‡»å°±å¯ä»¥è¿žæŽ¥ï¼Œæç¤ºå¯†ç ä¿å­˜çš„çª—å£å°±ç‚¹å‡»åŒæ„ï¼Œä¸ç„¶ä¸‹æ¬¡è¿˜å¾—è¾“å…¥å¯†ç ã€‚ SSRæ­å»ºè¿žæŽ¥åŽï¼Œåœ¨æƒ³è¦æ”¾ç½®çš„ä½ç½®å¼€å§‹æ­å»ºssrã€‚1234567$ yum install wget -y$ wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh$ chmod +x shadowsocksR.sh$ ./shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log è¿è¡ŒåŽï¼Œä¼šæç¤ºä½ è®¾ç½®ç«¯å£ï¼ˆportï¼‰å’Œå¯†ç ï¼ˆpasswordï¼‰ï¼ŒåŠ å¯†æ–¹å¼,åè®®,æ··æ·†ç­‰ ï¼ˆ1ï¼‰è®¾ç½®SSRè¿žæŽ¥å¯†ç ï¼šPlease enter password for ShadowsocksRã€‚ï¼ˆå¦‚ä¸è®¾å®šï¼Œé»˜è®¤ä¸º teddysun.comï¼‰ï¼ˆ2ï¼‰è®¾ç½®ä½ çš„æœåŠ¡å™¨ç«¯å£[1-65535]ï¼šPlease enter a port for ShadowsocksR ã€‚ï¼ˆå¦‚ä¸è®¾å®šå°±æ˜¯æç¤ºçš„ï¼‰ï¼ˆ3ï¼‰è®¾ç½®åŠ å¯†æ–¹å¼ï¼šPlease select stream cipher for ShadowsocksRï¼Œè¾“å…¥åºå·å›žè½¦é€‰æ‹©ï¼šï¼ˆ4ï¼‰é€‰æ‹©åè®®ï¼šPlease select protocol for ShadowsocksRï¼Œè¾“å…¥åºå·å›žè½¦é€‰æ‹©ï¼šï¼ˆå¦‚ä¸è®¾å®šï¼Œé»˜è®¤ä¸º originï¼‰ï¼ˆ5ï¼‰é€‰æ‹©æ··æ·†æ–¹å¼ï¼šPlease select obfs for ShadowsocksRï¼Œè¾“å…¥åºå·å›žè½¦é€‰æ‹©(å…æµè¯·é€‰æ‹©2:http_simple),ï¼ˆå¦‚ä¸è®¾å®šï¼Œé»˜è®¤ä¸º plainï¼‰è®¾ç½®å®Œæˆå›žè½¦ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå®Œæˆï¼Œ è¿˜éœ€è¦åœ¨æœåŠ¡å™¨åŠvultråŽå°å¼€æ”¾ç«¯å£ï¼å¦‚ ç«¯å£ä¸º8502123456# åœ¨public.xmlæ·»åŠ ç«¯å£firewall-cmd --zone=public --permanent --add-port=8502/tcp firewall-cmd --zone=public --permanent --add-port=8502/udp # é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆsystemctl restart firewalld.service vultråŽå°é…ç½®é˜²ç«å¢™ç«¯å£Products-&gt;firewallã€‚æ²¡æœ‰æƒé™ç»„çš„å°±åˆ›å»ºä¸€ä¸ªï¼Œæœ‰çš„è¯è¿›å…¥ç‚¹å‡»ç¼–è¾‘Edit firewallï¼Œé€‰æ‹©TCPï¼Œå¡«å†™åˆšåˆšè®¾ç½®ssrçš„ç«¯å£ï¼Œç‚¹å‡»åŠ å·æ·»åŠ æç¤ºå¤§çº¦120Så†…ç”Ÿæ•ˆã€‚ SSRå„ç³»ç»Ÿè¿žæŽ¥å·¥å…·ä¸‹è½½è¯·çœ‹https://github.com/shadowsocksï¼Œé€‰æ‹©åˆé€‚çš„ç³»ç»Ÿç‚¹å‡»releaseé€‰æ‹©ç‰ˆæœ¬ä¸‹è½½ã€‚ ssrå¤šç«¯å£é…ç½®è„šæœ¬é»˜è®¤åˆ›å»ºå•ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œå¦‚éœ€é…ç½®å¤šç”¨æˆ·ï¼Œéœ€æ›´æ”¹é…ç½®æ–‡ä»¶ã€‚ ssræœåŠ¡å¯åŠ¨/åœæ­¢/é‡å¯/çŠ¶æ€ï¼š/etc/init.d/shadowsocks start/stop/restart/status ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼švi /etc/shadowsocks.json æŒ‰iè¿›è¡Œç¼–è¾‘å°†åŽŸæ¥çš„server_portå’Œpasswordæ”¹ä¸ºport_passwordå¯¹åº”çš„å¤šä¸ªä»¥portä¸ºé”®ï¼Œpasswordä¸ºå€¼å½¢å¼çš„Esc :wqä¿å­˜é€€å‡ºã€‚é‡å¯shadowsocksæœåŠ¡ã€‚ æ³¨æ„ï¼šæ–°å¢žåŠ çš„ç«¯å£å·portä»ç„¶éœ€è¦åœ¨é˜²ç«å¢™é…ç½®å…¥ç«™ç«¯å£è§„åˆ™ã€‚]]></content>
      <tags>
        <tag>VPS</tag>
        <tag>ssr</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Google Playåº”ç”¨ä¸Šæž¶æµç¨‹]]></title>
    <url>%2F2019%2F08%2F02%2FGoogle-Play%E5%BA%94%E7%94%A8%E4%B8%8A%E6%9E%B6%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å‰è¨€æŸ æª¬çˆ±çŽ©å°æ¸¸æˆçš„å°ç¼–å–œæ¬¢çŽ©2048ï¼Œè¿«äºŽå¸‚é¢ä¸Šçš„å°æ¸¸æˆå¹¿å‘Šå¤ªå¤šäº†ðŸ˜³ï¼Œæœºæ™ºçš„å°ç¼–å°±ç”¨cocos creatorå†™äº†ä¸ªå°æ¸¸æˆï¼Œæƒ³è¦å‘å¸ƒåˆ°çº¿ä¸Šç»™å¤§å®¶ä¸€èµ·çŽ©å‘€ðŸ˜ï¼Œå¼€å§‹æ”¾åˆ°github pageï¼Œåœ°å€ä¸ºhttps://luohongxfb.github.io/2048/ ï¼ˆç§»åŠ¨ç«¯æ‰“å¼€ï¼‰ï¼Œä½†æ˜¯ç½‘ä¸å¥½å¯å’‹æ•´å•Š~ æœºæ™ºçš„å°ç¼–æ‰“åŒ…æˆapkäº†ï¼Œå› ä¸ºå°ç¼–ä¸æƒ³è¦å€’è…¾ä¹°è½¯è‘—ï¼Œåˆè´¹æ—¶é—´çš„åˆè´¹é’±ðŸ˜‚ï¼Œå°ç¼–å°±æƒ³åˆ°å‘å¸ƒåˆ°google playå•¦ Cocos Creatoræ‰“åŒ…åˆ°åŽŸç”Ÿå¹³å°éœ€è¦å…ˆé…ç½®åŽŸç”Ÿå¼€å‘çŽ¯å¢ƒï¼Œå®‰è£…jdkï¼Œä¸‹è½½Android Studioå¹¶ä¸”ä¸‹è½½éœ€è¦çš„sdkå’Œndkï¼Œå…·ä½“æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.cocos.com/creator/manual/zh/publish/setup-native-development.html ã€‚æ‰“åŒ…å‘å¸ƒåŽŸç”Ÿå¹³å°æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.cocos.com/creator/manual/zh/publish/publish-native.html å‰æï¼šç§‘å­¦ä¸Šç½‘ï¼›ä¸€å¼ Visa/Masterå¡ï¼Œå¼€é€šè´¦å·éœ€è¦æ”¯ä»˜25ç¾Žåˆ€ã€‚ 2048 Google playåœ°å€ä¸ºï¼šhttps://play.google.com/store/apps/details?id=com.aililuo.simple2048 èŽ·å–ä¸€ä¸ªå¼€å‘è€…è´¦å· 1. æ³¨å†Œgoogleè´¦å·ï¼ˆå¦‚å·²ç»æœ‰äº†å¯è·³è¿‡è¿™æ­¥ç›´æŽ¥ç™»å½•ï¼‰ï¼šhttps://accounts.google.com/SignUpæŽ¨èä½¿ç”¨gmailï¼Œå¦‚æžœæƒ³ç”¨è‡ªå·±çš„é‚®ç®±ç‚¹å‡»-&gt;æ”¹ç”¨æˆ‘çš„å½“å‰ç”µå­é‚®ä»¶åœ°å€ã€‚å¡«å†™å®Œæˆä¹‹åŽç‚¹å‡»ä¸‹ä¸€æ­¥ï¼ŒåŒæ„åè®®ï¼ŒéªŒè¯æ‰‹æœºå·ã€é‚®ç®±ä¹‹åŽï¼Œå¯ä»¥ç™»å½•å•¦~è´¦å·é¦–é¡µåœ°å€ä¸ºhttps://myaccount.google.com/ 2.å¼€é€šå¼€å‘è€…æƒé™ï¼šhttps://play.google.com/apps/publish/signup/å‹¾é€‰åŒæ„åè®®ï¼Œç‚¹å‡»ç»§ç»­ä»˜æ¬¾ç»‘å®šä¿¡ç”¨å¡ï¼Œæ”¯ä»˜25$å°±å¯ä»¥äº†ã€‚æ³¨æ„ï¼šå¯èƒ½ä¼šå¤šæ‰£äº†1$ï¼Œç¨ç­‰ä¼šè¿”è¿˜çš„ã€‚ æ”¯ä»˜å®Œæˆï¼Œå¡«å†™è´¦å·çš„è¯¦ç»†ä¿¡æ¯ï¼Œç‚¹å‡»å®Œæˆæ³¨å†Œå°±å¯ä»¥æ„‰å¿«çš„ä¸Šä¼ åº”ç”¨å•¦ã€‚ åº”ç”¨åˆ›å»ºå‰é¢çš„éƒ½å®Œæˆäº†ï¼Œè®¿é—®https://play.google.com/apps/publish/ ï¼Œåº”è¯¥èƒ½çœ‹è§å¦‚ä¸‹çš„ç•Œé¢ï¼Œç‚¹å‡»åˆ›å»ºåº”ç”¨é€‰æ‹©appçš„é»˜è®¤è¯­è¨€ï¼Œå¡«å†™appåç§°ï¼Œç‚¹å‡»åˆ›å»ºå³å¯è¿›å…¥è¯¦æƒ…é¡µè¯¦æƒ…é¡µå¯ä»¥çœ‹è§å·¦ä¾§ä¸€äº›å¸¦ç°è‰²å‹¾å‹¾çš„é¡¹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯å…¨éƒ¨ç‚¹äº®âœ…å°±å¯ä»¥å‘å¸ƒäº† é»˜è®¤ä¸€åˆ›å»ºåº”ç”¨æ˜¯è·³è½¬çš„å•†å“è¯¦æƒ…ç•Œé¢çš„ï¼Œä½†æ˜¯éœ€è¦apkä¿¡æ¯åŠå†…å®¹åˆ†çº§ï¼Œå› å„æ­¥éª¤äº’ç›¸å…³è”ï¼Œå»ºè®®æŒ‰ä¸‹åˆ—çš„æ­¥éª¤æ¥ã€‚ 1. åº”ç”¨ç‰ˆæœ¬ é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚å½“å‰æˆ‘ä»¬è¦å‘å¸ƒå½“ç„¶è¦é€‰æ­£å¼æ¸ é“ï¼Œç‚¹å‡»åŽé¢çš„ç®¡ç†-&gt;åˆ›å»ºç‰ˆæœ¬ã€‚é€‰æ‹©åˆé€‚çš„æ–¹å¼ç®¡ç†åº”ç”¨ç­¾åå¯†é’¥ï¼Œå› ä¸ºå½“å‰å‘å¸ƒçš„å°æ¸¸æˆæ²¡æœ‰ä»€ä¹ˆä¸‰æ–¹ï¼Œå°ç¼–å°±ç›´æŽ¥é€‰æ‹©æŽ¨èçš„Googleç®¡ç†äº†ï¼Œç‚¹å‡»ç»§ç»­ï¼Œå¦‚æžœéœ€è¦ä¿æŒåŽŸæ¥çš„ç­¾åé€‰æ‹©åœç”¨ã€‚ä¸Šä¼ apk/app bundleï¼Œå¡«å†™ç‰ˆæœ¬åç§°ï¼Œç‰ˆæœ¬çš„æ–°åŠŸèƒ½ï¼Œç‚¹å‡»ä¿å­˜ 2. å†…å®¹åˆ†çº§ å¡«å†™ç”µå­é‚®ç®±ï¼Œé€‰æ‹©åº”ç”¨çš„ç±»åˆ«å¼€å§‹å¡«å†™åº”ç”¨å†…æœ‰æ— æš´åŠ›ã€ä»¤äººææƒ§çš„å†…å®¹ç­‰ï¼Œ2048é€‰å¦å°±å¯¹äº†å¡«å†™å®Œæˆï¼Œç‚¹å‡»ä¿å­˜è°ƒæŸ¥é—®å·ï¼Œå†ç‚¹å‡»åˆ¤æ–­åˆ†çº§ï¼Œç¡®å®šåˆ†çº§ 3. å•†å“è¯¦æƒ… éœ€è¦å¡«å†™appåç§°ã€ç®€çŸ­çš„è‹±æ–‡è¯´æ˜Žã€è¯¦ç»†çš„ä¸­æ–‡è¯´æ˜Žã€‚æŽ¥ä¸‹æ¥å°±æ˜¯å›¾ç‰‡èµ„æº è¦æ±‚ å›¾æ ‡ï¼š 512x512 32ä½PNG æ–‡ä»¶ä¸Šé™1024KB å½¢çŠ¶ï¼šå®Œæ•´æ­£æ–¹å½¢ - Google Play ä¼šåŠ¨æ€å¤„ç†é®ç›–éƒ¨åˆ†ã€‚åŠå¾„ç›¸å½“äºŽå›¾æ ‡å¤§å°çš„ 20%ï¼Œç³»ç»Ÿå·²ç¦æ­¢ä½¿ç”¨é€æ˜ŽèƒŒæ™¯ï¼Œ é˜´å½±ï¼šæ—  - Google Play ä¼šåŠ¨æ€å¤„ç†é˜´å½± æŸ¥çœ‹è®¾è®¡è§„èŒƒè¯¦æƒ… å±å¹•æˆªå›¾ ï¼šJPEG æˆ– 24 ä½ PNGï¼ˆæ—  alpha é€æ˜Žå±‚ï¼‰ã€‚è¾¹é•¿ä¸‹é™ï¼š320 åƒç´ ï¼›è¾¹é•¿ä¸Šé™ï¼š3840 åƒç´ ã€‚æ€»çš„æ¥è¯´ï¼Œè‡³å°‘éœ€è¦æä¾› 2 å¼ å±å¹•æˆªå›¾ã€‚æ¯ç§ç±»åž‹æœ€å¤šå¯æä¾› 8 å¼ å±å¹•æˆªå›¾ã€‚ ç½®é¡¶å¤§å›¾ï¼šå®½ 1024 x é«˜ 500 JPG æˆ– 24 ä½ PNGï¼ˆæ—  alpha é€šé“ï¼‰æ ¼å¼ å¡«å†™åº”ç”¨ç±»åž‹ç±»åˆ«åŠç”µå­é‚®ä»¶ã€‚ å¡«å†™éšç§æƒæ”¿ç­–ï¼Œå½“æ‚¨çš„åº”ç”¨å†…æ²¡æœ‰ä»»ä½•æƒé™ç”³è¯·æ—¶ï¼Œæ‚¨å¯ä»¥å‹¾é€‰æš‚ä¸æäº¤éšç§æƒæ”¿ç­–ç½‘å€ï¼Œæœ‰æƒé™ç”³è¯·æ—¶ï¼Œå¿…é¡»è¦å¡«å†™ ç‚¹å‡»ä¿å­˜è‰ç¨¿ 4. å®šä»·å’Œåˆ†å‘èŒƒå›´ é€‰å®šåº”ç”¨æ˜¯ä»˜è´¹è¿˜æ˜¯å…è´¹ï¼Œä¸Šæž¶2048å½“ç„¶æ˜¯å…è´¹å•¦ï¼Œé€‰æ‹©å¯ä¸‹è½½çš„åœ°åŒºï¼ˆé»˜è®¤ä¸ºæ‰€æœ‰åœ°åŒºéƒ½ä¸å¯ä¸‹è½½ï¼ï¼‰ã€æ˜¯å¦åŒ…å«å¹¿å‘Šï¼Œ2048å½“ç„¶é€‰æ‹©å¦å•¦æœ€åŽå‹¾é€‰å†…å®¹å‡†åˆ™ ç¾Žå›½å‡ºå£æ³•å¾‹ï¼Œç‚¹å‡»ä¿å­˜è‰ç¨¿ 5. åº”ç”¨å†…å®¹ å¡«å†™ç›®æ ‡å—ä¼—ç¾¤ä½“å’Œå†…å®¹è¿›å…¥ä¸‹é¢æ­¥éª¤é€‰æ‹©ç›®æ ‡å¹´é¾„æ®µï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥é€‰æ‹©æ˜¯å¦ä¼šå¸å¼•å„¿ç«¥ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ç‚¹å‡»æäº¤ åº”ç”¨å‘å¸ƒå½“ä¸Šé¢çš„éƒ½å¡«å®Œäº†ï¼Œåº”ç”¨çš„çŠ¶æ€ä¼šä»Žâ€œè‰ç¨¿â€å˜æˆâ€œå¯ä»¥å‘å¸ƒâ€ï¼Œå¯ä»¥åœ¨åº”ç”¨åˆ—è¡¨çœ‹è§ï¼Œä¹Ÿèƒ½åœ¨è¯¦æƒ…å³ä¸Šæ–¹çš„tabçœ‹è§ã€‚è¿™æ—¶å€™è¿›å…¥åº”ç”¨ç‰ˆæœ¬-&gt;æ­£å¼ç‰ˆæ¸ é“ ä¿®æ”¹ç‰ˆæœ¬-&gt;æŸ¥çœ‹-&gt;å¼€å§‹å‘å¸ƒæ­£å¼ç‰ˆ åŸºæœ¬ä¸Šç¬¬ä¸€æ¬¡ä¸Šæž¶æ–°çš„åº”ç”¨ä¼šæ¯”è¾ƒæ…¢å®¡æ ¸ï¼Œå°ç¼–å¯æ˜¯èŠ±äº†ä¸‰å¤©å‘¢ï¼Œ2048 Google playåœ°å€ä¸ºï¼šhttps://play.google.com/store/apps/details?id=com.aililuo.simple2048 æ³¨æ„1. åº”ç”¨ç­¾åå› ä¸ºå½“å‰ä¸Šæž¶çš„2048å¹¶æ²¡æœ‰ä¸‰æ–¹ç­‰ï¼Œæ‰€ä»¥é€‰çš„GooglePlayç­¾åè®¡åˆ’ï¼Œä¸Šä¼ çš„åº”ç”¨ä¼šè¢«GooglePlayè¿›è¡ŒäºŒæ¬¡ç­¾åï¼Œè¿™æ ·å¯¼è‡´çš„é—®é¢˜å°±æ˜¯ä¾‹å¦‚å¾®ä¿¡ã€ç™¾åº¦å®šä½ç­‰éœ€è¦ä¾èµ–ç­¾åçš„MD5å€¼æˆ–è€…SHA1å€¼çš„ä¸‰æ–¹ä¼šå‡ºçŽ°æ ¡éªŒå¤±è´¥ã€‚ å¦‚æžœéœ€è¦ä¿æŒåŽŸæ¥çš„åº”ç”¨ç­¾åï¼Œåœ¨ä¸Šæž¶æ—¶é€‰æ‹©åœç”¨ 2. éšç§æƒæ”¿ç­–å½“å‰çš„2048ä¸éœ€è¦ä»»ä½•æƒé™ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸Šæž¶çš„åº”ç”¨éƒ½ä¼šæœ‰æƒé™çš„ï¼Œå°±å¿…é¡»è¦å¡«å†™éšç§æƒæ”¿ç­–ï¼Œå…³äºŽä½¿ç”¨ç‰¹å®šæƒé™çš„å…¶ä»–è¦æ±‚ï¼š æ´»åŠ¨ è¦æ±‚ æ‚¨çš„åº”ç”¨æ¸…å•è¯·æ±‚â€œé€šè¯è®°å½•â€æƒé™ç»„ï¼ˆä¾‹å¦‚ READ_CALL_LOGã€WRITE_CALL_LOGã€ROCESS_OUTGOING_CALLSï¼‰ å¿…é¡»ç”±ç”¨æˆ·ä¸»åŠ¨å°†åº”ç”¨æ³¨å†Œä¸ºè®¾å¤‡çš„é»˜è®¤ç”µè¯æˆ–è¾…åŠ©å¤„ç†ç¨‹åºã€‚ æ‚¨çš„åº”ç”¨æ¸…å•è¯·æ±‚â€œçŸ­ä¿¡â€æƒé™ç»„ï¼ˆä¾‹å¦‚ READ_SMSã€SEND_SMSã€WRITE_SMSã€RECEIVE_SMSã€RECEIVE_WAP_PUSHã€RECEIVE_MMSï¼‰ å¿…é¡»ç”±ç”¨æˆ·ä¸»åŠ¨å°†åº”ç”¨æ³¨å†Œä¸ºè®¾å¤‡çš„é»˜è®¤çŸ­ä¿¡æˆ–è¾…åŠ©å¤„ç†ç¨‹åºã€‚ å¦‚æžœåº”ç”¨ä¸­ä½¿ç”¨äº†ç…§ç›¸ï¼Œé€šè®¯å½•ï¼Œç”µè¯ï¼ŒçŸ­ä¿¡ï¼Œå¤–éƒ¨å†…å­˜è¯»å†™ï¼Œä½ç½®ç­‰æ¶‰åŠç”¨æˆ·éšç§çš„æƒé™ï¼Œéœ€è¦å…ˆç”Ÿæˆéšç§æ”¿ç­–urlï¼Œç„¶åŽå…ˆå°†éšç§æƒé™åµŒå…¥åˆ°Appä¸­é‡å†™æ‰“åŒ…ä¸Šä¼ ï¼Œè¿˜éœ€è¦åœ¨Google playåº”ç”¨çš„å•†å“è¯¦æƒ…-&gt;éšç§æƒæ”¿ç­–å¡«å†™éšç§æƒæ”¿ç­–urlã€‚ä¸Šå›¾ä¸ºappå†…éƒ¨ç•Œé¢ï¼Œéœ€è¦åœ¨æ³¨å†Œéƒ¨åˆ†æˆ–è€…ç›´æŽ¥å¼¹çª—æç¤ºç”¨æˆ·æŽˆäºˆã€‚ç”Ÿæˆéšç§æƒurlæ–¹å¼ï¼š https://www.iubenda.com/blog/privacy-policy-for-android-app/ ï¼šç‚¹å‡»æ“ä½œæ­¥éª¤æŸ¥çœ‹ https://www.privacypolicies.com/ ï¼šç‚¹å‡»åˆ›å»º å¯ä»¥ä»Žç½‘ä¸Šæœä¸€ä¸‹appéšç§å£°æ˜Žæ¨¡æ¿ï¼Œç„¶åŽæŒ‚åœ¨å®˜ç½‘ä¸Šï¼Œè¿™ä¸ªé“¾æŽ¥ä¹Ÿå¯ä»¥ç”¨æ¥Google playå®¡æ ¸]]></content>
  </entry>
  <entry>
    <title><![CDATA[redis-migrate-toolä½¿ç”¨è¯¦è§£]]></title>
    <url>%2F2019%2F08%2F01%2Fredis-migrate-tool%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å‰è¨€redis-migrate-tool æ˜¯ç»´å“ä¼šå¼€æºçš„ä¸€æ¬¾redisæ•°æ®è¿ç§»å·¥å…·ï¼ŒåŸºäºŽrediså¤åˆ¶ï¼Œå¿«é€Ÿï¼Œç¨³å®šï¼Œgithubåœ°å€ä¸ºï¼šhttps://github.com/vipshop/redis-migrate-tool ã€‚ å¿«é€Ÿã€‚ å¤šçº¿ç¨‹ã€‚ åŸºäºŽrediså¤åˆ¶ã€‚ å®žæ—¶è¿ç§»ã€‚ è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæºé›†ç¾¤ä¸å½±å“å¯¹å¤–æä¾›æœåŠ¡ã€‚ å¼‚æž„è¿ç§»ã€‚ æ”¯æŒTwemproxyé›†ç¾¤ï¼Œredis clusteré›†ç¾¤ï¼Œrdbæ–‡ä»¶ å’Œ aofæ–‡ä»¶ã€‚ è¿‡æ»¤åŠŸèƒ½ã€‚ å½“ç›®æ ‡é›†ç¾¤æ˜¯Twemproxyï¼Œæ•°æ®ä¼šè·³è¿‡Twemproxyç›´æŽ¥å¯¼å…¥åˆ°åŽç«¯çš„redisã€‚ è¿ç§»çŠ¶æ€æ˜¾ç¤ºã€‚ å®Œå–„çš„æ•°æ®æŠ½æ ·æ ¡éªŒ(-C redis_check)ã€‚ åˆ’é‡ç‚¹ å®žæ—¶è¿ç§» è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæºé›†ç¾¤ä¸å½±å“å¯¹å¤–æä¾›æœåŠ¡ å®‰è£…redis-migrate-toolä¾èµ–1$ yum -y install automake libtool autoconf bzip2 git æž„å»º12345$ cd redis-migrate-tool$ autoreconf -fvi$ ./configure$ make$ src/redis-migrate-tool -h è­¦å‘Š åœ¨è¿è¡Œå·¥å…·ä¹‹å‰ï¼Œç¡®ä¿æºredisæ‰€åœ¨çš„æœºå™¨æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ä»¥å…è®¸è‡³å°‘ä¸€ä¸ªredisç”Ÿæˆ.rdbæ–‡ä»¶ï¼Œå¦‚æžœæºæœºå™¨æœ‰å¤§é‡è¶³å¤Ÿçš„å†…å­˜å…è®¸æ‰€æœ‰çš„redisç”Ÿæˆ.rdbï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶rmt.confè®¾ç½®source_safe: falseã€‚ ä¸‹åˆ—å‘½ä»¤ä¸æ”¯æŒä¼ æ’­ç»™target redisç»„ï¼Œå› ä¸ºè¿™äº›å‘½ä»¤ä¸‹çš„keyså¯èƒ½äº¤å‰äº†ä¸åŒçš„ç›®æ ‡redisèŠ‚ç‚¹ã€‚1RENAME,RENAMENX,RPOPLPUSH,BRPOPLPUSH,FLUSHALL,FLUSHDB,BITOP,MOVE,GEORADIUS,GEORADIUSBYMEMBER,EVAL,EVALSHA,SCRIPT,PFMERGE redis-migrate-tool å‘½ä»¤è¯¦è§£å‡ºçŽ°ä¸‹åˆ—å¸®åŠ©è¯´æ˜Žè¡¨ç¤ºå®‰è£…æˆåŠŸ1234567891011121314151617181920212223242526272829303132This is redis-migrate-tool-0.1.0Usage: redis-migrate-tool [-?hVdIn] [-v verbosity level] [-o output file] [-c conf file] [-C command] [-f source address] [-t target address] [-p pid file] [-m mbuf size] [-r target role] [-T thread number] [-b buffer size]Options: -h, --help : this help -V, --version : show version and exit -d, --daemonize : run as a daemon -I, --information : print some useful information -n, --noreply : don&apos;t receive the target redis reply -v, --verbosity=N : set logging level (default: 5, min: 0, max: 11) -o, --output=S : set logging file (default: stderr) -c, --conf-file=S : set configuration file (default: rmt.conf) -p, --pid-file=S : set pid file (default: off) -m, --mbuf-size=N : set mbuf size (default: 512) -C, --command=S : set command to execute (default: redis_migrate) -r, --source-role=S : set the source role (default: single, you can input: single, twemproxy or redis_cluster) -R, --target-role=S : set the target role (default: single, you can input: single, twemproxy or redis_cluster) -T, --thread=N : set how many threads to run the job(default: 4) -b, --buffer=S : set buffer size to run the job (default: 140720309534720 byte, unit:G/M/K) -f, --from=S : set source redis address (default: 127.0.0.1:6379) -t, --to=S : set target redis group address (default: 127.0.0.1:6380) -s, --step=N : set step (default: 1)Commands: redis_migrate : Migrate data from source group to target group. redis_check : Compare data between source group and target group. Default compare 1000 keys. You can set a key count behind. redis_testinsert : Just for test! Insert some string, list, set, zset and hash keys into the source redis group. Default 1000 keys. You can set key type and key count behind. éƒ¨åˆ†æŒ‡ä»¤è§£æžï¼š -h, --helpï¼šå¸®åŠ© -V, --versionï¼šæ˜¾ç¤ºç‰ˆæœ¬ -d, --daemonizeï¼šåŽå°è¿›ç¨‹è¿è¡Œ -I, --informationï¼šæ‰“å°ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯ä»¥è§£æžçš„æŒ‡ä»¤ï¼ˆ126ä¸ªï¼‰ï¼Œä¸æ”¯æŒçš„æŒ‡ä»¤ï¼ˆ14ä¸ªï¼‰ç­‰ç­‰ -v, --verbosity=Nï¼šè®¾ç½®æ—¥å¿—ç­‰çº§ã€‚(é»˜è®¤: 5, æœ€ä½Ž: 0, æœ€é«˜: 11) -o, --output=Sï¼šè®¾ç½®è¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶ -c, --conf-file=Sï¼šè®¾ç½®é…ç½®æ–‡ä»¶ã€‚(é»˜è®¤: rmt.conf) -C, --command=Sï¼šè®¾ç½®è¿è¡Œçš„æŒ‡ä»¤(é»˜è®¤: redis_migrate ï¼Œè¿ç§»)ã€‚redis_check æ¯”è¾ƒæºå’Œç›®çš„ï¼Œé»˜è®¤1000ä¸ªæ ·æœ¬keyã€‚redis_testinsertæµ‹è¯•æ’å…¥Keysï¼Œé»˜è®¤æ‰€æœ‰ç±»åž‹æ€»å…±1000ä¸ªã€‚ -T, --thread=Nï¼šè®¾ç½®å¤šå°‘ä¸ªçº¿ç¨‹ç”¨æ¥è¿è¡Œå·¥å…·ã€‚(é»˜è®¤: 4) 1. è¿è¡Œè¿ç§»1$ src/redis-migrate-tool -c rmt.conf -o log -d æ³¨æ„ï¼š-dæŒ‡å®šä¸ºåŽå°è¿è¡Œï¼Œå¦‚æžœå†æ¬¡è¿è¡Œå¯èƒ½éœ€è¦æ€æ­»å ç”¨å½“å‰ç«¯å£çš„è¿›ç¨‹ã€‚netstat -tnulpæŸ¥çœ‹æ‰¾åˆ°redis-migrate-toolçš„ç«¯å£å·ï¼Œkill -9 [ç«¯å£å·]æ€æ­»å†è¿è¡Œã€‚ æŒ‡å®šè¾“å‡ºæ—¥å¿—æ–‡ä»¶ä¸ºlogï¼Œå¯é€šè¿‡tail -200 logç­‰æŸ¥çœ‹æ—¥å¿—ã€‚ 2. æŠ½æ ·æ£€æŸ¥1234567891011$ src/redis-migrate-tool -c rmt.conf -o log -C redis_checkCheck job is running...Checked keys: 1000Inconsistent value keys: 0Inconsistent expire keys : 0Other check error keys: 0Checked OK keys: 1000All keys checked OK!Check job finished, used 1.041s æŠ½æ ·æ£€æŸ¥æºç»„å’Œç›®æ ‡ç»„çš„æ•°æ®ï¼Œé»˜è®¤ä¸º1000ä¸ªã€‚å¦‚æžœéœ€è¦æ£€æŸ¥æ›´å¤šçš„æ•°æ®ï¼Œ1234567891011$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_check 200000&quot;Check job is running...Checked keys: 200000Inconsistent value keys: 0Inconsistent expire keys : 0Other check error keys: 0Checked OK keys: 200000All keys checked OK!Check job finished, used 11.962s 3. æµ‹è¯•æ’å…¥ä¸€äº›æ•°æ®123456789101112$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert&quot;Test insert job is running...Insert string keys: 200Insert list keys : 200Insert set keys : 200Insert zset keys : 200Insert hash keys : 200Insert total keys : 1000Correct inserted keys: 1000Test insert job finished, used 0.525s é»˜è®¤æ’å…¥çš„æ•°æ®ä¸ºstringã€listã€setã€zsetã€hashå„200ä¸ªï¼ˆå‡åˆ†ï¼‰ï¼Œæ€»å…±1000ä¸ªã€‚å¦‚æžœéœ€è¦æ’å…¥æ›´å¤šçš„é”®ï¼Œ123456789101112$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert 30000&quot;Test insert job is running...Insert string keys: 6000Insert list keys : 6000Insert set keys : 6000Insert zset keys : 6000Insert hash keys : 6000Insert total keys : 30000Correct inserted keys: 30000Test insert job finished, used 15.486s å¦‚æžœåªæƒ³æ’å…¥stringç±»åž‹çš„é”®ï¼ˆ1000ä¸ªï¼‰ï¼Œ1$ src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert string&quot; å¦‚æžœæƒ³æŒ‡å®šæ’å…¥çš„å‡ ç§ç±»åž‹ï¼Œå¹¶ä¸”æŒ‡å®šæ€»æ•°ï¼Œ123456789101112$src/redis-migrate-tool -c rmt.conf -o log -C &quot;redis_testinsert string|set|list 10000&quot;Test insert job is running...Insert string keys: 3336Insert list keys : 3336Insert set keys : 3328Insert zset keys : 0Insert hash keys : 0Insert total keys : 10000Correct inserted keys: 10000Test insert job finished, used 5.539s æ’å…¥æ ¡éªŒç”Ÿæˆçš„æ•°æ®å¹¶ä¸ä¼šæ¸…é™¤ï¼Œæµ‹è¯•æ—¶å¯ä»¥å°½é‡å‡å°‘æ’å…¥çš„keyã€‚ rmt.confé…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶åŒ…å«ä¸‰éƒ¨åˆ†ï¼š[source], [target] å’Œ [common] è¿ç§»å·¥å…·çš„æ¥æºï¼ˆsourceï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®žä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ï¼Œaofæ–‡ä»¶ã€‚è¿ç§»å·¥å…·çš„ç›®æ ‡ï¼ˆtargetï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®žä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ã€‚ [source]/[target]ï¼š typeï¼š singleï¼šå•ç‹¬çš„rediså®žä¾‹ twemproxyï¼štwemproxyé›†ç¾¤ redis clusterï¼šredisé›†ç¾¤ rdb fileï¼š.rdbæ–‡ä»¶ aof fileï¼š.aofæ–‡ä»¶ serversï¼šredisåœ°å€ç»„ï¼Œå¦‚æžœtype:twemproxyï¼Œåˆ™ä¸ºtwemproxyé…ç½®æ–‡ä»¶ï¼Œå¦‚æžœtype:rdb fileï¼Œåˆ™ä¸ºrdbæ–‡ä»¶åã€‚ redis_authï¼šè¿žæŽ¥redisæœåŠ¡çš„è®¤è¯authã€‚ timeoutï¼šè¯»å†™redisæœåŠ¡çš„è¶…æ—¶æ—¶é—´(ms)ï¼Œé»˜è®¤ä¸º120000ms hashï¼šå“ˆå¸Œæ–¹æ³•åã€‚ä»…å½“type:twemproxyæœ‰æ•ˆã€‚å¯ä»¥ä¸ºone_at_a_timeã€md5ã€crc16ã€crc32ã€crc32aã€fnv1_64ã€fnv1a_64ã€fnv1_32ã€fnv1a_32ã€hsiehã€murmurã€jenkinsã€‚ hash_tagï¼šç”¨æ¥å“ˆå¸Œçš„å…³é”®keyçš„ä¸¤ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚â€{}â€ æˆ– â€œ$$â€ã€‚ä»…å½“type:twemproxyæœ‰æ•ˆã€‚åªè¦æ ‡ç­¾å†…çš„å…³é”®keyæ˜¯ç›¸åŒçš„ï¼Œèƒ½å¤Ÿå°†ä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€æœåŠ¡å™¨ã€‚ distributionï¼šé”®çš„åˆ†å¸ƒæ¨¡å¼ã€‚ä»…å½“type:twemproxyæœ‰æ•ˆã€‚å¯ä»¥ä¸º ketamaã€modulaã€randomã€‚ [common]ï¼š listenï¼šç›‘å¬çš„åœ°å€å’Œç«¯å£ã€‚é»˜è®¤ä¸º127.0.0.1:8888 max_clientsï¼šå¯ç›‘å¬ç«¯å£çš„æœ€å¤§è¿žæŽ¥æ•°ã€‚é»˜è®¤ä¸º100 threadsï¼šå·¥å…·å¯ç”¨çš„æœ€å¤šçº¿ç¨‹æ•°ã€‚é»˜è®¤ä¸ºcpuå†…æ ¸æ•°ã€‚ stepï¼šè§£æžè¯·æ±‚çš„æ­¥æ•°ã€‚é»˜è®¤ä¸º1ï¼Œæ•°å­—è¶Šå¤§ï¼Œè¿ç§»è¶Šå¿«ï¼Œéœ€è¦è¶Šå¤šçš„å†…å­˜ã€‚ mbuf_sizeï¼šè¯·æ±‚çš„ç¼“å­˜å¤§å°ï¼ˆMï¼‰ï¼Œé»˜è®¤ä¸º512M noreplyï¼šæ˜¯å¦æ£€æŸ¥ç›®æ ‡ç»„çš„å›žå¤ï¼Œé»˜è®¤ä¸ºfalse source_safeï¼šæ˜¯å¦ä¿æŠ¤æºç»„æœºå™¨çš„å†…å­˜å®‰å…¨ã€‚é»˜è®¤ä¸ºtrueï¼Œå·¥å…·å°†å…è®¸åœ¨æºç»„çš„åŒä¸€å°æœºå™¨åŒæ—¶åªæœ‰ä¸€ä¸ªredisç”Ÿæˆ.rdbã€‚ dirï¼šå·¥ä½œç›®å½•ã€‚ç”¨æ¥å­˜å‚¨æ–‡ä»¶ï¼Œä¾‹å¦‚rdbæ–‡ä»¶ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚ filterï¼šè¿‡æ»¤ä¸ç¬¦åˆè¡¨è¾¾å¼çš„Keyï¼Œé»˜è®¤ä¸ºNULLï¼Œæ”¯æŒé€šé…ç¬¦ä¸ºglob-styleé£Žæ ¼ ? ï¼š1ä¸ªä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ h?llo åŒ¹é… hello, hallo , hxllo * ï¼š0ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ h*llo åŒ¹é… hllo ï¼Œ heeeello [characters]ï¼šåŒ¹é…ä»»æ„ä¸€ä¸ªæ–¹æ‹¬å·å†…çš„å­—ç¬¦ï¼Œæ¯”å¦‚[abc]ï¼Œè¦ä¹ˆåŒ¹é…aï¼Œè¦ä¹ˆåŒ¹é…bï¼Œè¦ä¹ˆåŒ¹é…cã€‚ä¾‹å¦‚ h[ae]llo åŒ¹é… hello ï¼Œ hallo, ä½†ä¸åŒ¹é… hilloã€‚ [^character]ï¼šæŽ’é™¤æ–¹æ‹¬å·å†…çš„å­—ç¬¦ã€‚ä¾‹å¦‚h[^e]llo åŒ¹é… hallo, hbllo, â€¦ ä½†ä¸åŒ¹é… helloã€‚ [character-character]ï¼šè¡¨ç¤º2ä¸ªå­—ç¬¦èŒƒå›´å†…çš„éƒ½å¯ä»¥åŒ¹é…ï¼Œå¦‚[a-z]ï¼Œ[0-9]ã€‚ä¾‹å¦‚h[a-b]llo åŒ¹é… hallo å’Œ hblloã€‚ \ç”¨æ¥è½¬ç§»ç‰¹æ®Šå­—ç¬¦ã€‚ é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼šï¼ˆ1ï¼‰ä»Žå•ä¸€å®žä¾‹è¿ç§»æ•°æ®åˆ°twemproxyé›†ç¾¤ï¼ˆsingle to twemproxyï¼‰ï¼š12345678910111213141516171819202122232425[source]type: singleservers: - 127.0.0.1:6379 - 127.0.0.1:6380 - 127.0.0.1:6381 - 127.0.0.1:6382[target]type: twemproxyhash: fnv1a_64hash_tag: &quot;&#123;&#125;&quot;distribution: ketamaservers: - 127.0.0.1:6380:1 server1 - 127.0.0.1:6381:1 server2 - 127.0.0.1:6382:1 server3 - 127.0.0.1:6383:1 server4[common]listen: 0.0.0.0:8888threads: 2step: 1mbuf_size: 1024source_safe: true ï¼ˆ2ï¼‰ä»Žtwemproxyé›†ç¾¤è¿ç§»æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆtwemproxy to redis clusterï¼‰1234567891011121314151617181920[source]type: twemproxyhash: fnv1a_64hash_tag: &quot;&#123;&#125;&quot;distribution: ketamaservers: - 127.0.0.1:6379 - 127.0.0.1:6380 - 127.0.0.1:6381 - 127.0.0.1:6382[target]type: redis clusterservers: - 127.0.0.1:7379[common]listen: 0.0.0.0:8888step: 1mbuf_size: 512 ï¼ˆ3ï¼‰ä»Žä¸€ä¸ªredisé›†ç¾¤è¿ç§»æ•°æ®åˆ°å¦ä¸€ä¸ªé›†ç¾¤ï¼ˆredis cluster to another redis clusterï¼‰ï¼Œé…ç½®filterä¸ºä»¥â€abcâ€å¼€å§‹çš„é”®12345678910111213[source]type: redis clusterservers: - 127.0.0.1:8379[target]type: redis clusterservers: - 127.0.0.1:7379[common]listen: 0.0.0.0:8888filter: abc* ï¼ˆ4ï¼‰ä»Ž.rdbæ–‡ä»¶å¯¼å…¥æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆrdb file to redis clusterï¼‰12345678910111213141516[source]type: rdb fileservers: - /data/redis/dump1.rdb - /data/redis/dump2.rdb[target]type: redis clusterservers: - 127.0.0.1:7379[common]listen: 0.0.0.0:8888step: 2mbuf_size: 512source_safe: false ï¼ˆ5ï¼‰ä¿å­˜redisé›†ç¾¤çš„æ•°æ®åˆ°.rdbï¼ˆredis cluster to rdb fileï¼‰1234567891011[source]type: redis clusterservers: - 127.0.0.1:7379[target]type: rdb file[common]listen: 0.0.0.0:8888source_safe: true ï¼ˆ6ï¼‰ä»Ž.aofæ–‡ä»¶å¯¼å…¥æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆaof file to redis clusterï¼‰1234567891011121314[source]type: aof fileservers: - /data/redis/appendonly1.aof - /data/redis/appendonly2.aof[target]type: redis clusterservers: - 127.0.0.1:7379[common]listen: 0.0.0.0:8888step: 2 ï¼ˆ7ï¼‰ä»Žredisé›†ç¾¤è¿ç§»æ•°æ®åˆ°å•ä¸€å®žä¾‹ï¼ˆredis cluster to singleï¼‰123456789101112[source]type: redis clusterservers: - 127.0.0.1:8379[target]type: singleservers: - 127.0.0.1:6379[common]listen: 0.0.0.0:8888 ï¼ˆ8ï¼‰ä»Žå•ä¸€å®žä¾‹è¿ç§»æ•°æ®åˆ°redisé›†ç¾¤ï¼ˆsingle to redis clusterï¼‰123456789101112[source]type: singleservers: - 127.0.0.1:6379[target]type: redis clusterservers: - 127.0.0.1:7379[common]listen: 0.0.0.0:8888 ç›‘å¬redis-migrate-toolå¯ä»¥ä½¿ç”¨redis-cliè¿žæŽ¥å·¥å…·ï¼Œç›‘å¬åœ°å€å’Œç«¯å£è®¾ç½®åœ¨é…ç½®æ–‡ä»¶çš„[common]ä¸‹çš„listenï¼Œé»˜è®¤ä¸º127.0.0.1:8888 1. infoæŒ‡ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041$redis-cli -h 127.0.0.1 -p 8888127.0.0.1:8888&gt; info# Serverversion:0.1.0 # å·¥å…·çš„ç‰ˆæœ¬å·os:Linux 2.6.32-573.12.1.el6.x86_64 x86_64 # æ“ä½œç³»ç»Ÿä¿¡æ¯multiplexing_api:epoll # å¤šè·¯å¤ç”¨æŽ¥å£gcc_version:4.4.7 # gccç‰ˆæœ¬process_id:9199 # å·¥å…·çš„è¿›ç¨‹idtcp_port:8888 # å·¥å…·ç›‘å¬çš„tcpç«¯å£å·uptime_in_seconds:1662 # å·¥å…·è¿è¡Œçš„æ—¶é—´ï¼ˆç§’ï¼‰uptime_in_days:0 # å·¥å…·è¿è¡Œçš„æ—¶é—´ï¼ˆå¤©ï¼‰config_file:/ect/rmt.conf # å·¥å…·è¿è¡Œçš„é…ç½®æ–‡ä»¶åç§°# Clientsconnected_clients:1 # å½“å‰è¿žæŽ¥çš„å®¢æˆ·ç«¯æ•°max_clients_limit:100 # å®¢æˆ·ç«¯åŒæ—¶è¿žæŽ¥æœ€å¤§é™åˆ¶total_connections_received:3 # è‡³ä»Šæ€»å…±è¿žæŽ¥# Memorymem_allocator:jemalloc-4.0.4# Groupsource_nodes_count:32 # æºredisç»„çš„èŠ‚ç‚¹æ•°target_nodes_count:48 # ç›®çš„redisç»„çš„èŠ‚ç‚¹æ•°# Statsall_rdb_received:1 # æ˜¯å¦å·²æŽ¥æ”¶æºredisç»„èŠ‚ç‚¹çš„æ‰€æœ‰.rdbæ–‡ä»¶all_rdb_parsed:1 # æ˜¯å¦å·²è§£æžæºredisç»„èŠ‚ç‚¹çš„æ‰€æœ‰.rdbæ–‡ä»¶all_aof_loaded:0 # æ˜¯å¦å·²åŠ è½½æºredisç»„èŠ‚ç‚¹çš„æ‰€æœ‰.aofæ–‡ä»¶rdb_received_count:32 # å·²æŽ¥æ”¶çš„æºredisç»„èŠ‚ç‚¹.rdbæ–‡ä»¶æ•°rdb_parsed_count:32 # å·²è§£æžçš„æºredisç»„èŠ‚ç‚¹.rdbæ–‡ä»¶æ•°aof_loaded_count:0 # å·²åŠ è½½çš„æºredisç»„èŠ‚ç‚¹.aofæ–‡ä»¶æ•°total_msgs_recv:7753587 # ä»Žæºç»„èŠ‚ç‚¹æŽ¥æ”¶çš„æ‰€æœ‰æ¶ˆæ¯æ•°total_msgs_sent:7753587 # æ‰€æœ‰å·²å‘é€ç›®æ ‡èŠ‚ç‚¹å¹¶ä¸”æ”¶åˆ°çš„å“åº”çš„æ¶ˆæ¯æ•°total_net_input_bytes:234636318 # ä»Žæºç»„æŽ¥æ”¶çš„è¾“å…¥å­—èŠ‚çš„æ€»æ•°total_net_output_bytes:255384129 # å·²å‘é€åˆ°ç›®æ ‡ç»„çš„è¾“å‡ºå­—èŠ‚çš„æ€»æ•°total_net_input_bytes_human:223.77M # åŒtotal_net_input_bytesï¼Œè€Œæ˜¯è½¬æ¢æˆäººç±»å¯è¯»çš„ã€‚total_net_output_bytes_human:243.55M # åŒtotal_net_output_bytesï¼Œè€Œæ˜¯è½¬æ¢æˆäººç±»å¯è¯»çš„ã€‚total_mbufs_inqueue:0 # æ¥è‡ªæºç»„çš„mbufsè¾“å…¥ç¼“å­˜çš„å‘½ä»¤æ•°æ®(ä¸åŒ…æ‹¬rdbæ•°æ®)total_msgs_outqueue:0 # å°†è¢«å‘é€åˆ°ç›®æ ‡ç»„ï¼Œå’Œå·²è¢«å‘é€åˆ°ç›®æ ‡ï¼Œä½†æ­£åœ¨ç­‰å¾…å“åº”çš„æ¶ˆæ¯æ•°127.0.0.1:8888&gt; 2. shutdown [seconds|asap] æ‰§è¡ŒæŒ‡ä»¤åŽçš„è¡Œä¸ºï¼š åœæ­¢ä»Žæºrediså¤åˆ¶ å°è¯•å°†å·¥å…·ä¸­çš„ç¼“å­˜æ•°æ®å‘é€åˆ°ç›®æ ‡redis Redis-migrate-tool åœæ­¢ï¼Œé€€å‡º å‚æ•°ï¼š secondsï¼šå·¥å…·ç”¨äºŽåœ¨é€€å‡ºä¹‹å‰å°†ç¼“å­˜çš„æ•°æ®å‘é€åˆ°ç›®æ ‡redisçš„å¤§å¤šæ•°æ—¶é—´ã€‚é»˜è®¤ä¸º10ç§’ã€‚ asapï¼šä¸å…³å¿ƒç¼“å­˜çš„æ•°æ®ï¼Œç«‹å³é€€å‡ºã€‚ ä¾‹å¦‚ï¼Œ1234$ redis-cli -h 127.0.0.1 -p 8888127.0.0.1:8888&gt; shutdown 5OK(5.00s) æ€»ç»“ ä¸é€‚ç”¨redis4.0.xåŠä»¥ä¸Šç‰ˆæœ¬ï¼ˆé«˜ç‰ˆæœ¬è¿ç§»å°ç¼–ä¼šå°½å¿«å‡º~ï¼‰ å½“æºä¸­å­˜åœ¨å¤šåº“æ—¶ï¼Œé¿å…å‘ç”Ÿé”®å€¼è¦†ç›–ï¼Œæœ€å¥½æ¢åˆ«çš„æ–¹å¼è¿ç§» å¤šæºè¦ä¸éƒ½ä¸å¸¦å¯†ç ï¼Œè¦ä¸æºæ˜¯åŒä¸€ä¸ªå¯†ç ï¼Œå¦åˆ™æ— æ³•å¯åŠ¨ï¼Œåœ¨çº¿å˜æ›´å¯†ç å¯ä»¥é€šè¿‡config set requirepass [å¯†ç ]]]></content>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redis Clusteræ•°æ®è¿ç§»å•å®žä¾‹æ–¹æ¡ˆå®žæˆ˜]]></title>
    <url>%2F2019%2F08%2F01%2FCluster%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%8D%95%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%A1%88%E5%AE%9E%E6%88%98%2F</url>
    <content type="text"><![CDATA[å‰è¨€Redisé›†ç¾¤åŒæ­¥è¿ç§»çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚redis-port,redis-migrate-toolç­‰å·¥å…·ï¼Œæœ¬æ–‡ä¸»è¦è®²CentOSé€šè¿‡redis-migrate-toolä»Žé›†ç¾¤è¿ç§»åˆ°å•å®žä¾‹ã€‚ redis-migrate-tool æ˜¯ç»´å“ä¼šå¼€æºçš„ä¸€æ¬¾redisæ•°æ®è¿ç§»å·¥å…·ï¼ŒåŸºäºŽrediså¤åˆ¶ï¼Œå¿«é€Ÿï¼Œç¨³å®šï¼Œgithubåœ°å€ä¸ºï¼šhttps://github.com/vipshop/redis-migrate-tool ã€‚ è¿ç§»å·¥å…·çš„æ¥æºï¼ˆsourceï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®žä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ï¼Œaofæ–‡ä»¶ã€‚è¿ç§»å·¥å…·çš„ç›®æ ‡ï¼ˆtargetï¼‰å¯ä»¥æ˜¯ï¼šå•ç‹¬çš„rediså®žä¾‹ï¼Œtwemproxyé›†ç¾¤ï¼Œredis clusterï¼Œrdbæ–‡ä»¶ã€‚ç›®å‰æµ‹è¯•çš„Redisç‰ˆæœ¬ä¸º3.0.0ï¼Œå¦‚æžœæ˜¯4.0.xç‰ˆæœ¬å¯èƒ½ä¼šæŠ¥é”™12345[2019-07-31 16:57:50.393] rmt_redis.c:1517 MASTER &lt;-&gt; SLAVE sync: receiving 4860 bytes from master[172.16.255.34:7001@17001][2019-07-31 16:57:50.393] rmt_redis.c:1623 MASTER &lt;-&gt; SLAVE sync: RDB data for node[172.16.255.34:7001@17001] is received, used: 0 s[2019-07-31 16:57:50.393] rmt_redis.c:1643 rdb file node172.16.255.34:7001@17001-1564563470312707-6709.rdb write complete[2019-07-31 16:57:50.393] rmt_redis.c:6446 ERROR: Can&apos;t handle RDB format version -1549717496[2019-07-31 16:57:50.393] rmt_redis.c:6715 ERROR: Rdb file for node[172.16.255.34:7001@17001] parsed failed å¦‚ä¸ŠCan&#39;t handle RDB format version -1549717496ä¸ºç‰ˆæœ¬å…¼å®¹é—®é¢˜ï¼Œå„ä¸ªç‰ˆæœ¬çš„.rdbæ˜¯ä¸å…¼å®¹çš„ï¼Œrmtå·¥å…·ä¼¼ä¹Žè¿˜ä¸æ”¯æŒ4.0.Xã€‚ å¯è€ƒè™‘é™ç‰ˆæœ¬ï¼Œå¦‚æžœå¼€å¯äº†appendonly yesï¼Œå¯é€šè¿‡.aofæ–‡ä»¶è¿ç§»ã€‚ å½“å‰é›†ç¾¤æ•°æ®å­˜åœ¨ 172.16.255.34:7000 172.16.255.34:7001172.16.255.35:7002 172.16.255.35:7003172.16.255.36:7004 172.16.255.36:7005 éœ€è¦å°†é›†ç¾¤çš„æ•°æ®è¿ç§»åˆ°å•å®žä¾‹çš„172.16.255.34:6379 å®‰è£…ä¾èµ–ï¼š1$ yum -y install automake libtool autoconf bzip2 git å®‰è£…redis-migrate-toolï¼š12345$ git clone https://github.com/vipshop/redis-migrate-tool$ cd redis-migrate-tool$ autoreconf -fvi$ ./configure$ make æŸ¥çœ‹å‘½ä»¤å¸®åŠ©å¯æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ1$ src/redis-migrate-tool -h å¦‚æžœå‡ºçŽ°123456789$ src/redis-migrate-tool -hThis is redis-migrate-tool-0.1.0Usage: redis-migrate-tool [-?hVdIn] [-v verbosity level] [-o output file] [-c conf file] [-C command] [-f source address] [-t target address] [-p pid file] [-m mbuf size] [-r target role] [-T thread number] [-b buffer size].... å®‰è£…æˆåŠŸã€‚ æ›´å¤šä»‹ç»æŸ¥çœ‹redis-migrate-toolä½¿ç”¨è¯¦è§£ é…ç½®æ–‡ä»¶æ›´æ”¹redis-migrate-toolé»˜è®¤çš„é…ç½®æ–‡ä»¶ä¸ºrmt.confï¼Œæ›´æ”¹å¦‚ä¸‹1234567891011121314$ vi rmt.conf[source]type: redis clusterservers :-172.16.255.34:7000[target]type: singleservers:-172.16.255.34:6379[common]listen: 0.0.0.0:8888 Esc :wq ä¿å­˜é€€å‡ºã€‚ sourceä¸ºé›†ç¾¤ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ªserverså°±å¯ä»¥ã€‚ å¼€å§‹è¿ç§»1$ src/redis-migrate-tool -o log -d å¼€å§‹åœ¨åŽå°è¿è¡Œè¿ç§»ï¼ŒæŸ¥çœ‹è¿è¡Œæ—¥å¿— tail -200 logã€‚123....[2019-08-01 11:59:19.919] rmt_redis.c:6601 Rdb file for node[172.16.255.34:7000] parsed finished, use: 0 s.[2019-08-01 11:59:19.919] rmt_redis.c:6709 All nodes&apos; rdb file parsed finished for this write thread(0). å¯çœ‹è§All nodes&#39; rdb file parsed finishedåˆ™è¡¨ç¤ºè¿è¡Œå®Œæˆã€‚ è¿è¡Œæ•°æ®æ£€æŸ¥1$ src/redis-migrate-tool -o log -d -C redis_check é»˜è®¤æŠ½æ ·1000ä¸ªæ•°æ®æ£€æŸ¥12345678910Check job is running...Checked keys: 1000Inconsistent value keys: 0Inconsistent expire keys : 0Other check error keys: 0Checked OK keys: 1000All keys checked OK!Check job finished, used 1.041s è¿ç§»æˆåŠŸ~ å¦‚æžœä¸­é€”è¿ç§»å¤±è´¥ï¼Œä½¿ç”¨redis-cli -h 172.16.255.34ï¼Œæ¸…é™¤keys1172.16.255.34:6379&gt; flushall keys *æ£€æŸ¥æ˜¯å¦æ¸…ç©ºï¼Œä»¥å…listç­‰æ•°æ®è¿ç§»æ—¶ä¼šå¢žé‡ï¼Œredis_checkä¼šæ£€æŸ¥ä¸€éƒ¨åˆ†æ•°æ®ä¸ä¸€è‡´ï¼Œä½ ä¼šå‘çŽ°éƒ½æ˜¯æ˜¾ç¤ºlist1[2019-07-31 17:00:27.185] rmt_check.c:848 ERROR: key checked failed: check key&apos;s value error, value is inconsistent. key(len:15, type:list): 509A4C6A4WAY_46 Javaä½¿ç”¨JedisClusterè¿žæŽ¥é›†ç¾¤çš„æ”¹æˆJedisPool12345678910@Overridepublic void afterPropertiesSet() throws Exception &#123; if (mJedis == null) &#123; mJedisPool = new JedisPool(genericObjectPoolConfig, hostName, Integer.valueOf(port), timeout); mJedis = mJedisPool.getResource(); &#125;&#125;@Autowiredprivate Jedis jedis;]]></content>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå‡ºçŽ°RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054]]></title>
    <url>%2F2019%2F07%2F29%2Fgit%E5%87%BA%E7%8E%B0RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨Hexoåšå®¢å¢žåŠ æœ¬åœ°æ–‡ä»¶èµ„æºä¸‹è½½ä¹‹åŽï¼Œdeployå‘å¸ƒæ—¶å‡ºçŽ°ï¼š123error: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054fatal: The remote end hung up unexpectedlyEverything up-to-date ä¸»è¦æ˜¯å› ä¸ºä¸€æ¬¡æ€§æäº¤çš„æ–‡ä»¶è¿‡å¤§ï¼Œè¶…å‡ºäº†HTTPç¼“å­˜çš„ä¸Šé™ã€‚ è§£å†³ é€šè¿‡é…ç½®ç¼“å­˜å¯è§£å†³ã€‚1git config --global http.postBuffer 100M æŸ¥çœ‹é…ç½®git config --list]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Scrapy+Seleniumçˆ¬å–åŠ¨æ€æ¸²æŸ“ç½‘ç«™]]></title>
    <url>%2F2019%2F07%2F17%2FScrapy-Selenium%E7%88%AC%E5%8F%96%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%E7%BD%91%E7%AB%99%2F</url>
    <content type="text"><![CDATA[1.ç®€ä»‹Seleniumæ˜¯ä¸€ä¸ªç”¨äºŽWebåº”ç”¨ç¨‹åºæµ‹è¯•çš„å·¥å…·ã€‚ç›´æŽ¥è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå°±åƒçœŸæ­£çš„ç”¨æˆ·åœ¨æ“ä½œä¸€æ ·ã€‚æ”¯æŒçš„æµè§ˆå™¨åŒ…æ‹¬IEï¼ˆ7, 8, 9, 10, 11ï¼‰ï¼ŒFirefoxï¼ŒSafariï¼ŒChromeï¼ŒOperaç­‰ï¼Œåœ¨çˆ¬è™«ä¸Šåˆ™æ˜¯æ¨¡æ‹Ÿæ­£å¸¸ç”¨æˆ·è®¿é—®ç½‘é¡µå¹¶èŽ·å–æ•°æ®ã€‚ 2.å®‰è£… Selenium1&gt; pip install selenium 3.å®‰è£…é©±åŠ¨æ¨¡æ‹ŸçœŸæ­£çš„ç”¨æˆ·æ“ä½œå½“ç„¶éœ€è¦é€‰æ‹©å¥½ç”¨æ¥æ“ä½œçš„æµè§ˆå™¨ï¼Œæ ¹æ®æµè§ˆå™¨æ¥å®‰è£…ç›¸åº”çš„é©±åŠ¨è°ƒèµ·ã€‚ 3.1 Chromeä½¿ç”¨seleniumé©±åŠ¨chromeæµè§ˆå™¨éœ€è¦ä¸‹è½½chromedriverï¼Œè€Œä¸”chromedriverç‰ˆæœ¬éœ€è¦ä¸Žchromeçš„ç‰ˆæœ¬å¯¹åº”ï¼Œç‰ˆæœ¬é”™è¯¯çš„è¯åˆ™ä¼šè¿è¡ŒæŠ¥é”™ã€‚ æŸ¥çœ‹chromeçš„ç‰ˆæœ¬ï¼Œå¯é€šè¿‡å¸®åŠ© &gt; å…³äºŽGoogle Chrome(G)ã€‚ ä¸‹è½½chromedriverå¯ä»¥é€šè¿‡æ·˜å®é•œåƒåœ°å€ï¼šhttp://npm.taobao.org/mirrors/chromedriver/ ã€‚æœ€æ–°çš„é•œåƒä¸ŽChromeåŒåï¼Œå°½é‡é€‰æ‹©ç‰ˆæœ¬ç›¸è¿‘çš„é¿å…å…¼å®¹é—®é¢˜ï¼Œé•œåƒä¸‹notes.txtå¯æŸ¥çœ‹å½“å‰é©±åŠ¨æ”¯æŒçš„ç‰ˆæœ¬ã€‚ é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ï¼Œä¸‹è½½å®Œè§£åŽ‹å°†chromedriver.exeæ”¾åœ¨æœ‰è®¾ç½®çŽ¯å¢ƒå˜é‡çš„ç›®å½•ä¸‹ï¼Œå°ç¼–æ˜¯æ”¾åœ¨pythonçš„å®‰è£…ç›®å½•ä¸‹çš„ï¼Œå³python.exeæ‰€åœ¨çš„ç›®å½•ã€‚ 3.2 Firefoxä½¿ç”¨seleniumé©±åŠ¨Firefoxæµè§ˆå™¨éœ€è¦ä¸‹è½½geckodriverï¼ŒæŸ¥çœ‹æµè§ˆå™¨ç‰ˆæœ¬é€šè¿‡å¸®åŠ© &gt; å…³äºŽ Firefoxã€‚ ä¸‹è½½geckodriverå¯é€šè¿‡mozillaçš„ä»“åº“åœ°å€ï¼šhttps://github.com/mozilla/geckodriver/releasesã€‚ é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ï¼Œè§£åŽ‹åŽgeckodriver.exeåŒæ ·ä¹Ÿæ˜¯æ”¾åœ¨pythonçš„å®‰è£…ç›®å½•ä¸‹ã€‚ 3.3 å…¶å®ƒæµè§ˆå™¨é©±åŠ¨ä¸‹è½½Operaï¼šhttp://npm.taobao.org/mirrors/operadriver/ IEï¼šhttp://selenium-release.storage.googleapis.com/index.html ï¼ˆç‰ˆæœ¬å·è¦ä¸Žseleniumçš„ç‰ˆæœ¬ä¸€è‡´ï¼ŒæŸ¥çœ‹å®‰è£…çš„seleniumç‰ˆæœ¬ï¼Œå¯é€šè¿‡pip show seleniumï¼‰å¦‚æžœæ²¡æœ‰vpnå¯èƒ½ä¼šæ‰“ä¸å¼€ï¼Œå¯ç‚¹å‡»ä¸‹è½½3.14.0ç‰ˆæœ¬çš„ã€‚ 4.Seleniumä½¿ç”¨4.1 Chrome é…ç½®123456options = webdriver.ChromeOptions()## æ— ç•Œé¢# options.add_argument('--headless')driver = webdriver.Chrome(chrome_options=options)driver.set_window_size(1366, 768)driver.set_page_load_timeout(self.timeout) æ³¨æ„Chromeå¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™ç›¸å…³é…ç½®ï¼Œå°ç¼–ä¹ æƒ¯æ€§ç”¨FirefoxðŸ˜‚ 4.2 Firefox é…ç½®1234567# å®žä¾‹åŒ–å‚æ•°å¯¹è±¡options = webdriver.FirefoxOptions()# æ— ç•Œé¢# options.add_argument('--headless')driver = webdriver.Firefox(firefox_options=options)driver.set_window_size(1400, 700)driver.set_page_load_timeout(self.timeout) 4.3 ä¸æ˜¾ç¤ºæ‰“å¼€æµè§ˆå™¨çš„ç•Œé¢æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸æƒ³è¦çœ‹åˆ°çˆ¬å–çš„ä¸€æ­¥æ­¥æ“ä½œï¼Œåªå…³å¿ƒç»“æžœï¼Œåˆ™å¯ä»¥åœ¨å‚æ•°é…ç½®12# æ— ç•Œé¢options.add_argument('--headless') 4.4 ç¦ç”¨æµè§ˆå™¨å¼¹çª—ä¸æ˜¯é¡µé¢å¼¹çª—ï¼Œæ˜¯æµè§ˆå™¨è®¾ç½®é‡Œçš„å¼¹çª—ã€‚åœ¨æ‰“å¼€æµè§ˆå™¨æ—¶ï¼Œä½¿ç”¨å‚æ•°é…ç½®å…³é—­Firefox12options.set_preference('dom.webnotifications.enabled', False)options.set_preference('dom.push.enabled', False) Chrome123456prefs = &#123; 'profile.default_content_setting_values': &#123; 'notifications': 2 &#125;&#125;options.add_experimental_option('prefs', prefs) 4.5 driverå±žæ€§å’Œæ–¹æ³• é¡µé¢åŠ è½½ 1driver.get("http://www.baidu.com") å…³é—­æµè§ˆå™¨ 12# çˆ¬è™«ç»“æŸå…³é—­æµè§ˆå™¨driver.close() èŽ·å–å½“å‰url 1driver.current_url åˆ·æ–° 1driver.refresh() é¡µé¢æ ‡é¢˜ 1driver.title é¡µé¢æ¸²æŸ“åŽçš„æºç  1driver.page_source èŽ·å–çª—å£ä¿¡æ¯ 1driver.get_window_rect() èŽ·å–å½“å‰çª—å£çš„x,yåæ ‡å’Œå½“å‰çª—å£çš„é«˜åº¦å’Œå®½åº¦ï¼Œå¦‚ï¼š{â€˜heightâ€™: 1366, â€˜widthâ€™: 768, â€˜xâ€™: 0, â€˜yâ€™: 200} è®¾ç½® User Agent(Firefoxä¸ºä¾‹) 123profile = webdriver.FirefoxProfile()profile.set_preference("general.useragent.override", "some UA string")driver = webdriver.Firefox(profile=profile) æ‰§è¡Œjsè„šæœ¬ ä½¿ç”¨driver.execute_script([jsè„šæœ¬],*args)åŒæ­¥æ‰§è¡Œï¼Œå¦‚æ»‘åŠ¨åˆ°ç¬¬ä¸€ä¸ªclassä¸ºcm-explain-bottomçš„å…ƒç´ ä½ç½®ã€‚ 12driver.execute_script( "document.getElementsByClassName('cm-explain-bottom')[0].scrollIntoView(true)") å¼‚æ­¥æ‰§è¡Œä½¿ç”¨driver.execute_async_script([jsè„šæœ¬],*args)ï¼Œ*argswä¸ºæ‰§è¡Œjsä»£ç è¦ä¼ å…¥çš„å‚æ•°ã€‚ æŸ¥æ‰¾å…ƒç´  è¿”å›žä¸€ä¸ªWebElementå¯¹è±¡ã€‚ é€šè¿‡idå±žæ€§ï¼šelement = driver.find_element_by_id(&quot;coolestWidgetEvah&quot;) é€šè¿‡classå±žæ€§ï¼šcheeses = driver.find_elements_by_class_name(&quot;cheese&quot;) é€šè¿‡æ ‡ç­¾åï¼šframe = driver.find_element_by_tag_name(&quot;iframe&quot;) é€šè¿‡cssé€‰æ‹©å™¨ï¼šcheese = driver.find_element_by_css_selector(&quot;#food span.dairy.aged&quot;) é€šè¿‡nameå±žæ€§ï¼šcheese = driver.find_element_by_name(&quot;cheese&quot;) é€šè¿‡xpathï¼šinputs = driver.find_elements_by_xpath(&quot;//input&quot;) é€šè¿‡é“¾æŽ¥æ–‡æœ¬ï¼ˆå®Œå…¨åŒ¹é…ï¼‰ï¼šcheese = driver.find_element_by_link_text(&quot;cheese&quot;) é€šè¿‡é“¾æŽ¥æ–‡æœ¬ï¼ˆéƒ¨åˆ†åŒ¹é…ï¼‰ï¼šcheese = driver.find_element_by_partial_link_text(&quot;cheese&quot;) å…ƒç´ (WebElement)çš„å±žæ€§å’Œæ–¹æ³• æ ‡ç­¾ä¸‹æ–‡æœ¬ï¼šelement.text ç‚¹å‡»ï¼šelement.click() è¡¨å•æäº¤ï¼šelement.submit() è¾“å…¥ï¼šelement.send_keys(123) ç¤ºä¾‹ï¼š 123456789# ç­‰å¾…é‚®ç®±å’Œå¯†ç å¯å®šä½åŠç™»å½•æŒ‰é’®å¯æäº¤ï¼Œæ¸…ç©ºè¾“å…¥æ¡†ï¼Œåˆ†åˆ«è¾“å…¥ç”¨æˆ·åå¯†ç ç‚¹å‡»æäº¤æŒ‰é’®email = self.wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, "#email")))passwd = self.wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, "#pass")))submit = self.wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, '#loginbutton')))email.clear()passwd.clear()email.send_keys(user)passwd.send_keys(password)submit.click() Cookieæ“ä½œ 1234567891011121314151617driver.get("http://www.example.com")# ç»™å½“å‰urlåŸŸè®¾ç½®cookie# nameçš„å€¼å¯¹åº”cookie keyï¼Œvalueçš„å€¼å¯¹åº”cookie valuedriver.add_cookie(&#123;'name':'key', 'value':'value', 'path':'/'&#125;)# å¯é€‰çš„å±žæ€§# 'domain' -&gt; String,# 'secure' -&gt; Boolean,# 'expiry' -&gt; Milliseconds since the Epoch it should expire.# è¾“å‡ºå½“å‰urlæ‰€æœ‰çš„Cookiefor cookie in driver.get_cookies(): print "%s -&gt; %s" % (cookie['name'], cookie['value'])# é€šè¿‡nameåˆ é™¤Cookiedriver.delete_cookie("CookieName")# åˆ é™¤æ‰€æœ‰çš„Cookiedriver.delete_all_cookies() åˆ‡æ¢é¡µé¢æ¡†æž¶æˆ–çª—å£ 1driver.switch_to.window("windowName") åˆ‡æ¢é»˜è®¤æ¡†æž¶ï¼šdriver.switch_to.default_content() åˆ‡æ¢æœ€æ–°çª—å£ï¼š 123windows = driver.window_handles# åˆ‡æ¢åˆ°æœ€æ–°æ‰“å¼€çš„çª—å£ä¸­switch_to.window(windows[-1]) èŽ·å–æœ€æ–°çš„alertå¼¹çª— 123alert = driver.switch_to.alert# å…³é—­å¼¹çª—alert.dismiss() å½“å‰çš„urlè¿”å›žæˆ–è€…è·Ÿè¿› 12driver.forward()driver.back() æˆªå± 123456# è¿”å›žé¡µé¢çš„base64ç¼–ç å­—ç¬¦ä¸²base64 = driver.get_screenshot_as_base64()# è¿”å›žä¿å­˜åˆ°æ–‡ä»¶çš„ç»“æžœresult = driver.get_screenshot_as_file("D:\\example.png")# pngæ ¼å¼çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²pngSrc = driver.get_screenshot_as_png() ä½¿ç”¨Seleniumçˆ¬å–ä¸ƒéº¦æ•°æ®APPæŽ’è¡Œæ¦œï¼šç‚¹å‡»å‰å¾€]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Scrapy-çˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯é‡Šä¹‰]]></title>
    <url>%2F2019%2F07%2F16%2FScrapy-%E7%88%AC%E5%8F%96%E6%9C%89%E9%81%93%E7%BF%BB%E8%AF%91%E7%9A%84%E5%8D%95%E8%AF%8D%E9%87%8A%E4%B9%89%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç†Ÿæ‚‰Scrapyæ¡†æž¶åŽï¼Œæˆ‘ä»¬æ‰‹å†™ç¬¬ä¸€ä¸ªçˆ¬è™«ï¼Œçˆ¬å–æœ‰é“ç¿»è¯‘çš„å•è¯å‘éŸ³ï¼Œå‘éŸ³æ–‡ä»¶é“¾æŽ¥ï¼Œé‡Šä¹‰ï¼Œä¾‹å¥ã€‚ éœ€è¦å…ˆç†Ÿæ‚‰Scrapyæ¡†æž¶çš„åŒå­¦ï¼šç‚¹å‡»å­¦ä¹  å¦‚å•è¯proportionï¼šæœ‰é“ç¿»è¯‘çš„è¯¦æƒ…è¿žæŽ¥ä¸º http://dict.youdao.com/w/eng/proportion ã€‚æœ¬ç¯‡æ–‡ç« çˆ¬å–çš„å†…å®¹ç»“æžœï¼š12345678910&#123;"example": [&#123;"en": "I seemed to have lost all sense of proportion.", "zh": "æˆ‘å¥½è±¡å·²ç»ä¸§å¤±äº†æœ‰å…³æ¯”ä¾‹çš„ä¸€åˆ‡æ„Ÿè§‰ã€‚"&#125;, &#123;"en": "The price of this article is out of(all) proportion to its value.", "zh": "è¿™ä¸ªå•†å“çš„ä»·æ ¼ä¸Žå®ƒçš„ä»·å€¼å®Œå…¨ä¸æˆæ¯”ä¾‹ã€‚"&#125;, &#123;"en": "But, the use of interception bases on the violation of the citizen rights, so it should be satisfactory of the principle of legal reservation and the principle of proportion.", "zh": "ä½†æ˜¯ï¼Œç›‘å¬çš„é€‚ç”¨æ˜¯ä»¥ä¾µå®³å…¬æ°‘æƒåˆ©ä¸ºå‰æçš„ï¼Œå› æ­¤ç›‘å¬åœ¨åˆ‘äº‹ä¾¦æŸ¥ä¸­çš„è¿ç”¨å¿…é¡»æ»¡è¶³æ³•å¾‹ä¿ç•™åŽŸåˆ™å’Œæ¯”ä¾‹åŽŸåˆ™çš„è¦æ±‚ã€‚"&#125;], "explain": ["n. æ¯”ä¾‹ï¼Œå æ¯”ï¼›éƒ¨åˆ†ï¼›é¢ç§¯ï¼›å‡è¡¡", "vt. ä½¿æˆæ¯”ä¾‹ï¼›ä½¿å‡è¡¡ï¼›åˆ†æ‘Š"], "pron": "[prÉ™'pÉ”ËÊƒ(É™)n]", "pron_url": "http://dict.youdao.com/dictvoice?audio=proportion&amp;type=1", "word": "proportion"&#125; åˆ›å»ºé¡¹ç›®åœ¨éœ€è¦åˆ›å»ºçš„ç›®å½•ä¸‹ï¼Œ1scrapy startproject youdaoeng å›žè½¦å³å¯åˆ›å»ºé»˜è®¤çš„Scrapyé¡¹ç›®æž¶æž„ã€‚ åˆ›å»ºItemåˆ›å»ºYoudaoengItemç»§æ‰¿scrapy.Itemï¼Œå¹¶å®šä¹‰éœ€è¦å­˜å‚¨çš„å•è¯ï¼Œå‘éŸ³ï¼Œå‘éŸ³æ–‡ä»¶é“¾æŽ¥ï¼Œé‡Šä¹‰ï¼Œä¾‹å¥ã€‚12345678910111213141516import scrapyclass YoudaoengItem(scrapy.Item): # define the fields for your item here like: # name = scrapy.Field() # å•è¯ word = scrapy.Field() # è‹±å¼å‘éŸ³ pron = scrapy.Field() # å‘éŸ³audioæ–‡ä»¶é“¾æŽ¥ pron_url = scrapy.Field() # é‡Šä¹‰ explain = scrapy.Field() # ä¾‹å¥ example = scrapy.Field() åˆ›å»ºSpideråœ¨spidersç›®å½•ä¸‹åˆ›å»ºEngSpider.pyï¼Œå¹¶åˆ›å»ºclass EngSpiderï¼Œç»§æ‰¿äºŽSpiderã€‚1234567891011121314from scrapy import Spiderclass EngSpider(Spider): name = "EngSpider" # å…è®¸è®¿é—®çš„åŸŸ allowed_domains = ["dict.youdao.com"] start_urls = [ 'http://dict.youdao.com/w/eng/agree', 'http://dict.youdao.com/w/eng/prophet', 'http://dict.youdao.com/w/eng/proportion'] def parse(self, response): pass nameï¼šç”¨äºŽåŒºåˆ«Spiderï¼Œè¯¥åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ start_urlsï¼šSpideråœ¨å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„urlåˆ—è¡¨ï¼Œé¦–å…ˆä¼šçˆ¬å–ç¬¬ä¸€ä¸ªã€‚ def parse(self, response)ï¼šå¾—åˆ°è¯·æ±‚urlåŽçš„responseä¿¡æ¯çš„è§£æžæ–¹æ³•ã€‚ æœ‰é“ç¿»è¯‘çš„ç½‘å€ä¸ºhttp://dict.youdao.com/ ï¼Œæ ¹æ®åˆ†æžï¼ŒæŸ¥è¯¢è‹±æ–‡å•è¯ç»“æžœåŽé“¾æŽ¥æ›´æ”¹ï¼Œå¦‚æŸ¥è¯¢agreeï¼Œè·³è½¬å•è¯è¯¦æƒ…åœ°å€ä¸ºhttp://dict.youdao.com/w/eng/agree ã€‚æ‰€ä»¥å‡ ä¹Žå¯ä»¥è®¤ä¸ºå•è¯çš„è¯¦æƒ…é¡µé“¾æŽ¥å¯ä»¥æ˜¯http://dict.youdao.com/w/eng/ æ‹¼æŽ¥ä¸Šå•è¯æœ¬èº«ï¼Œæ‰€ä»¥é…ç½®start_urlsæˆ‘ä»¬æŸ¥è¯¢ä¸‰ä¸ªå•è¯çš„é‡Šä¹‰è¯¦æƒ…ã€‚ è§£æžè§£æžç”¨çš„Selectorsé€‰æ‹©å™¨æœ‰å¤šç§æ–¹æ³•ï¼š xpath(): ä¼ å…¥xpathè¡¨è¾¾å¼ï¼Œè¿”å›žè¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨ ã€‚ css(): ä¼ å…¥CSSè¡¨è¾¾å¼ï¼Œè¿”å›žè¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨. extract(): åºåˆ—åŒ–è¯¥èŠ‚ç‚¹ä¸ºunicodeå­—ç¬¦ä¸²å¹¶è¿”å›žlistã€‚ re(): æ ¹æ®ä¼ å…¥çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œè¿”å›žunicodeå­—ç¬¦ä¸²liståˆ—è¡¨ã€‚ ä¸‹é¢æˆ‘ä»¬ç”¨xpath()é€‰æ‹©èŠ‚ç‚¹ï¼Œxpathçš„è¯­æ³•å¯å‚è€ƒw3cçš„http://www.w3school.com.cn/xpath/xpath_nodes.asp å­¦ä¹ ï¼Œéœ€è¦ç†Ÿæ‚‰è¯­æ³•ã€è¿ç®—ç¬¦ã€å‡½æ•°ç­‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849def parse(self, response): box = response.xpath('//*[@id="results-contents"]') word = YoudaoengItem() # ç®€æ˜Žé‡Šä¹‰ box_simple = box.xpath('.//*[@id="phrsListTab"]') # åˆ¤æ–­æŸ¥å‡ºæ¥çš„å­—æ˜¯å¦å­˜åœ¨ if box_simple: # å•è¯ word['word'] = box_simple.xpath('.//h2[@class="wordbook-js"]//span[@class="keyword"]/text()').extract()[0] # è‹±å¼å‘éŸ³ word['pron'] = box_simple.xpath( './/h2[@class="wordbook-js"]//div[@class="baav"]//*[@class="phonetic"]/text()').extract()[0] # å‘éŸ³é“¾æŽ¥ word['pron_url'] = "http://dict.youdao.com/dictvoice?audio=" + word['word'] + "&amp;type=1" # é‡Šä¹‰ word['explain'] = [] temp = box_simple.xpath('.//div[@class="trans-container"]//ul//li/text()').extract() for item in temp: if len(item) &gt; 0 and not re.search(r'\n', item) and not re.match(r' ', item): print(item) word['explain'].append(item) # ä¾‹å¥ time.sleep(3) word['example'] = [] example_root = box.xpath('//*[@id="bilingual"]//ul[@class="ol"]/li') # 1.åŒè¯­ä¾‹å¥æ˜¯å¦å­˜åœ¨ if example_root: for li in example_root: en = "" for span in li.xpath('./p[1]/span'): if span.xpath('./text()').extract(): en += span.xpath('./text()').extract()[0] elif span.xpath('./b/text()').extract(): en += span.xpath('./b/text()').extract()[0] zh = str().join(li.xpath('./p[2]/span/text()').extract()).replace(' ', '') word['example'].append(dict(en=en.replace('\"', '\\"'), zh=zh)) # 2.æŸ¯æž—æ–¯è‹±æ±‰åŒè§£å¤§è¾žå…¸çš„ä¾‹å¥æ˜¯å¦å­˜åœ¨ elif box.xpath('//*[@id="collinsResult"]//ul[@class="ol"]//div[@class="examples"]'): example_root = box.xpath('//*[@id="collinsResult"]//ul[@class="ol"]//li') for i in example_root: if i.xpath('.//*[@class="exampleLists"]'): en = i.xpath( './/*[@class="exampleLists"][1]//div[@class="examples"]/p[1]/text()').extract()[0] zh = i.xpath( './/*[@class="exampleLists"][1]//div[@class="examples"]/p[2]/text()').extract()[0] word['example'].append(dict(en=en.replace('\"', '\\"'), zh=zh)) if len(word['example']) &gt;= 3: break yield word æœ€åŽ yield wordåˆ™æ˜¯è¿”å›žè§£æžçš„word ç»™Item Pipelineï¼Œè¿›è¡ŒéšåŽçš„æ•°æ®è¿‡æ»¤æˆ–è€…å­˜å‚¨ã€‚ è¿è¡Œçˆ¬è™«-çˆ¬å–å•è¯é‡Šä¹‰è¿è¡Œçˆ¬è™«ï¼Œä¼šçˆ¬å–agreeã€prophetã€proportionä¸‰ä¸ªå•è¯çš„è¯¦æƒ…ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆscrapy.cfgæ‰€åœ¨çš„ç›®å½•ï¼‰1youdaoeng&gt;scrapy crawl EngSpider -o data.json å³å¯è¿è¡Œï¼Œçª—å£å¯ä»¥çœ‹è§çˆ¬å–çš„æ—¥å¿—å†…å®¹è¾“å‡ºï¼Œè¿è¡Œç»“æŸåŽä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªdata.jsonæ–‡ä»¶ã€‚ ç”Ÿæˆçš„æ•°æ®ä¸ºæ‰€æœ‰itemçš„jsonæ ¼å¼æ•°ç»„ï¼Œä¸­æ–‡å­—ç¬¦éƒ½æ˜¯Unicodeç¼–ç ï¼Œå¯é€šè¿‡ä¸€äº›åœ¨çº¿çš„jsonè§£æžç½‘ç«™å¦‚ https://www.bejson.com/ ï¼ŒUnicodeè½¬ä¸­æ–‡æŸ¥çœ‹æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æžœã€‚ ä¸‹è½½å•è¯è¯­éŸ³æ–‡ä»¶å•è¯è¯»éŸ³çš„mp3é“¾æŽ¥ä¸ºè§£æžæ—¶å€™ä¿å­˜çš„pron_urlå­—æ®µï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬ä¸‹è½½å•è¯mp3æ–‡ä»¶åˆ°æœ¬åœ°ã€‚åœ¨Itemä¸‹å¢žåŠ å±žæ€§pron_save_pathï¼Œå­˜å‚¨å‘éŸ³æ–‡ä»¶çš„æœ¬åœ°åœ°å€ï¼š12# å‘éŸ³ mp3 æœ¬åœ°å­˜æ”¾è·¯å¾„ pron_save_path = scrapy.Field() å¹¶åœ¨settings.pyæ–‡ä»¶ä¸­é…ç½®ä¸‹è½½æ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚åœ¨D:\scrapy_files\ç›®å½•ä¸‹ï¼Œåˆ™é…ç½®1FILES_STORE = "D:\\scrapy_files\\" å¢žåŠ ItemPipelineé‡æ–°å‘èµ·æ–‡ä»¶ä¸‹è½½è¯·æ±‚ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051class Mp3Pipeline(FilesPipeline): ''' è‡ªå®šä¹‰æ–‡ä»¶ä¸‹è½½ç®¡é“ ''' def get_media_requests(self, item, info): ''' æ ¹æ®æ–‡ä»¶çš„urlå‘é€è¯·æ±‚ï¼ˆurlè·Ÿè¿›ï¼‰ :param item: :param info: :return: ''' # metaæºå¸¦çš„æ•°æ®å¯ä»¥åœ¨responseèŽ·å–åˆ° yield scrapy.Request(url=item['pron_url'], meta=&#123;'item': item&#125;) def item_completed(self, results, item, info): ''' å¤„ç†è¯·æ±‚ç»“æžœ :param results: :param item: :param info: :return: ''' file_paths = [x['path'] for ok, x in results if ok] if not file_paths: raise DropItem("Item contains no files") # old_name = FILES_STORE + file_paths[0] # new_name = FILES_STORE + item['word'] + '.mp3' # æ–‡ä»¶é‡å‘½å ï¼ˆç›¸å½“äºŽå‰ªåˆ‡ï¼‰ # os.rename(old_name, new_name) # item['pron_save_path'] = new_name # è¿”å›žçš„resultæ˜¯é™¤åŽ»FILES_STOREçš„ç›®å½• item['pron_save_path'] = FILES_STORE + file_paths[0] return item def file_path(self, request, response=None, info=None): ''' è‡ªå®šä¹‰æ–‡ä»¶ä¿å­˜è·¯å¾„ é»˜è®¤çš„ä¿å­˜è·¯å¾„æ˜¯åœ¨FILES_STOREä¸‹åˆ›å»ºçš„ä¸€ä¸ªfullæ¥å­˜æ”¾ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³è¦ç›´æŽ¥åœ¨FILES_STOREä¸‹å­˜æ”¾ï¼Œåˆ™éœ€è¦è‡ªå®šä¹‰å­˜æ”¾è·¯å¾„ã€‚ é»˜è®¤ä¸‹è½½çš„æ˜¯æ— åŽç¼€çš„æ–‡ä»¶ï¼Œéœ€è¦å¢žåŠ .mp3åŽç¼€ :param request: :param response: :param info: :return: ''' file_name = request.meta['item']['word'] + ".mp3" return file_name éœ€è¦æ›´æ”¹settings.pyæ–‡ä»¶ï¼Œé…ç½®Mp3Pipelineï¼ŒåŽé¢çš„300ä¸ºä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½Žã€‚123456# Configure item pipelines# See https://doc.scrapy.org/en/latest/topics/item-pipeline.htmlITEM_PIPELINES = &#123; # 'youdaoeng.pipelines.YoudaoengPipeline': 300, 'youdaoeng.pipelines.Mp3Pipeline': 300,&#125; è¿è¡Œ1youdaoeng&gt;scrapy crawl EngSpider -o data1.json ç­‰å¾…è¿è¡Œå®Œæˆï¼Œåˆ™åœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆäº†data1.jsonï¼Œå¹¶åœ¨D:\scrapy_files\ç›®å½•ä¸‹ç”Ÿæˆäº†æˆ‘ä»¬çˆ¬å–çš„ä¸‰ä¸ªå•è¯çš„é‡Šä¹‰ã€‚ é¡¹ç›®æºç ]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Scrapy çˆ¬å–ä¸ƒéº¦ appæ•°æ®æŽ’è¡Œæ¦œ]]></title>
    <url>%2F2019%2F07%2F16%2FScrapy-%E7%88%AC%E5%8F%96%E4%B8%83%E9%BA%A6-app%E6%95%B0%E6%8D%AE%E6%8E%92%E8%A1%8C%E6%A6%9C%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç†Ÿæ‚‰Scrapyä¹‹åŽï¼Œæœ¬ç¯‡æ–‡ç« å¸¦å¤§å®¶çˆ¬å–ä¸ƒéº¦æ•°æ®ï¼ˆhttps://www.qimai.cn/rank ï¼‰çš„ios appstoreä»˜è´¹åº”ç”¨æŽ’è¡Œæ¦œå‰100ååº”ç”¨ã€‚ çˆ¬å–å†…å®¹åŒ…æ‹¬appåœ¨åˆ—è¡¨ä¸­çš„ä¸‹æ ‡ï¼Œappå›¾æ ‡åœ°å€ï¼Œappçš„åç§°ä¿¡æ¯ï¼Œappçš„ç±»åž‹ï¼Œåœ¨åˆ†ç±»ä¸­çš„æŽ’è¡Œï¼Œå¼€å‘è€…ï¼Œè¯¦æƒ…ç­‰ã€‚ è€ƒè™‘çš„é—®é¢˜ï¼š Forbidden by robots.txtçš„é”™è¯¯ ç½‘é¡µè¿”å›ž403 é¡µé¢é€šè¿‡åŠ¨æ€æ¸²æŸ“ï¼Œæ™®é€šçš„è¯·æ±‚urlï¼Œåœ¨é¡µé¢æ¸²æŸ“ä¹‹å‰å·²ç»è¿”å›žresponseï¼Œè§£æžæ²¡æœ‰æ•°æ® åˆ—è¡¨ä¸€é¡µ20ä¸ªappï¼Œæƒ³è¦æ‹¿åˆ°å‰100ä¸ªéœ€è¦ç¿»é¡µï¼Œä½†æ˜¯ç¿»é¡µæ²¡æœ‰æ›´æ”¹urlï¼Œè€Œæ˜¯é€šè¿‡jsåŠ¨æ€åŠ è½½ â€¦ éœ€è¦å…ˆç†Ÿæ‚‰Scrapyæ¡†æž¶çš„åŒå­¦ï¼šç‚¹å‡»å­¦ä¹  åˆ›å»ºé¡¹ç›®åœ¨éœ€è¦æ”¾ç½®é¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œ1&gt; scrapy startproject qimairank å›žè½¦å³å¯åˆ›å»ºé»˜è®¤çš„Scrapyé¡¹ç›®æž¶æž„ã€‚ åˆ›å»ºItemåˆ›å»ºItemæ¥å­˜å‚¨æˆ‘ä»¬çˆ¬å–çš„appåœ¨åˆ—è¡¨ä¸­çš„ä¸‹æ ‡ï¼Œappå›¾æ ‡åœ°å€ï¼Œappçš„åç§°ä¿¡æ¯ï¼Œappçš„ç±»åž‹ï¼Œåœ¨åˆ†ç±»ä¸­çš„æŽ’è¡Œï¼Œå¼€å‘è€…ï¼Œè¯¦æƒ…ã€‚ä¿®æ”¹items.pyï¼Œåœ¨ä¸‹é¢å¢žåŠ 123456789101112131415class RankItem(scrapy.Item): # ä¸‹æ ‡ index = scrapy.Field() # å›¾æ ‡åœ°å€ src = scrapy.Field() # appæ ‡é¢˜ä¿¡æ¯ title = scrapy.Field() # appç±»åž‹ type = scrapy.Field() # åˆ†ç±»ä¸­çš„æŽ’è¡Œ type_rank = scrapy.Field() # å¼€å‘è€… company = scrapy.Field() # è¯¦æƒ…ä¿¡æ¯ info = scrapy.Field() åˆ›å»ºSpideråœ¨spidersç›®å½•ä¸‹åˆ›å»ºRankSpider.pyï¼Œå¹¶åˆ›å»ºclass RankSpiderï¼Œç»§æ‰¿äºŽscrapy.Spiderã€‚12345678import scrapyclass RankSpider(scrapy.Spider): name = "RankSpider" start_urls = ["https://www.qimai.cn/rank"] def parse(self, response): pass nameï¼šç”¨äºŽåŒºåˆ«Spiderï¼Œè¯¥åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ start_urlsï¼šSpideråœ¨å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„urlåˆ—è¡¨ï¼Œé¦–å…ˆä¼šçˆ¬å–ç¬¬ä¸€ä¸ªã€‚ def parse(self, response)ï¼šå¾—åˆ°urlçš„responseä¿¡æ¯åŽçš„è§£æžæ–¹æ³•ã€‚ è§£æžä»˜è´¹æ¦œè§£æžç”¨çš„Selectorsé€‰æ‹©å™¨æœ‰å¤šç§æ–¹æ³•ï¼š xpath(): ä¼ å…¥xpathè¡¨è¾¾å¼ï¼Œè¿”å›žè¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨ ã€‚ css(): ä¼ å…¥CSSè¡¨è¾¾å¼ï¼Œè¿”å›žè¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨. extract(): åºåˆ—åŒ–è¯¥èŠ‚ç‚¹ä¸ºunicodeå­—ç¬¦ä¸²å¹¶è¿”å›žlistã€‚ re(): æ ¹æ®ä¼ å…¥çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œè¿”å›žunicodeå­—ç¬¦ä¸²liståˆ—è¡¨ã€‚ ä¸‹é¢æˆ‘ä»¬ç”¨xpath()é€‰æ‹©èŠ‚ç‚¹ï¼Œxpathçš„è¯­æ³•å¯å‚è€ƒw3cçš„http://www.w3school.com.cn/xpath/xpath_nodes.asp å­¦ä¹ ï¼Œéœ€è¦ç†Ÿæ‚‰è¯­æ³•ã€è¿ç®—ç¬¦ã€å‡½æ•°ç­‰ã€‚1234567891011121314151617181920212223242526def parse(self, response): base = response.xpath( "//div[@class='ivu-row rank-all-item']/div[@class='ivu-col ivu-col-span-8'][2]//ul/li[@class='child-item']/div[@class='ivu-row']") for box in base: # åˆ›å»ºå®žä¾‹ rankItem = RankItem() # ä¸‹æ ‡ rankItem['index'] = \ box.xpath(".//div[@class='ivu-col ivu-col-span-3 left-item']/span/text()").extract()[0] # å›¾æ ‡åœ°å€ rankItem['src'] = box.xpath(".//img/@src").extract()[0] # appåç§°ä¿¡æ¯ rankItem['title'] = box.xpath(".//div[@class='info-content']//a/text()").extract()[0] # appç±»åž‹ rankItem['type'] = box.xpath(".//div[@class='info-content']//p[@class='small-txt']/text()").extract()[0] # åˆ†ç±»ä¸­çš„æŽ’è¡Œ rankItem['type_rank'] = box.xpath( ".//div[@class='info-content']//p[@class='small-txt']//span[@class='rank-item']/text()").extract()[ 0] # å¼€å‘è€… rankItem['company'] = box.xpath( ".//div[@class='info-content']//p[@class='small-txt']//span[@class='company-item']/text()").extract()[ 0] # è¯¦æƒ…é¡µåœ°å€ infoUrl = "https://www.qimai.cn" + box.xpath(".//div[@class='info-content']//a/@href").extract()[0] yield rankItem è¿è¡Œçˆ¬å–åˆå§‹appåˆ—è¡¨ç›´æŽ¥è¿è¡Œ1qimairank&gt;scrapy crawl RankSpider -o data.json ä½ ä¼šå‘çŽ°çª—å£æ²¡æœ‰itemè¾“å‡ºï¼Œdata.jsonä¸­ä¹Ÿæ²¡æœ‰æ•°æ®ï¼Œæ˜¯æˆ‘ä»¬å†™é”™äº†å—ï¼Ÿ scrapyé»˜è®¤éµå®ˆrobotåè®®çš„ï¼Œåœ¨è®¿é—®ç½‘å€å‰ä¼šå…ˆè®¿é—®robot.txtæ¥æŸ¥çœ‹è‡ªå·±æ˜¯å¦æœ‰æƒé™è®¿é—®ã€‚å¦‚æžœç½‘ç«™ä¸å…è®¸è¢«çˆ¬ï¼Œå°±ä¸èƒ½è®¿é—®ã€‚æ€Žä¹ˆæ ·ä¸éµå®ˆåè®®å‘¢ï¼Ÿ1234settings.py# Obey robots.txt rulesROBOTSTXT_OBEY = False å†æ¬¡è¿è¡Œä»ç„¶å¤±è´¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“åŽŸå› ï¼šå› ä¸ºä¸ƒéº¦ç½‘ç«™å¯¹è¯·æ±‚çš„User-Agentåšäº†æ ¡éªŒï¼Œè§£å†³åŠžæ³•æ˜¯åœ¨é…ç½®æ–‡ä»¶123456789101112131415161718192021222324252627settings.py# Enable or disable downloader middlewares# See https://doc.scrapy.org/en/latest/topics/downloader-middleware.htmlDOWNLOADER_MIDDLEWARES = &#123; # 'qimairank.middlewares.QimairankDownloaderMiddleware': 543, 'qimairank.middlewares.RandomUserAgent': 1,&#125;USER_AGENTS = [ "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)", "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)", "Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)", "Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)", "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)", "Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)", "Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)", "Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)", "Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1", "Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0", "Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5", "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20", "Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52",] å¹¶åœ¨middlewares.pyä¸­åˆ›å»ºRandomUserAgent12345678910111213141516import randomclass RandomUserAgent(object): """ éšæœºèŽ·å–settings.pyä¸­é…ç½®çš„USER_AGENTSè®¾ç½®'User-Agent' """ def __init__(self, agents): self.agents = agents @classmethod def from_crawler(cls, crawler): return cls(crawler.settings.getlist('USER_AGENTS')) def process_request(self, request, spider): request.headers.setdefault('User-Agent', random.choice(self.agents)) å†æ¬¡è¿è¡Œï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ï¼Œæ˜¯æˆ‘ä»¬çš„xpathå†™é”™å•¦ï¼Ÿæˆ‘ä»¬åœ¨parseä¸­å¢žåŠ è¾“å‡ºbodyçš„ä¿¡æ¯ å¯ä»¥çœ‹åˆ°bodyä¸ºç©ºï¼Œæ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„åˆ—è¡¨æ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºä¸ƒéº¦æ•°æ®æ˜¯é€šè¿‡jsåŠ¨æ€æ¸²æŸ“çš„ï¼Œåœ¨æ¸²æŸ“å®Œæˆå‰ï¼Œæˆ‘ä»¬çš„responseå·²ç»è¿”å›žï¼Œé‚£ä¹ˆæ€Žä¹ˆæ ·æ‰èƒ½ç­‰ä¸€ç­‰å‘€ï¼Œç­‰åˆ°æ¸²æŸ“å®Œæˆæ‰è¿”å›žå‘¢ï¼Ÿ çˆ¬å–åŠ¨æ€æ¸²æŸ“çš„æ–¹å¼ï¼Œæˆ‘çŸ¥é“æ˜¯é€šè¿‡Splashæˆ–è€…Seleniumï¼Œåƒæˆ‘ä»¬çš„æ¡Œé¢ç‰ˆç³»ç»Ÿå¯ä»¥é€‰æ‹©ç”¨Seleniumï¼Œæ“ä½œå¯ä»¥è®¾ç½®å¯è§†åŒ–ï¼Œæ‰€æœ‰ç•Œé¢æ“ä½œéƒ½èƒ½çœ‹è§ï¼ŒSplashä¾èµ–äºŽDockerï¼Œæ— ç•Œé¢ã€‚ å®‰è£…SeleniumåŒ…ï¼š1pip install selenium ä½¿ç”¨å‰éœ€è¦å®‰è£…é©±åŠ¨ï¼Œé…ç½®è¯¦æƒ…ç‚¹å‡» é©±åŠ¨å®‰è£…å®Œæˆï¼Œåœ¨middlewares.pyä¸­åˆ›å»º SeleniumMiddleware123456789101112131415161718192021222324252627282930313233343536373839404142class SeleniumMiddleware(object): def __init__(self): self.timeout = 50 # 2.Firefox--------------------------------- # å®žä¾‹åŒ–å‚æ•°å¯¹è±¡ options = webdriver.FirefoxOptions() # æ— ç•Œé¢ # options.add_argument('--headless') # å…³é—­æµè§ˆå™¨å¼¹çª— options.set_preference('dom.webnotifications.enabled', False) options.set_preference('dom.push.enabled', False) # æ‰“å¼€æµè§ˆå™¨ self.browser = webdriver.Firefox(firefox_options=options) # æŒ‡å®šæµè§ˆå™¨çª—å£å¤§å° self.browser.set_window_size(1400, 700) # è®¾ç½®é¡µé¢åŠ è½½è¶…æ—¶æ—¶é—´ self.browser.set_page_load_timeout(self.timeout) self.wait = WebDriverWait(self.browser, self.timeout) def process_request(self, request, spider): # å½“è¯·æ±‚çš„é¡µé¢ä¸æ˜¯å½“å‰é¡µé¢æ—¶ if self.browser.current_url != request.url: # èŽ·å–é¡µé¢ self.browser.get(request.url) time.sleep(5) else: pass # è¿”å›žé¡µé¢çš„response return HtmlResponse(url=self.browser.current_url, body=self.browser.page_source, encoding="utf-8", request=request) def spider_closed(self): # çˆ¬è™«ç»“æŸ å…³é—­çª—å£ self.browser.close() pass @classmethod def from_crawler(cls, crawler): # è®¾ç½®çˆ¬è™«ç»“æŸçš„å›žè°ƒç›‘å¬ s = cls() crawler.signals.connect(s.spider_closed, signal=signals.spider_closed) return s åœ¨settins.pyä¸­é…ç½®123456# Enable or disable downloader middlewaresDOWNLOADER_MIDDLEWARES = &#123; # 'qimairank.middlewares.QimairankDownloaderMiddleware': 543, 'qimairank.middlewares.RandomUserAgent': 1, 'qimairank.middlewares.SeleniumMiddleware': 10,&#125; å†æ¬¡è¿è¡Œscrapy crawl RankSpider -o data.jsonï¼Œå•¦å•¦å•¦~è¿™å›žæœ‰æ•°æ®å•¦ã€‚ Seleniumè°ƒç”¨JSè„šæœ¬è§‚å¯Ÿçˆ¬å–å‡ºæ¥çš„data.jsonï¼Œå‘çŽ°æ€Žä¹ˆè‚¥å››ï¼Œåªæœ‰20æ¡æ•°æ®ï¼Œè€Œä¸”é™¤äº†å‰6ä¸ªçš„appå›¾æ ‡éƒ½æ˜¯ä¸ƒéº¦çš„é»˜è®¤å›¾æ ‡ã€‚ è¿™æ˜¯å› ä¸ºä¸ƒéº¦æ•°æ®çš„åˆ—è¡¨é»˜è®¤æ¯é¡µ20æ¡ï¼Œè€Œä¸”é»˜è®¤æ¸²æŸ“å‰6ä¸ªçš„å›¾æ ‡ï¼Œå…¶ä½™çš„é¡µéœ€è¦è§¦å‘æ»‘åŠ¨äº‹ä»¶åŠ è½½ï¼Œè€Œä¸”æ»‘åŠ¨åˆ°çš„å›¾æ ‡æ‰å¼€å§‹æ¸²æŸ“ã€‚è¿™æ ·æ€Žä¹ˆåŠžå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦æ»‘åŠ¨åˆ°å¯ä»¥åŠ è½½çš„æŒ‰é’®å°±å¯ä»¥å•¦ï¼Œæ£€æŸ¥å‘çŽ°åœ¨ä¸‰ä¸ªåˆ—è¡¨çš„å¤–å±‚æ ‡ç­¾æœ‰ä¸€ä¸ªclassä¸ºcm-explain-bottomçš„æ ‡ç­¾æˆ‘ä»¬ç”¨Seleniumè°ƒç”¨jsè„šæœ¬ï¼Œæ»‘åŠ¨åˆ°è¿™ä¸ªæ ‡ç­¾å°±å¯ä»¥å•¦ï¼Œåœ¨ä¸­é—´ä»¶process_requestæ–¹æ³•æ›´æ”¹1234567891011121314151617def process_request(self, request, spider): # å½“è¯·æ±‚çš„é¡µé¢ä¸æ˜¯å½“å‰é¡µé¢æ—¶ if self.browser.current_url != request.url: # èŽ·å–é¡µé¢ self.browser.get(request.url) time.sleep(5) # è¯·æ±‚çš„urlå¼€å§‹ä¸ºhttps://www.qimai.cn/rank/æ—¶ï¼Œè°ƒç”¨æ»‘åŠ¨ç•Œé¢ï¼Œæ¯é¡µ20ä¸ªï¼Œæ»‘åŠ¨4æ¬¡ if request.url.startswith("https://www.qimai.cn/rank"): try: for i in (0, 1, 2, 3): self.browser.execute_script( "document.getElementsByClassName('cm-explain-bottom')[0].scrollIntoView(true)") time.sleep(4) except JavascriptException as e: pass except Exception as e: pass å†æ¬¡æ‰§è¡Œscrapy crawl RankSpider -o data1.jsonï¼Œåˆ™å¯çœ‹è§å·²ç»ç”Ÿæˆdata1.jsoné‡Œé¢æœ‰100ä¸ªitemã€‚ èŽ·å–appè¯¦æƒ…è¯¦æƒ…é¡µéœ€è¦è·Ÿè¿›urlï¼Œæˆ‘ä»¬åœ¨RankSpider#parseæ–¹æ³•ä¸­ï¼Œä¸ç”¨yield Itemï¼Œè€Œæ˜¯yield Requestå°±å¯ä»¥è·Ÿè¿›ã€‚12345# è¯¦æƒ…é¡µåœ°å€infoUrl = "https://www.qimai.cn" + box.xpath(".//div[@class='info-content']//a/@href").extract()[0]# yield rankItemyield Request(infoUrl.replace("rank", "baseinfo"), self.parseInfo, meta=&#123;'rankItem': dict(rankItem).copy()&#125;, dont_filter=True) è§£æžçš„infoUrlæ›¿æ¢â€rankâ€å­—ç¬¦ä¸²ä¸ºâ€baseinfoâ€å°±å¯ä»¥è®¿é—®appåº”ç”¨ä¿¡æ¯é¡µï¼Œç”¨metaä¼ é€’itemåˆ°ä¸‹ä¸€ä¸ªè§£æžæ–¹æ³•ä¸­ï¼Œç”¨è½¯æ‹·è´çš„æ–¹å¼ï¼Œé¿å…Itemå› ä¸ºåœ°å€ç›¸åŒï¼Œå†…å®¹è¦†ç›–ã€‚ self.parseInfoä¸ºæŒ‡å®šè¿™æ¬¡è¯·æ±‚çš„è§£æžæ–¹æ³•ï¼Œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859def parseInfo(self, response): print("åŸºåœ°å€ï¼š" + response.url) if response.status != 200: return rankItem = response.meta['rankItem'] info = dict() base = response.xpath("//div[@id='app-container']") if base.extract(): # try: # æè¿° try: info['desc'] = base.xpath( ".//div[@class='app-header']//div[@class='app-subtitle']/text()").extract()[0] except Exception as e: print("æ— æè¿°") # å¼€å‘å•† info['auther'] = base.xpath( ".//div[@class='app-header']//div[@class='auther']//div[@class='value']/text()").extract()[0] # åˆ†ç±» info['classify'] = base.xpath( ".//div[@class='app-header']//div[@class='genre']//div[@class='value']/a/text()").extract()[0] # appid info['appid'] = base.xpath( ".//div[@class='app-header']//div[@class='appid']//div[@class='value']/a/text()").extract()[0] # appstoreåœ°å€ info['appstorelink'] = base.xpath( ".//div[@class='app-header']//div[@class='appid']//div[@class='value']/a/@href").extract()[0] # ä»·æ ¼ info['price'] = base.xpath( ".//div[@class='app-header']//div[@class='price']//div[@class='value']/text()").extract()[0] # æœ€æ–°ç‰ˆæœ¬ info['version'] = base.xpath( ".//div[@class='app-header']//div[@class='version']//div[@class='value']/text()").extract()[0] # åº”ç”¨æˆªå›¾ info['screenshot'] = base.xpath( ".//div[@class='router-wrapper']//div[@class='app-screenshot']//div[@class='screenshot-box']//img/@src").extract() # åº”ç”¨æè¿° info['desc'] = base.xpath( ".//div[@class='router-wrapper']//div[@class='app-describe']//div[@class='description']").extract()[ 0] # åº”ç”¨åŸºæœ¬ä¿¡æ¯ info['baseinfo'] = [] for infoBase in base.xpath( ".//div[@class='router-wrapper']//div[@class='app-baseinfo']//ul[@class='baseinfo-list']/li"): # print(info['baseinfo']) try: info['baseinfo'].append(dict(type=infoBase.xpath(".//*[@class='type']/text()").extract()[0], info=infoBase.xpath(".//*[@class='info-txt']/text()").extract()[0])) except Exception as e: pass rankItem['info'] = info # æ›¿æ¢å›¾æ ‡ åˆ—è¡¨åŠ è½½ä¸ºé»˜è®¤å›¾æ ‡ rankItem['src'] = \ response.xpath("//*[@id='app-side-bar']//div[@class='logo-wrap']/img/@src").extract()[ 0] yield rankItem å†æ¬¡æ‰§è¡Œscrapy crawl RankSpider -o data1.jsonï¼Œåˆ™å¯çœ‹è§å·²ç»ç”Ÿæˆdata2.jsonï¼Œä½†æ˜¯ç”Ÿæˆçš„åˆ—è¡¨ä¸æ˜¯æŽ’è¡Œçš„åˆ—è¡¨ï¼Œç”šè‡³æ˜¯ä¹±åºçš„ï¼ŒåŽŸå› æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†urlè·Ÿè¿›è¿”å›žï¼Œæ¯ä¸ªé¡µé¢çš„è¯·æ±‚è¿”å›žçš„é€Ÿåº¦ä¸ä¸€æ ·ï¼Œéœ€è¦æŽ’åºçš„è¯å°±å†™ä¸ªå°è„šæœ¬æŒ‰ç…§indexæŽ’ä¸ªåºã€‚ é¡¹ç›®æºç ]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hexo--ç¬¬äºŒå¼¹]]></title>
    <url>%2F2019%2F07%2F10%2FHexo-%E7%AC%AC%E4%BA%8C%E5%BC%B9%2F</url>
    <content type="text"><![CDATA[ç›®å½• 1. Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾ 2. Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶ 3. Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒ Hexoæ”¯æŒæµç¨‹å›¾ã€æ—¶åºå›¾ç”»æµç¨‹å›¾è¿˜éœ€è¦ç”¨åˆ«çš„ç¼–è¾‘å™¨ç”»äº†ç”¨å›¾ç‰‡å¯¼å…¥ï¼ŸHexoå®žçŽ°æ‰‹å†™æµç¨‹å›¾ä¹Ÿå¾ˆç®€å•å“¦ï¼Œä½†æ˜¯æœ‰ä¸ªå°å‘ï¼Œå°ç¼–è¢«å‘äº†å¥½ä¹…ï¼ŒæŽ¥ä¸‹æ¥æ‰‹æŠŠæ‰‹ðŸ‘‡å¸¦ä½ ä»¬è¿‡å‘ã€‚ markdownè¯­æ³•å®žçŽ°æµç¨‹å›¾çš„æ–¹å¼å¯ä»¥é€šè¿‡mermaidæˆ–flowchartï¼Œæ—¶åºå›¾åˆ™å¯ä»¥mermaidæˆ–sequenceï¼Œä½†æ˜¯é»˜è®¤æ˜¯ä¸ä¼šè¯†åˆ«è¯­æ³•çš„ï¼Œåªæ˜¯å½“åšæ™®é€šçš„å¤šè¡Œä»£ç ï¼Œéœ€è¦å®‰è£…æ’ä»¶ã€‚ æ–¹å¼ä¸€ï¼šmermaidæ”¯æŒæµç¨‹å›¾ï¼ˆgraphï¼‰ã€æ—¶åºå›¾ï¼ˆsequenceDiagramï¼‰ã€ç”˜ç‰¹å›¾ï¼ˆganttï¼‰ï¼Œå¯ä»¥è¯´æ”¯æŒå¾ˆå¤šäº†ã€‚é…ç½®æ•™æ–¹å¼äºŒéº»çƒ¦ä¸€ç‚¹ã€‚ åœ¨çº¿ç¼–è¾‘å™¨åœ°å€ï¼šhttps://mermaidjs.github.io/mermaid-live-editor/ ï¼Œå¯ä»¥åˆ©ç”¨åœ¨çº¿ç¼–è¾‘å™¨ç¼–è¾‘å®Œæµç¨‹å›¾ä¹‹åŽï¼Œä¸‹è½½SVGæˆ–è€…ç›´æŽ¥linkã€‚ å®‰è£…å®˜æ–¹è¯´çš„æ˜¯é€šè¿‡yarnå®‰è£…ï¼ˆå¦‚æžœæ²¡æœ‰å®‰è£…yarnï¼Œä½¿ç”¨npm install -g yarnå®‰è£…ï¼‰1$ yarn add hexo-filter-mermaid-diagrams ä¹Ÿå¯ä»¥ä½¿ç”¨npmï¼š1$ npm i hexo-filter-mermaid-diagrams æ’ä»¶çš„å®˜æ–¹ç½‘å€ é…ç½®ï¼ˆ1ï¼‰ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlåœ¨æœ€åŽåŠ å…¥123456# mermaid chart mermaid: ## mermaid url https://github.com/knsv/mermaid enable: true # default true version: "7.1.2" # default v7.1.2 options: # find more api options from https://github.com/knsv/mermaid/blob/master/src/mermaidAPI.js #startOnload: true // default true ï¼ˆ2ï¼‰Nextä¸»é¢˜æ›´æ”¹ï¼šåœ¨themes/next/_partials/footer.swig æœ€åŽåŠ å…¥12345678&#123;% if theme.mermaid.enable %&#125; &lt;script src='https://unpkg.com/mermaid@&#123;&#123; theme.mermaid.version &#125;&#125;/dist/mermaid.min.js'&gt;&lt;/script&gt; &lt;script&gt; if (window.mermaid) &#123; mermaid.initialize(&#123;theme: 'default'&#125;); &#125; &lt;/script&gt;&#123;% endif %&#125; ä¸»é¢˜å¯æ›´æ”¹ï¼ŒåŒ…å« default | forest é‡æ–°hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debugå¯åŠ¨æ¸²æŸ“ä¹Ÿç”Ÿæ•ˆäº†ã€‚ ç¤ºä¾‹1. æµç¨‹å›¾ç¤ºä¾‹ ```mermaidgraph TB start(å¼€å§‹)â€“&gt;inputA[è¾“å…¥ç”¨æˆ·åå¯†ç ] inputAâ€“&gt;opA{æ•°æ®åº“æŸ¥è¯¢å­ç±»} opAâ€“&gt;conditionA{æ˜¯å¦æœ‰æ­¤ç”¨æˆ·} conditionAâ€“yesâ€“&gt;conditionB{å¯†ç æ˜¯å¦æ­£ç¡®} conditionAâ€“noâ€“&gt;inputA conditionBâ€“yesâ€“&gt;opB[è¯»å…¥ç”¨æˆ·ä¿¡æ¯] conditionBâ€“noâ€“&gt;inputA opBâ€“&gt;en(ç™»å½•) ``` mermaidæµç¨‹å›¾å±•ç¤ºï¼š graph TB start(å¼€å§‹)-->inputA[è¾“å…¥ç”¨æˆ·åå¯†ç ] inputA-->opA{æ•°æ®åº“æŸ¥è¯¢å­ç±»} opA-->conditionA{æ˜¯å¦æœ‰æ­¤ç”¨æˆ·} conditionA--yes-->conditionB{å¯†ç æ˜¯å¦æ­£ç¡®} conditionA--no-->inputA conditionB--yes-->opB[è¯»å…¥ç”¨æˆ·ä¿¡æ¯] conditionB--no-->inputA opB-->en(ç™»å½•) 2. æ—¶åºå›¾ç¤ºä¾‹ ```mermaidsequenceDiagramparticipant Clientparticipant Server Note left of Client:SYN_SENTClient-&gt;Server:SYN=1 seq=xNote right of Server:SYN_RCVDServer-&gt;Client:SYN=1 seq=y ACK=x+1Note left of Client:ESTABLISHEDClient-&gt;Server:ACK=y+1Note right of Server:ESTABLISHED``` mermaidæ—¶åºå›¾å±•ç¤ºï¼š sequenceDiagram participant Client participant Server Note left of Client:SYN_SENT Client->Server:SYN=1 seq=x Note right of Server:SYN_RCVD Server->Client:SYN=1 seq=y ACK=x+1 Note left of Client:ESTABLISHED Client->Server:ACK=y+1 Note right of Server:ESTABLISHED è¦è¯´çš„è¯mermaidå¸®åŠ©æ–‡æ¡£ï¼šhttps://mermaidjs.github.io/ ï¼Œå¯åœ¨é‡Œé¢æŸ¥çœ‹æ›´å¤šçš„ä½¿ç”¨ä»‹ç»åŠè¯­æ³•ã€‚ ä¼˜ç‚¹ï¼šé¢œè‰²é²œè‰³ï¼›è¯­æ³•ç»“æž„ç®€å•ï¼Œä¸éœ€è¦å…ˆå£°æ˜Žï¼›æ–¹å‘å¯æŒ‡å®šï¼›çµæ´»ï¼Œå¯ä»¥æ›´æ”¹æ ·å¼ã€‚ ç¼ºç‚¹ï¼šæ–¹å—æ¨¡å¼æä¾›æ²¡æœ‰æ ‡å‡†æµç¨‹å›¾çš„è§„èŒƒçš„å½¢çŠ¶ï¼Œæ¯”å¦‚è¾“å…¥æ¡†çš„å¹³è¡Œå››è¾¹å½¢æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦è‡ªå®šä¹‰ï¼›åŠ è½½æ¸²æŸ“è¾ƒæ…¢ï¼Œä¼šå‡ºçŽ°å±•ç¤ºå¤šè¡Œä»£ç æ ·å¼ã€‚Â·Â·Â·mermaidgraph LRid1&gt;id1]â€“&gt;id2[id2]id2â€”id3(id3)id3â€”|text|id4((id4))id4â€“&gt;|text|id5{id5} style id1 fill:#f9f,stroke:#333,stroke-width:4pxstyle id2 fill:#ccf,stroke:#f66,stroke-width:2px,stroke-dasharray: 5, 5Â·Â·Â· graph LR id1>id1]-->id2[id2] id2---id3(id3) id3---|text|id4((id4)) id4-->|text|id5{id5} style id1 fill:#f9f,stroke:#333,stroke-width:4px style id2 fill:#ccf,stroke:#f66,stroke-width:2px,stroke-dasharray: 5, 5 æ›´å¤šæµç¨‹å›¾ä½¿ç”¨æŸ¥çœ‹ï¼šhttps://mermaidjs.github.io/flowchart.html æµç¨‹å›¾è¿‡é•¿ä¼šå ç”¨ç•Œé¢å¤§éƒ¨åˆ†ç©ºé—´ï¼Œåšå®¢ä¸­è®¾ç½®äº†æœ€å¤§é«˜åº¦ï¼ŒåŠå±…ä¸­å±•ç¤ºï¼Œåœ¨themes/next/source/css/_custom/custom.stylä¸‹é¢åŠ å…¥12345/*mermaidå›¾å±…ä¸­*/.mermaid&#123; text-align: center; max-height: 300px;&#125; æ–¹å¼äºŒï¼šflowchart+sequenceå®‰è£…æ”¯æŒæµç¨‹å›¾ï¼Œå®‰è£…ï¼š1$ npm install --save hexo-filter-flowchart æ”¯æŒæ—¶åºå›¾ï¼Œå®‰è£…ï¼š1$ npm install --save hexo-filter-sequence é…ç½®ï¼ˆéžå¿…é¡»ï¼‰æ’ä»¶å®˜æ–¹åœ°å€ï¼š flowchart sequence å®˜æ–¹é…ç½®æåˆ°éœ€è¦æ›´æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼Œå¢žåŠ ï¼š1234567891011121314flowchart: # raphael: # optional, the source url of raphael.js # flowchart: # optional, the source url of flowchart.js options: # options used for `drawSVG` sequence: # webfont: # optional, the source url of webfontloader.js # snap: # optional, the source url of snap.svg.js # underscore: # optional, the source url of underscore.js # sequence: # optional, the source url of sequence-diagram.js # css: # optional, the url for css, such as hand drawn theme options: theme: css_class: äº²æµ‹ä¸é…ç½®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debugå¯åŠ¨æ¸²æŸ“ä¹Ÿç”Ÿæ•ˆäº†ã€‚ ç¤ºä¾‹1.æµç¨‹å›¾ç¤ºä¾‹ ```flowst=&gt;start: å¼€å§‹inputA=&gt;inputoutput: è¾“å…¥ç”¨æˆ·åå¯†ç opA=&gt;operation: æ•°æ®åº“æŸ¥è¯¢å­ç±»conditionA=&gt;condition: æ˜¯å¦æœ‰æ­¤ç”¨æˆ·conditionB=&gt;condition: å¯†ç æ˜¯å¦æ­£ç¡®opB=&gt;operation: è¯»å…¥ç”¨æˆ·ä¿¡æ¯e=&gt;end: ç™»å½•st-&gt;inputA-&gt;opA-&gt;conditionAconditionA(yes)-&gt;conditionBconditionA(no)-&gt;inputAconditionB(yes)-&gt;opB-&gt;econditionB(no)-&gt;inputA``` flowchartæµç¨‹å›¾å±•ç¤ºï¼š 2.æ—¶åºå›¾ç¤ºä¾‹ ```sequenceparticipant Clientparticipant Server Note left of Client:SYN_SENTClient-&gt;Server:SYN=1 seq=xNote right of Server:SYN_RCVDServer-&gt;Client:SYN=1 seq=y ACK=x+1Note left of Client:ESTABLISHEDClient-&gt;Server:ACK=y+1Note right of Server:ESTABLISHED``` sequenceæ—¶åºå›¾å±•ç¤ºï¼š è¦è¯´çš„è¯ä¼˜ç‚¹ï¼šæ ‡å‡†æµç¨‹å›¾çš„æ ·å¼å±•ç¤ºï¼›æ¸²æŸ“å¿«ï¼Œå‡ ä¹Žä¸ä¼šå‡ºçŽ°å±•ç¤ºå¤šè¡Œä»£ç çš„æ—¶å€™ï¼›å®žçŽ°ç®€å•ã€‚ ç¼ºç‚¹ï¼šæ ·å¼ä¸èƒ½æ›´æ”¹ï¼Œé»‘ç™½ç•Œé¢ï¼›æµç¨‹å›¾è¯­æ³•éœ€è¦å…ˆå£°æ˜ŽåŽä½¿ç”¨ã€‚ è®¾ç½®æœ€å¤§é«˜åº¦åŠå±…ä¸­å±•ç¤ºï¼ŒèƒŒæ™¯è‰²ï¼Œè¶…å‡ºéƒ¨åˆ†æ»‘åŠ¨ï¼š12345678910111213.flow-chart &#123; text-align: center; max-height: 300px; overflow: auto; background: #f7f7f7;&#125;.sequence &#123; text-align: center; max-height: 300px; overflow: auto; background: #f7f7f7;&#125; sequenceçš„å°ç¼–ä¸èµ°å¿ƒï¼Œæ²¡æœ‰æä¾›classï¼Œéœ€è¦åœ¨node_modules/hexo-filter-sequence/lib/renderer.jsä¿®æ”¹ï¼Œå¤§çº¦22è¡Œï¼Œè®¾ç½®idçš„æ—¶å€™åŒæ—¶å¢žåŠ classï¼š1return start + '&lt;div id="' + seqId + '" class="sequence"&gt;&lt;/div&gt;' + end; ç‰¹åˆ«æ³¨æ„ï¼šå¾ˆå¤šäººè¯´sequenceè®¾ç½®æ— æ•ˆï¼Œéœ€è¦æ›´æ”¹ä¾èµ–çš„snapä¸ºraphaelï¼Œä¹Ÿæœ‰è¯´æ›´æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶çš„external_linkä¸ºfalseï¼Œå°ç¼–éƒ½è¯•è¿‡äº†ï¼Œæ— æ•ˆã€‚ä¸ºå•¥å­æ—¶åºå›¾è¿˜æ˜¯å¤±è´¥äº†å‘¢ï¼Ÿå°ç¼–æœäº†æ•´ä¸ªé¡¹ç›®å·®ç‚¹ä»¥ä¸ºæ˜¯è·Ÿmotion.jsé‡Œé¢çš„sequenceé‡åˆæœ‰ç¼ºé™·ï¼Œéƒ½æ‰“ç®—æ”¹æ’ä»¶äº†ï¼Œç„¶è€Œå¹¶ä¸éœ€è¦ï¼ï¼å¦‚æžœæ‚¨çš„ä½¿ç”¨çš„Hexoï¼Œè€Œä¸”æ—¶åºå›¾æ”¾åœ¨mdæ–‡ä»¶çš„æœ€åŽä¸€ä¸ªï¼Œå¯¼è‡´æ¸²æŸ“å¤±æ•ˆäº†çš„è¯ï¼Œè¯·åœ¨æ–‡ç« çš„æœ€åŽè¾“å…¥ä¸€ä¸ªå›žè½¦ï¼Œæ²¡é”™å°±æ˜¯åªéœ€è¦ä¸€ä¸ªå›žè½¦å°±è§£å†³äº†ã€‚ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯Hexoçš„bugï¼Œæ‰€æœ‰çš„å¤šè¡Œä»£ç åœ¨æ–‡ç« æœ«å°¾çš„éƒ½ä¼šå‡ºçŽ°æ¸²æŸ“é—®é¢˜ï¼Œå¹¶ä¸æ˜¯sequenceçš„é—®é¢˜ã€‚ Hexoå¤šè¡Œä»£ç æä¾›å¤åˆ¶å¢žåŠ å¤åˆ¶æŒ‰é’®åŠå“åº”çš„jsï¼š1234567891011121314clipboard.jsvar initCopyCode = function () &#123; var copyHtml = ''; copyHtml += '&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'; copyHtml += ' &lt;i class="fa fa-clipboard"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'; copyHtml += '&lt;/button&gt;'; $(".highlight .code pre").before(copyHtml); new ClipboardJS('.btn-copy', &#123; target: function (trigger) &#123; return trigger.nextElementSibling; &#125; &#125;); &#125; èµ„æºä¸‹è½½ï¼šç‚¹å‡»ä¸‹è½½ ä¸‹è½½å®ŒæˆåŽï¼Œå°†clipboard.jså’Œclipboard-use.jsæ”¾åœ¨ themes/next/source/js/src/ä¸‹ï¼Œå¹¶æ›´æ”¹themes/next/layout/_layout.swigï¼Œåœ¨ä¸Šé¢åŠ å…¥123&lt;!--ä»£ç å—å¤åˆ¶åŠŸèƒ½--&gt;&lt;script type='text/javascript' src='/js/src/clipboard.js'&gt;&lt;/script&gt;&lt;script type="text/javascript" src="/js/src/clipboard-use.js"&gt;&lt;/script&gt; è¿™æ ·åœ¨é¼ æ ‡åœ¨ä»£ç åŒºåŸŸæ—¶å³ä¸Šè§’æ˜¾ç¤ºcopyã€‚ Hexoå¤åˆ¶æ—¶è¿½åŠ ç‰ˆæƒè™½ç„¶åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä¸­æ›´æ”¹post_copyrightå¯ä»¥åœ¨æ–‡ç« åº•éƒ¨å¢žåŠ ç‰ˆæƒå£°æ˜Žä¿¡æ¯ï¼Œå¤åˆ¶æ—¶å¹¶ä¸èƒ½åƒå¾ˆå¤šåšå®¢ç½‘ç«™ä¸€æ ·å¤åˆ¶æ—¶ç›´æŽ¥è¿½åŠ ã€‚ å®žçŽ°æ˜¯é€šè¿‡ç›‘å¬copyäº‹ä»¶ï¼Œè¿½åŠ ä¿¡æ¯ï¼š123456789101112131415161718192021222324252627282930copyright.js(() =&gt; &#123; if (document.getElementsByClassName("post-copyright").length&gt;0) &#123; const author=document.getElementsByClassName("author")[0].textContent; document.addEventListener('copy', e =&gt; &#123; let clipboardData = e.clipboardData || window.clipboardData; if(!clipboardData) &#123; return; &#125; e.preventDefault(); const selection = window.getSelection().toString(); const textData = selection + '\n-----------------------\n' + (author ? `ä½œè€…: $&#123;author&#125;\n` : '') + 'åŽŸæ–‡: ' + window.location.href + '\n' + 'ç‰ˆæƒå£°æ˜Žï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜Žå¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ï¼\n\n'; const htmlData = selection + '&lt;br/&gt;-----------------------&lt;br/&gt;' + (author ? `&lt;b&gt;ä½œè€…&lt;/b&gt;: $&#123;author&#125;&lt;br/&gt;` : '') + `&lt;b&gt;åŽŸæ–‡&lt;/b&gt;: &lt;a href="$&#123;window.location.href&#125;"&gt;$&#123;window.location.href&#125;&lt;/a&gt;&lt;br/&gt;` + 'ç‰ˆæƒå£°æ˜Žï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜Žå¤–ï¼Œå‡é‡‡ç”¨ &lt;a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"&gt;CC BY-NC-SA 3.0&lt;/a&gt; è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ï¼&lt;br/&gt;'; clipboardData.setData('text/html', htmlData); clipboardData.setData('text/plain', textData); &#125;); &#125;&#125;)(); èµ„æºä¸‹è½½ï¼šcopyright.js ç‚¹å‡»ä¸‹è½½ä¸‹è½½å®ŒæˆåŽï¼Œcopyright.jsæ”¾åœ¨ themes/next/source/js/src/ä¸‹ï¼Œå¹¶æ›´æ”¹themes/next/layout/_layout.swigï¼Œåœ¨ä¸Šé¢åŠ å…¥12&lt;!--&#123;#å¤åˆ¶ç‰ˆæƒç”³æ˜Ž#&#125;--&gt;&lt;script type="text/javascript" src="/js/src/copyright.js"&gt;&lt;/script&gt; ç‰ˆæƒå¼€å¯æ—¶ï¼Œå¤åˆ¶æ—¶å³å¯å¢žåŠ ç‰ˆæƒä¿¡æ¯ã€‚ st=>start: å¼€å§‹ inputA=>inputoutput: è¾“å…¥ç”¨æˆ·åå¯†ç  opA=>operation: æ•°æ®åº“æŸ¥è¯¢å­ç±» conditionA=>condition: æ˜¯å¦æœ‰æ­¤ç”¨æˆ· conditionB=>condition: å¯†ç æ˜¯å¦æ­£ç¡® opB=>operation: è¯»å…¥ç”¨æˆ·ä¿¡æ¯ e=>end: ç™»å½• st->inputA->opA->conditionA conditionA(yes)->conditionB conditionA(no)->inputA conditionB(yes)->opB->e conditionB(no)->inputA{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-0", options);participant Client participant Server Note left of Client:SYN_SENT Client->Server:SYN=1 seq=x Note right of Server:SYN_RCVD Server->Client:SYN=1 seq=y ACK=x+1 Note left of Client:ESTABLISHED Client->Server:ACK=y+1 Note right of Server:ESTABLISHED{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("sequence-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value)); var diagram = Diagram.parse(code); diagram.drawSVG("sequence-0", options);]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Scrapyè¯¦è§£ çˆ¬è™«æ¡†æž¶å…¥é—¨çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼]]></title>
    <url>%2F2019%2F07%2F10%2FScrapy%E8%AF%A6%E8%A7%A3-%E7%88%AC%E8%99%AB%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8%E7%9C%8B%E8%BF%99%E4%B8%80%E7%AF%87%E5%B0%B1%E5%A4%9F%E4%BA%86%EF%BC%81%2F</url>
    <content type="text"><![CDATA[å‰è¨€å­¦ä¹ Scrapyæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå½“æ—¶æƒ³è¦èŽ·å–ä¸€ä¸‹ç™¾åº¦æ±‰å­—çš„è§£æžï¼Œåˆä¸æƒ³ä¸€ä¸ªä¸ªæ±‰å­—åŽ»æœï¼Œå¤åˆ¶ç²˜è´´å¤ªè´¹åŠ²ï¼Œè€ƒè™‘åˆ°çˆ¬è™«çš„ä¾¿åˆ©æ€§ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä»‹ç»ä¸€ä¸ªçˆ¬è™«æ¡†æž¶â€“Scrapyï¼Œéžå¸¸ä¸»æµçš„çˆ¬è™«æ¡†æž¶ï¼Œå†™çˆ¬è™«è¿˜ä¸ä¼šScrapyï¼Œä½ å°±outå•¦ðŸ™ˆ~ ðŸžçˆ¬è™«çš„åº”ç”¨åœºæ™¯ï¼š æœç´¢å¤šä¸ªæ±‰å­—ï¼Œå­˜å‚¨ä¸‹æ¥æ±‰å­—çš„è§£æž æ¯éš”ä¸€æ®µæ—¶é—´èŽ·å–ä¸€ä¸‹æœ€æ–°å¤©æ°”ï¼Œæ–°é—»ç­‰ç­‰ æ‹¿åˆ°è±†ç“£ç”µå½±ï¼ˆè±†ç“£å›¾ä¹¦ï¼‰çš„top100çš„ç”µå½±åå­—ã€æ¼”å‘˜ã€ä¸Šæ˜ æ—¶é—´ä»¥åŠå„å¤§ç½‘å‹çš„è¯„è®º éœ€è¦ä¸‹è½½ç½‘ç«™çš„ä¸€ç³»åˆ—å›¾ç‰‡ï¼Œè§†é¢‘ç­‰ï¼Œä¸‹è½½æ…•è¯¾ç½‘çš„è¯¾ç¨‹è§†é¢‘ æœé›†å®‰å±…å®¢çš„æ‰€æœ‰æˆ¿æºï¼Œæ€§ä»·æ¯”åˆ†æž åˆ·ç¥¨ã€æŠ¢ç¥¨ æ‹¿åˆ°å¾®åšå½“å‰çš„çƒ­é—¨è¯é¢˜ï¼Œè‡ªåª’ä½“éœ€è¦å³æ—¶å†™æ–‡ç« å•¦ â€¦ æž¶æž„å®˜æ–¹è§£æžï¼šScrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æž„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æž¶ã€‚å¯ä»¥åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æŽ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨åŽ†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­ã€‚ å…¶æœ€åˆæ˜¯ä¸ºäº†é¡µé¢æŠ“å–ï¼ˆæ›´ç¡®åˆ‡æ¥è¯´,ç½‘ç»œæŠ“å–ï¼‰æ‰€è®¾è®¡çš„ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åœ¨èŽ·å–APIæ‰€è¿”å›žçš„æ•°æ®æˆ–è€…é€šç”¨çš„ç½‘ç»œçˆ¬è™«ã€‚ æž¶æž„åˆ†æžï¼š Scrapy Engineï¼šScrapyå¼•æ“Žã€‚è´Ÿè´£æŽ§åˆ¶æ•°æ®æµåœ¨ç³»ç»Ÿä¸­æ‰€æœ‰ç»„ä»¶ä¸­æµåŠ¨ï¼Œå¹¶åœ¨ç›¸åº”åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘äº‹ä»¶ã€‚ Schedulerï¼šè°ƒåº¦å™¨ã€‚ä»ŽScrapy EngineæŽ¥å—è¯·æ±‚ï¼ˆrequestsï¼‰å¹¶æŽ’åºåˆ—å…¥é˜Ÿåˆ—ï¼Œå¹¶åœ¨å¼•æ“Žå†æ¬¡è¯·æ±‚æ—¶è¿”å›žã€‚ç”¨å®ƒæ¥å†³å®šä¸‹ä¸€ä¸ªæŠ“å–çš„ç½‘å€æ˜¯ä»€ä¹ˆï¼ŒåŒæ—¶åŽ»é™¤é‡å¤çš„ç½‘å€ã€‚ Downloaderï¼šä¸‹è½½å™¨ã€‚æŠ“å–ç½‘é¡µå¹¶å°†ç½‘é¡µå†…å®¹è¿”è¿˜ç»™Spidersã€‚å»ºç«‹åœ¨twistedå¼‚æ­¥æ¨¡åž‹ã€‚ Spidersï¼šçˆ¬è™«ã€‚ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»ï¼Œä¸»è¦ç”¨æ¥è§£æžç½‘é¡µï¼Œæå–Itemsï¼Œå‘é€urlè·Ÿè¿›ç­‰æ–°è¯·æ±‚ç­‰ã€‚ Item Pipelinesï¼šç®¡é“ã€‚ä¸»è¦ç”¨æ¥å¤„ç†Spiderè§£æžå‡ºæ¥çš„Itemsï¼Œè¿›è¡ŒæŒ‰è§„åˆ™è¿‡æ»¤ï¼ŒéªŒè¯ï¼ŒæŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚æ•°æ®åº“å­˜å‚¨ï¼‰ç­‰ Downloader Middlewaresï¼šä¸‹è½½ä¸­é—´ä»¶ã€‚ä½äºŽScrapy Engineå’ŒDownloaderä¹‹é—´ï¼Œä¸»è¦æ˜¯å¤„ç†Scrapyå¼•æ“Žä¸Žä¸‹è½½å™¨ä¹‹é—´çš„è¯·æ±‚åŠå“åº”ã€‚ Spider Middlewaresï¼šçˆ¬è™«ä¸­é—´ä»¶ã€‚ä½äºŽScrapy Engineå’ŒSpidersä¹‹é—´ï¼Œä¸»è¦å·¥ä½œæ˜¯å¤„ç†Spidersçš„å“åº”è¾“å…¥å’Œè¯·æ±‚è¾“å‡ºã€‚ Scheduler Middlewaresï¼šè°ƒåº¦ä¸­é—´ä»¶ã€‚ä½äºŽScrapy Engineå’ŒSchedulerä¹‹é—´ã€‚ä¸»è¦å·¥ä½œæ˜¯å¤„ç†ä»ŽScrapy Engineå‘é€åˆ°Schedulerçš„è¯·æ±‚å’Œå“åº”ã€‚ æ•°æ®å¤„ç†æµç¨‹ï¼š1ã€å¼•æ“Žæ‰“å¼€ä¸€ä¸ªç½‘ç«™(open a domain)ï¼Œæ‰¾åˆ°å¤„ç†è¯¥ç½‘ç«™çš„Spiderå¹¶å‘è¯¥Spiderè¯·æ±‚è¦çˆ¬å–çš„ç¬¬ä¸€ä¸ªstart_urlsã€‚2ã€å¼•æ“Žä»ŽSpiderä¸­èŽ·å–åˆ°ç¬¬ä¸€ä¸ªè¦çˆ¬å–çš„URLå¹¶åœ¨è°ƒåº¦å™¨(Scheduler)ä»¥Requestè°ƒåº¦ã€‚3ã€å¼•æ“Žå‘è°ƒåº¦å™¨è¯·æ±‚ä¸‹ä¸€ä¸ªè¦çˆ¬å–çš„URLã€‚4ã€è°ƒåº¦å™¨è¿”å›žä¸‹ä¸€ä¸ªè¦çˆ¬å–çš„URLç»™å¼•æ“Žï¼Œå¼•æ“Žå°†URLé€šè¿‡Downloader Middlewaresï¼ˆrequestï¼‰è½¬å‘ç»™ä¸‹è½½å™¨(Downloader)ã€‚5ã€ä¸€æ—¦é¡µé¢ä¸‹è½½å®Œæ¯•ï¼ŒDownloaderç”Ÿæˆä¸€ä¸ªè¯¥é¡µé¢çš„Responseï¼Œå¹¶å°†å…¶é€šè¿‡Downloader Middlewares(response)å‘é€ç»™å¼•æ“Žã€‚6ã€å¼•æ“Žä»ŽDownloaderä¸­æŽ¥æ”¶åˆ°Responseå¹¶é€šè¿‡Spider Middlewaresï¼ˆrequestï¼‰å‘é€ç»™Spiderå¤„ç†ã€‚7ã€Spiderå¤„ç†Responseå¹¶è¿”å›žçˆ¬å–åˆ°çš„ItemåŠ(è·Ÿè¿›çš„)æ–°çš„Requestç»™å¼•æ“Žã€‚8ã€å¼•æ“Žå°†(Spiderè¿”å›žçš„)çˆ¬å–åˆ°çš„Itemç»™Item Pipelineï¼Œå°†(Spiderè¿”å›žçš„)Requestç»™è°ƒåº¦å™¨ã€‚9ã€ç³»ç»Ÿé‡å¤2-9çš„æ“ä½œï¼Œç›´åˆ°è°ƒåº¦ä¸­æ²¡æœ‰æ›´å¤šåœ°requestï¼Œç„¶åŽæ–­å¼€å¼•æ“Žä¸Žç½‘ç«™ä¹‹é—´çš„è”ç³»ã€‚ å®‰è£…ä¾èµ–çŽ¯å¢ƒï¼š Python 2.7åŠä»¥ä¸Š Python Package: pip and setuptools. çŽ°åœ¨ pip ä¾èµ– setuptools ï¼Œå¦‚æžœæœªå®‰è£…ï¼Œåˆ™ä¼šè‡ªåŠ¨å®‰è£… setuptools ã€‚ ä½¿ç”¨pipå®‰è£…:1pip install Scrapy åˆ›å»ºé¡¹ç›®ï¼š1scrapy startproject [é¡¹ç›®å] å¦‚åˆ›å»º scrapy startproject qimairankï¼Œä¼šè‡ªåŠ¨åˆ›å»ºScrapyçš„é¡¹ç›®æž¶æž„ï¼š1234567891011qimairank|--qimairank |--spiders |--__init__.py |--__init__.py |--items.py |--middlewares.py |--pipelines.py |--settings.py|--scrapy.cfg scrapy.cfgï¼šé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šsettingsæ–‡ä»¶ï¼Œéƒ¨ç½²deployçš„projectåç§°ç­‰ç­‰ã€‚ qimairankï¼šé¡¹ç›®çš„pythonæ¨¡å—ã€‚ spidersï¼šæ”¾ç½®spiderä»£ç çš„ç›®å½•ã€‚ items.pyï¼šé¡¹ç›®ä¸­çš„itemæ–‡ä»¶ã€‚ pipelines.py:é¡¹ç›®ä¸­çš„pipelinesæ–‡ä»¶ã€‚ middlewares.pyï¼šé¡¹ç›®çš„ä¸­é—´ä»¶ã€‚ settings.pyï¼šScrapy é…ç½®æ–‡ä»¶ã€‚æ›´å¤šé…ç½®ä¿¡æ¯æŸ¥çœ‹ï¼šhttps://scrapy-chs.readthedocs.io/zh_CN/0.24/topics/settings.html ç¬¬ä¸€ä¸ªçˆ¬è™«çˆ¬è™«å®žçŽ°è®²è§£ï¼š ç¬¬ä¸€å¼¹ï¼šçˆ¬å–æœ‰é“ç¿»è¯‘ ðŸ‘‰ ç‚¹å‡»å‰å¾€]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æŽ’é™¤aar/jarä¸­å†—ä½™æˆ–è€…å†²çªåŒ…ã€ç±»çš„è„šæœ¬]]></title>
    <url>%2F2019%2F07%2F05%2F%E6%8E%92%E9%99%A4aar-jar%E4%B8%AD%E5%86%97%E4%BD%99%E6%88%96%E8%80%85%E5%86%B2%E7%AA%81%E5%8C%85%E3%80%81%E7%B1%BB%E7%9A%84%E8%84%9A%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[å¼•å…¥aarçš„å†²çªæ— æ‰€ä¸åœ¨ï¼Œé€šè¿‡è¿œç¨‹ä¾èµ–mavençš„åŒ…å¯ä»¥é€šè¿‡excludeå…³é”®å­—æ­é…moduleå’ŒgroupåŽ»é™¤æŸä¸ªç»„ï¼Œæ²¡åŠžæ³•åŽ»é™¤å…·ä½“çš„ç±»ã€‚ é‚£ä¹ˆå¦‚æžœæ˜¯å•ç‹¬çš„aaråŒ…ï¼Œæƒ³è¦æŽ’é™¤aarä¸‹classes.jaråŒ…é‡Œçš„æŸä¸ªå•ç‹¬çš„åŒ…æˆ–è€…ç±»æ€Žä¹ˆåŠžï¼Ÿ éœ€è¦æŽ¥å…¥çš„jaråŒ…å·²ç»å¸¦äº†è…¾è®¯X5æ ¸å¿ƒï¼Œå½“å‰ä¾èµ–çš„å·²ç»åŒ…å«X5æ ¸å¿ƒï¼Œå†²çªåˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ å½“å‰çš„gradleè„šæœ¬ï¼ˆé¡¹ç›®é“¾æŽ¥ï¼šhttps://github.com/luohongxfb/ExcludeAar ï¼‰å¯ä»¥è§£å†³ã€‚ ç›®å½• 1 æ•ˆæžœå±•ç¤º 2 å¦‚ä½•ä½¿ç”¨ 3 å¦‚ä½•å®žçŽ°çš„ è§£åŽ‹AAR/JARåŒ… æŒ‰ç…§æŽ’é™¤è§„åˆ™å¯¹è§£åŽ‹çš„jaré‡æ–°æ‰“åŒ…(è¿™ä¸ªæ˜¯é‡ç‚¹) é‡æ–°æ‰“åŒ…æˆAARåŒ… 1 æ•ˆæžœå±•ç¤ºå¦‚excludelib/libs/exampleAAR.aarï¼Œå·¦è¾¹æ˜¯æœªåŽ»é™¤çš„åŒ…ç»“æž„ï¼Œå³è¾¹æ˜¯åŽ»é™¤com.baiduä¹‹åŽçš„ï¼š å¦‚excludelib/libs/exampleJAR.jarï¼š 2 å¦‚ä½•ä½¿ç”¨ï¼ˆ1ï¼‰å°†éœ€è¦æŽ’é™¤çš„aaræˆ–è€…jaråŒ…æ”¾åœ¨excludelib/libsä¸‹ã€‚ ï¼ˆ2ï¼‰æ›´æ”¹excludelib/build.gradle123//éœ€è¦æŽ’é™¤çš„aaræˆ–è€…jarã€‚ï¼ˆæ›¿æ¢æˆéœ€è¦æŽ’é™¤çš„ï¼‰artifacts.add("exclude", file('libs/exampleAAR.aar'))artifacts.add("exclude", file('libs/exampleJAR.jar')) ï¼ˆ3ï¼‰è®¾ç½®æŽ’é™¤è§„åˆ™ å¦‚æžœæ‚¨éœ€è¦æŽ’é™¤aarï¼Œé‚£ä¹ˆè¯·æ›´æ”¹excludelib/excludeAar.gradleï¼›å¦‚æžœæ‚¨éœ€è¦æŽ’é™¤jarï¼Œé‚£ä¹ˆè¯·æ›´æ”¹excludelib/excludeJar.gradle1234//éœ€è¦æŽ’é™¤çš„åŒ…ådef excludePackages = ['com.baidu']//éœ€è¦æŽ’é™¤çš„ç±»(éœ€è¦å…¨ç±»å)def excludeClasses = [] ï¼ˆ4ï¼‰è¿è¡ŒæŽ’é™¤ä»»åŠ¡ æŽ’é™¤åŽç”Ÿæˆçš„aaråœ¨excludelib/build/excludeaarä¸‹ï¼ŒæŽ’é™¤åŽç”Ÿæˆçš„jarä½äºŽexcludelib/build/excludejarã€‚ ç„¶åŽå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨å•¦~ 3 å¦‚ä½•å®žçŽ°çš„aaræŽ’é™¤æ­¥éª¤ï¼š 1ã€èŽ·å–åˆ°éœ€è¦æŽ’é™¤çš„åŽŸå§‹AARåŒ… 2ã€è§£åŽ‹AARåŒ…ï¼ˆzipTreeé…åˆTask Copyï¼‰ 3ã€è§£åŽ‹AARåŒ…ä¸­çš„class.jarï¼ˆzipTreeé…åˆTask Copyï¼‰ 4ã€æŒ‰ç…§æŽ’é™¤è§„åˆ™å¯¹è§£åŽ‹çš„class.jaré‡æ–°æ‰“åŒ…(Task Jar) 5ã€é‡æ–°æ‰“åŒ…æˆAARåŒ…(Task Zip) jaræŽ’é™¤æ­¥éª¤ 1ã€èŽ·å–åˆ°éœ€è¦æŽ’é™¤çš„åŽŸå§‹jaråŒ… 2ã€è§£åŽ‹jaråŒ…ï¼ˆzipTreeé…åˆTask Copyï¼‰ 3ã€æŒ‰ç…§æŽ’é™¤è§„åˆ™å¯¹è§£åŽ‹çš„jaré‡æ–°æ‰“åŒ…(Task Jar) è§£åŽ‹AAR/JARåŒ…123456task unZipAar(type: Copy) &#123; def zipFile = getDefaultAar() def outputDir = unZipAarFile from zipTree(zipFile) into outputDir&#125; ä¸»è¦åŽŸç†ï¼šzipTreeé…åˆCopyï¼Œå®žçŽ°è§£åŽ‹ã€‚ Copy Taskå®˜æ–¹è®²è§£ï¼šhttps://docs.gradle.org/current/dsl/org.gradle.api.tasks.Copy.html ziptreeæºç ä¸»è¦è§£æžï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„file treeåŒ…å«åŽŸæ¥zipçš„å†…å®¹ï¼Œå¯ä»¥é…åˆCopyå®žçŽ°è§£åŽ‹ã€‚12345678910public interface Project&#123; /** * &lt;p&gt;Creates a new &#123;@code FileTree&#125; which contains the contents of the given ZIP file. * You can combine this method with the &#123;@link #copy(groovy.lang.Closure)&#125; * method to unzip a ZIP file * @param zipPath The ZIP file. Evaluated as per &#123;@link #file(Object)&#125;. * @return the file tree. Never returns null. */ FileTree zipTree(Object zipPath);&#125; æŒ‰ç…§æŽ’é™¤è§„åˆ™å¯¹è§£åŽ‹çš„jaré‡æ–°æ‰“åŒ…(è¿™ä¸ªæ˜¯é‡ç‚¹)1234567task zipJar(type: Jar) &#123; baseName = 'classes' from unZipJarFile destinationDir unZipAarFile exclude getExcludePackageRegex(excludePackages) exclude getExcludeClassRegex(excludeClasses)&#125; è¿™ä¸ªæ­¥éª¤å°±æ˜¯æŠŠä¹‹å‰è§£åŽ‹çš„classes.jaræ–‡ä»¶ï¼ŒæŒ‰ç…§æŽ’é™¤è§„åˆ™ç”¨Task Jaré‡æ–°æ‰“åŒ…æˆjaræ–‡ä»¶ã€‚ Task Jarå®˜æ–¹è®²è§£ï¼šhttps://docs.gradle.org/current/dsl/org.gradle.jvm.tasks.Jar.html Property/Method Description baseName åŽ‹ç¼©åŽçš„jaræ–‡ä»¶åã€‚ from(sourcePaths) éœ€è¦åŽ‹ç¼©çš„ç›®å½•ã€‚ destinationDir åŽ‹ç¼©åŽå­˜æ”¾çš„ç›®å½•ã€‚ exclude(excludes) éœ€è¦æŽ’é™¤çš„æ–‡ä»¶ã€‚ é‡æ–°æ‰“åŒ…æˆAARåŒ…12345678task excludeAar(type: Zip) &#123; group 'ex' description 'ç”Ÿæˆä¸€ä¸ªæŽ’é™¤ä¹‹åŽçš„aaråŒ…' baseName excludeAarName extension "aar" from unZipAarFile destinationDir excludeAarFile&#125; å¯¹classes.jarå¤„ç†å®Œæˆçš„aaré‡æ‰“åŒ…ï¼Œä¸»è¦ç”¨åˆ°Task Zipã€‚ Task Zipå®˜æ–¹è®²è§£ï¼šhttps://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Zip.html Property/Method Description group setGroup(String group) å°†å½“å‰çš„Taskè®¾ç½®åˆ°æŒ‡å®šç»„ã€‚ description setDescription(@Nullable String description) Taskæè¿°ã€‚ baseName åŽ‹ç¼©åŽçš„aaræ–‡ä»¶åã€‚ extension åŽ‹ç¼©åŽçš„æ–‡ä»¶æ‰©å±•åã€‚ from(sourcePaths) éœ€è¦åŽ‹ç¼©çš„ç›®å½•ã€‚ destinationDir åŽ‹ç¼©åŽå­˜æ”¾çš„ç›®å½•ã€‚]]></content>
      <categories>
        <category>Android</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hexo--ç¬¬ä¸€å¼¹]]></title>
    <url>%2F2019%2F07%2F04%2FHexo-%E7%AC%AC%E4%B8%80%E5%BC%B9%2F</url>
    <content type="text"><![CDATA[ç›®å½• 1. ä¸æ¸²æŸ“.mdæˆ–è€…layout 2. æ–°å»ºæ–‡ä»¶è‰ç¨¿ 1. ä¸æ¸²æŸ“.mdæˆ–è€…layoutHexo åœ¨ source æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ md æ–‡ä»¶æˆ–è€… html æ–‡ä»¶éƒ½ä¼šè¢«æ¸²æŸ“ï¼Œæˆ‘ä»¬æƒ³ç»™è¾“å‡ºé¡¹ç›®æ·»åŠ ä¸€ä¸ªREADME.mdæ–‡ä»¶ï¼Œä¸æƒ³è¢«æ¸²æŸ“ï¼Œä¿æŒmarkdownæ–‡ä»¶æ ¼å¼ï¼Œä¸è½¬æ¢ä¸ºhtmlæ€Žä¹ˆåŠžå‘¢ ä¸æ¸²æŸ“htmlåœ¨å¤´éƒ¨æ·»åŠ Front-matterã€‚.mdè¿˜æ˜¯ä¼šè½¬æ¢æˆ.htmlï¼Œä½†æ˜¯ä¸ä¼šæ¸²æŸ“æ ·å¼ã€‚å•çº¯åªæ˜¯æ ‡ç­¾ã€‚1234---layout: false--- .mdè¿˜æ˜¯è¢«è½¬æ¢æˆäº†.htmlï¼Œä½†æ˜¯æ²¡æœ‰æ¸²æŸ“ã€‚æƒ³è¦è‡ªå®šä¹‰æ ·å¼çš„.htmlæ–‡ä»¶å¯å‚è€ƒè®¾ç½®ï¼Œä½†æ˜¯è¿˜ä¸ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ï¼Œæˆ‘ä»¬æƒ³è¦çš„ä¿æŒ.mdæ ·å¼å‘€ã€‚ ä¸æ¸²æŸ“.mdæ–‡ä»¶åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlæŸ¥æ‰¾skip_renderï¼Œè®¾ç½®éœ€è¦è·³è¿‡æ¸²æŸ“çš„æ–‡ä»¶ã€‚ è®¾ç½®ä¸è¢«æ¸²æŸ“çš„æ˜¯source/README.mdå’Œsource/test/a.html 1234#è·³è¿‡æ¸²æŸ“ ç›¸å¯¹ç›®å½•æ˜¯`source`ç›®å½•skip_render: - README.md - test/a.html åœ¨publicç›®å½•å¯ä»¥çœ‹è§æˆ‘ä»¬çš„ç›®çš„è¾¾åˆ°äº†~ 2. æ–°å»ºæ–‡ä»¶è‰ç¨¿å½“æˆ‘ä»¬æœ‰çš„æ–‡ç« æ²¡å†™å®Œï¼Œæˆ–è€…æš‚æ—¶ä¸æƒ³å±•ç¤ºæ—¶ï¼Œå¯ä»¥æ–°å»ºè‰ç¨¿ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸‹ç»ˆç«¯12//æ–°å»ºè‰ç¨¿$ hexo new draft &quot;è‰ç¨¿&quot; åœ¨source/_draftsä¼šç”Ÿæˆä¸€ä¸ª è‰ç¨¿.mdæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œé“¾æŽ¥ä¹Ÿè®¿é—®ä¸åˆ°ã€‚æƒ³è¦æ¸²æŸ“è‰ç¨¿éœ€è¦åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlæŸ¥æ‰¾render_draftsï¼Œè®¾ç½®ä¸ºtrueã€‚12//å¦‚æžœä½ å¸Œæœ›å¼ºè¡Œé¢„è§ˆè‰ç¨¿ï¼Œæ›´æ”¹é…ç½®æ–‡ä»¶ï¼šrender_drafts: true æ³¨æ„ï¼šæ”¹ä¸ºtrueä¹‹åŽï¼Œdeployçº¿ä¸Šéƒ¨ç½²ä¹Ÿä¼šæ˜¾ç¤ºï¼Œä¸éœ€è¦çš„æ—¶å€™åŠ¡å¿…æ”¹æˆfalseã€‚å°†è‰ç¨¿å‘å¸ƒï¼Œè½¬æ¢åˆ°source/_postsä¸‹ï¼š12//å‘å¸ƒè‰ç¨¿$ hexo publish [è‰ç¨¿]]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æœ€å®Œå–„çš„markdownè½¬html/pdfæ–¹æ³•ã€å¸¦ç›®å½•ç”Ÿæˆ]]></title>
    <url>%2F2019%2F07%2F04%2Fmarkdown%E8%BD%AChtml%E3%80%81pdf-%E5%B8%A6%E7%9B%AE%E5%BD%95%E7%94%9F%E6%88%90%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å°ç¼–éœ€è¦å†™ä¸ªSDKæŽ¥å…¥æ–‡æ¡£ï¼Œç”¨wordè°ƒæ ¼å¼å½“ç„¶ä¸å¦‚markdownæ¥çš„èˆ’æœï¼Œå†™èµ·æ¥èˆ’æœäº†ï¼Œä½†æ˜¯.mdæ²¡åŠžæ³•ç›´æŽ¥çœ‹æ•ˆæžœï¼Œæœ€ç»ˆèŒç”Ÿå‡ºæŠŠmarkdownè½¬æˆhtmlå½¢å¼çš„æƒ³æ³•ã€‚ ç½‘ä¸Šmarkdownè½¬æ¢htmlçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬åœ¨çº¿è½¬æ¢å’Œå€ŸåŠ©å·¥å…·ï¼Œæœ€ç»ˆå°ç¼–é€‰æ‹©äº†VisualStudio Codeçš„æ’ä»¶Markdown Preview Enhancedã€‚ ç›®å½• 1.åœ¨çº¿è½¬æ¢çš„ç½‘ç«™ 2.å€ŸåŠ©å·¥å…· 2.1 typora 2.2 i5ting_toc 2.3 VisualStudio Codeæ’ä»¶ æ’ä»¶1ï¼šcopy Markdown as HTML æ’ä»¶2ï¼šMarkdown+Math æ’ä»¶3ï¼šMarkdown Preview Enhanced ï¼ˆæŽ¨èï¼‰ 1.åœ¨çº¿è½¬æ¢çš„ç½‘ç«™ http://www.bejson.com/convert/html2markdown/ ï¼šä¸æ”¯æŒè¡¨æ ¼ï¼Œä¸æŽ¨è http://www.atool9.com/html2markdown.php ï¼šä¸æ”¯æŒè¡¨æ ¼ï¼Œä¸æŽ¨è https://www.zai17.com/md2html/ ï¼š```{ä»£ç }```åŒ…å«çš„ä»£ç å¤„ç†ä¸å¤ªç†æƒ³ï¼Œä¸æŽ¨è https://github.com/markedjs/marked ï¼šè½¬æ¢ç»“æžœæ¯”è¾ƒç†æƒ³ï¼Œæ¸²æŸ“éœ€æ›´æ”¹ã€‚å¯ä»¥ç”¨Demo PageæŸ¥çœ‹æ•ˆæžœã€‚æ¸²æŸ“å¯ä»¥ä½¿ç”¨github-markdown-cssï¼Œgithubé£Žæ ¼ã€‚ â€¦ï¼ˆåœ¨çº¿çš„è¿˜æœ‰å¾ˆå¤šï¼Œåæ­£å°ç¼–æ²¡æœ‰æ‰¾åˆ°ç†æƒ³çš„ï¼‰ 2.å€ŸåŠ©å·¥å…·2.1 typoraå®˜ç½‘ä¸‹è½½ã€‚å¾ˆå¤šäººè¯´å¥½ç”¨ã€‚Q@QåŽŸè°…å°ç¼–æ²¡ä½¿æ˜Žç™½ã€‚ 2.2 i5ting_tocè§£æžæ¸²æŸ“okï¼Œå¯è‡ªåŠ¨ç”Ÿæˆä¾§è¾¹ç›®å½•ï¼Œä¸å¯ä»¥ç¼–å†™è¿‡ç¨‹ä¸­å®žæ—¶é¢„è§ˆï¼Œç”Ÿæˆçš„ä¾§è¾¹æ ä¸æ›´æ”¹æœ¬èº«.mdæ–‡ä»¶ï¼Œé™„å¸¦çš„æ ·å¼å¤ªå¤šã€‚ä¾èµ–NodeçŽ¯å¢ƒï¼Œé€šè¿‡npm install i5ting_toc -gå®‰è£…ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚ è¾“å…¥i5ting_toc -hå›žè½¦æŸ¥çœ‹å¸®åŠ©ã€‚ è½¬æ¢htmlï¼Œè¾“å…¥i5ting_toc -f [éœ€è¦è½¬æ¢æ–‡ä»¶å].mdé»˜è®¤åœ¨åŒçº§ç›®å½•ç”Ÿæˆpreviewæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€previewä¸‹çš„åŒå.htmlæ–‡ä»¶æˆ–è€…ç›´æŽ¥i5ting_toc -oå¯é¢„è§ˆã€‚ 2.3 VisualStudio Codeæ’ä»¶éœ€è¦å…ˆå®‰è£…VisualStudio Codeã€‚å³é”®.mdé€‰æ‹©æ‰“å¼€æ–¹å¼ä¸ºVisualStudio Codeã€‚ä¸‹è½½æ’ä»¶è½¬æ¢ã€‚ æ’ä»¶1ï¼šcopy Markdown as HTMLCtrl+Shift+Pï¼ˆMacOSï¼šcmd+shift+pï¼‰å‘¼å‡ºå‘½ä»¤é¢æ¿ã€‚è¾“å…¥markdown:copy as htmlé€‰ä¸­ï¼Œå¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œæ–°å»ºä¸€ä¸ª.htmlæ–‡ä»¶ï¼Œç²˜è´´ä¿®æ”¹ã€‚è½¬æ¢ç»“æžœæ¯”è¾ƒç†æƒ³ï¼Œæ¸²æŸ“éœ€æ›´æ”¹ æ’ä»¶2ï¼šMarkdown+MathCtrl+Shift+Pï¼ˆMacOSï¼šcmd+shift+pï¼‰å‘¼å‡ºå‘½ä»¤é¢æ¿ã€‚è¾“å…¥markdown:clip markdown+math to htmlé€‰ä¸­ï¼ŒåŒæ ·å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ª.htmlæ–‡ä»¶ï¼Œç²˜è´´ä¿®æ”¹ã€‚è½¬æ¢ç»“æžœæ¯”è¾ƒç†æƒ³ï¼Œæ¸²æŸ“éœ€æ›´æ”¹ æ’ä»¶3ï¼šMarkdown Preview Enhanced ï¼ˆæŽ¨èï¼‰åŽ†ç»åƒè¾›ä¸‡è‹¦ï¼Œå°ç¼–ç»ˆäºŽæ‰¾åˆ°äº†æ‡’äººçš„ç¦éŸ³ï¼Œå¯ä»¥ä¸€é”®ç”Ÿæˆç›®å½•ã€è¾“å‡ºhtml/pdfçš„å¼ºå¤§markdownæ’ä»¶â€“Markdown Preview Enhancedã€‚è¯¦ç»†ç”¨æ³•ç‚¹å‡»æŸ¥çœ‹å®˜ç½‘ã€‚ å¤šç§ç‰¹æ€§ï¼š è‡ªåŠ¨ç¼–è¾‘å™¨åŠé¢„è§ˆæ»‘åŠ¨åŒæ­¥ å¯å¯¼å‡ºçš„æ ¼å¼ï¼šæ¼‚äº®çš„htmlã€pandocã€ç”µå­ä¹¦ã€å¹»ç¯ç‰‡ã€PDFã€ PNGã€JPEG ã€‚ã€‚ æ”¯æŒLaTeX æ•°å­¦ã€æµç¨‹å›¾ / æ—¶åºå›¾ ä»¥åŠå„ç§å…¶ä»–ç§ç±»çš„å›¾å½¢ï¼ŒåµŒå…¥ LaTeX, æ¸²æŸ“ TikZ, Chemfig ç­‰å›¾å½¢ æ”¯æŒè‡ªå®šä¹‰é¢„è§ˆ CSS ç”Ÿæˆç›®å½•ã€‚ï¼ˆTOC ç”Ÿæˆï¼‰ â€¦ è¿™é‡Œå°ç¼–ä»‹ç»ä¸€ä¸‹ç›®å½•ç”ŸæˆåŠè¾“å‡ºhtmlã€‚é¦–å…ˆå®‰è£…æ’ä»¶ï¼šç‚¹å‡»ä¾§è¾¹æ æœ€åŽä¸€ä¸ªExtensionsï¼Œåœ¨æœç´¢æ¡†è¾“å…¥Markdown Preview Enhancedï¼Œç‚¹å‡»Installç­‰å¾…å®‰è£…å®Œæˆã€‚ æ‰“å¼€éœ€è¦è½¬æ¢çš„.mdæ–‡ä»¶ï¼Œå³é”®é€‰æ‹©æ‰“å¼€åŒæ­¥é¢„è§ˆã€‚ ç”Ÿæˆç›®å½•ï¼šè¯¦ç»†è®²è§£ å…‰æ ‡æ”¾ç½®æƒ³è¦ç”Ÿæˆç›®å½•çš„è¾“å‡ºä½ç½®ï¼ŒCtrl+Shift+Pï¼ˆMacOSï¼šcmd+shift+pï¼‰å‘¼å‡ºå‘½ä»¤é¢æ¿ï¼Œè¾“å…¥Markdown Preview Enhanced: Create Tocä¼šç”Ÿæˆä¸€æ®µç±»ä¼¼ç„¶åŽCtrl+sä¿å­˜ï¼Œå°±ä¼šç”Ÿæˆç›®å½•ã€‚æ³¨æ„ï¼šå¿…é¡»è¦åœ¨é¢„è§ˆæ‰“å¼€çš„æƒ…å†µä¸‹ç”Ÿæˆæ“ä½œï¼Œä¿å­˜æ‰èƒ½æ›´æ–°ã€‚ è¾“å‡ºhtmlï¼šåœ¨å³ä¾§çš„é¢„è§ˆç•Œé¢ï¼Œå³é”®ç‚¹å‡»é€‰æ‹©HTML-&gt;HTML(offline)ã€‚åœ¨å½“å‰.mdæ–‡ä»¶çš„åŒçº§ç›®å½•ä¼šç”Ÿæˆä¸€ä¸ªåŒå.htmlæ–‡ä»¶ï¼Œè§£æžæ¸²æŸ“éƒ½ç†æƒ³~ â€”â€”â€”â€”â€”â€”æœ¬æ–‡ç»“æŸâ€”â€”â€”â€”â€”â€” ç”Ÿæˆçš„htmlæ˜¯ä½ æƒ³è¦çš„æ ·å¼å—ï¼Ÿæˆ–è€…ä½ æœ‰æ›´å¥½çš„æ–¹æ³•æ¬¢è¿Žè”ç³»æˆ‘ æ›´å¤šå¥½æ–‡æ¬¢è¿Žå…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š]]></content>
  </entry>
  <entry>
    <title><![CDATA[Hexo--GitHub Pageséƒ¨ç½²]]></title>
    <url>%2F2019%2F03%2F22%2FHexo-GitHub-Pages%E9%83%A8%E7%BD%B2%2F</url>
    <content type="text"><![CDATA[éƒ¨ç½²åˆ°GitHub Pagesè¯·å…ˆå‡†å¤‡ä¸€ä¸ªGitHubè´¦å·ï¼Œæ²¡æœ‰çš„è¯ï¼Œå‡ºé—¨å³è½¬æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼šhttps://github.com/ Sign Upå¼€å§‹æ³¨å†Œ æœ‰Gitè´¦å·çš„å‡†å¤‡æ–°å»ºä»“åº“ï¼šhttps://github.com/new Repository nameå»ºè®®å¡«è‡ªå·±ç”¨æˆ·åOwnerå¸¦ä¸Š.github.io æ³¨æ„ä¸¤ç‚¹ï¼š ä»“åº“åä¸º[Owner].github.ioæ—¶æ‰å¯ä»¥é€šè¿‡https://[Owner].github.ioè®¿é—®ï¼Œå¦‚æžœä¸æ˜¯åˆ™éœ€è¦æŒ‰ç…§åŽŸæ¥çš„ä»“åº“å½¢å¼ï¼Œå³Gitåœ°å€+ç”¨æˆ·å+ä»“åº“å ä»“åº“æƒé™å¿…é¡»ä¸ºPublic åœ¨Hexoé¡¹ç›®é…ç½®æ–‡ä»¶_config.ymlä¸­ï¼Œæ‹‰åˆ°åº•éƒ¨ï¼Œæ‰¾åˆ°deployé…ç½®å­—æ®µï¼Œ1234567# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repository: #å‰é¢åˆ›å»ºçš„ä»“åº“åœ°å€ branch: master message: #æè¿° è¿è¡Œhexo clean &amp;&amp; hexo generate &amp;&amp; hexo deployï¼Œæ²¡è®¾ç½®å…¨å±€ç”¨æˆ·åçš„å¯èƒ½éœ€è¦è¾“å…¥Gitç”¨æˆ·åå¯†ç ã€‚ ç­‰å¾…ä¸€æ®µæ—¶é—´~ å®ŒæˆåŽåœ¨ä»“åº“çš„Settingsä¸­ï¼Œé…ç½®Sourceä¸ºmaster branchå°±èƒ½é€šè¿‡https://[Owner].github.ioè®¿é—®å•¦~ é…ç½®åŸŸåè®¿é—®åœ¨è…¾è®¯äº‘åŸŸåï¼ˆhttps://www.qcloud.com/act/event/dnspod_baidu?!preview ï¼‰æˆ–é˜¿é‡Œäº‘åŸŸåï¼ˆhttps://wanwang.aliyun.com/domain/?spm=a2c4g.11174283.2.1.789dc8caQX0KM1 ï¼‰è´­ä¹°ä¸€ä¸ªåŸŸåç™»é™†ç®¡ç†åŽå°ï¼Œé…ç½®äº‘è§£æžï¼Œæ·»åŠ è®°å½•å°†æƒ³è¦çš„å‰ç¼€é…ç½®CNAMEè§„åˆ™åˆ°gitåŸŸå[Owner].github.ioåœ¨ä»“åº“çš„Settingsä¸­GitHub Pagesçš„Custom domainå¡«å…¥é…ç½®çš„å‰ç¼€+åŸŸåå³å¯ã€‚Enforce HTTPSä¼šå¼ºåˆ¶åŸŸåè®¿é—®çš„æ—¶å€™ä¹Ÿæ˜¯é€šè¿‡httpsã€‚]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hexo--åšå®¢æ­å»º]]></title>
    <url>%2F2019%2F03%2F22%2FHexo--%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[æœ¬ç«™çš„åšå®¢æ­å»ºé‡‡ç”¨Hexo+NexTä¸»é¢˜ï¼Œéƒ¨ç½²åœ¨GitHub Pagesã€‚ä¸‹é¢æ‰‹æŠŠæ‰‹å¸¦ä½ æ­å»ºå…è´¹é«˜æ•ˆçš„åšå®¢ç³»ç»Ÿ~ ç®€ä»‹Hexoâ€“å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ï¼ŒåŸºäºŽNodeJSçŽ¯å¢ƒã€‚ è¶…å¿«é€Ÿåº¦Node.js æ‰€å¸¦æ¥çš„è¶…å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œè®©ä¸Šç™¾ä¸ªé¡µé¢åœ¨å‡ ç§’å†…çž¬é—´å®Œæˆæ¸²æŸ“ã€‚ æ”¯æŒ MarkdownHexo æ”¯æŒ GitHub Flavored Markdown çš„æ‰€æœ‰åŠŸèƒ½ï¼Œç”šè‡³å¯ä»¥æ•´åˆ Octopress çš„å¤§å¤šæ•°æ’ä»¶ã€‚ ä¸€é”®éƒ¨ç½²åªéœ€ä¸€æ¡æŒ‡ä»¤å³å¯éƒ¨ç½²åˆ° GitHub Pages, Heroku æˆ–å…¶ä»–ç½‘ç«™ã€‚ ä¸°å¯Œçš„æ’ä»¶Hexo æ‹¥æœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œå®‰è£…æ’ä»¶å¯ä»¥è®© Hexo æ”¯æŒ Jade, CoffeeScriptã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“Žï¼‰è§£æžæ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ å®‰è£…å®‰è£…å‰æï¼š NodeJSçŽ¯å¢ƒï¼šä¸‹è½½åœ°å€ Gitï¼šWindows | Mac å®‰è£…Hexoï¼š1npm install -g hexo-cli å…·ä½“çš„å®‰è£…è¿‡ç¨‹çš„é—®é¢˜ï¼Œè¿™é‡Œä¸å†è¿‡å¤šæåŠã€‚å®˜æ–¹å®‰è£…æ–‡æ¡£ï¼šhttps://hexo.io/zh-cn/docs/ å»ºç«™æ–°å»ºæ–‡ä»¶å¤¹åˆ›å»ºé¡¹ç›®ï¼š123hexo init &lt;folder&gt;cd &lt;folder&gt;npm install è‹¥éœ€è¦åœ¨å½“å‰æ–‡ä»¶å¤¹ç›´æŽ¥åˆ›å»ºï¼Œåœ¨å½“å‰ç›®å½•ä¸‹hexo initã€‚ Hexoé¡¹ç›®ç›®å½•ç»“æž„ï¼š12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes _config.ymlï¼šç½‘ç«™çš„é…ç½®ä¿¡æ¯ã€‚å®˜æ–¹é…ç½®æ–‡æ¡£ï¼šhttps://hexo.io/zh-cn/docs/configuration ã€‚ package.jsonï¼šåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚ scaffoldsï¼šæ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ®scaffoldæ¥å»ºç«‹æ–‡ä»¶ã€‚å®˜æ–¹æ¨¡æ¿é…ç½®æ–‡æ¡£ï¼šhttps://hexo.io/zh-cn/docs/templates sourceï¼šèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æžå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡åŽ»ã€‚ themesï¼šä¸»é¢˜æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ é¡¹ç›®ä¸‹çš„_config.ymlä¸ºé¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œä¸»é¢˜ä¸‹çš„_config.ymlä¸ºä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚ æ‰§è¡Œ1hexo generate &amp;&amp; hexo server --debug å³å¯åœ¨æœ¬åœ°http://localhost:4000/ æŸ¥çœ‹é»˜è®¤çš„ç½‘ç«™æ ·å¼å•¦~ å‘½ä»¤æ–°å»ºç½‘ç«™é¡¹ç›®1hexo init [folder] å¦‚æžœæ²¡æœ‰è®¾ç½® folder ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™ã€‚ æ–°å»ºæ–‡ç« 1hexo new [layout] &lt;title&gt; å¦‚æžœæ²¡æœ‰è®¾ç½® layout çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ ç½‘ç«™é…ç½®_config.yml ä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚ å¦‚æžœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚ ä¹Ÿå¯ä»¥ç®€å†™ï¼šhexo n [layout] &lt;title&gt; ç”Ÿæˆé™æ€æ–‡ä»¶1hexo generate -d, â€“deploy æ–‡ä»¶ç”ŸæˆåŽç«‹å³éƒ¨ç½²ç½‘ç«™ -w, â€“watch ç›‘è§†æ–‡ä»¶å˜åŠ¨ ä¹Ÿå¯ä»¥ç®€å†™ï¼šhexo g æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨1hexo server é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ã€‚ -p, â€“port é‡è®¾ç«¯å£ -s, â€“static åªä½¿ç”¨é™æ€æ–‡ä»¶ -l, â€“log å¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼ ä¹Ÿå¯ä»¥ç®€å†™ï¼šhexo s çº¿ä¸Šéƒ¨ç½²1hexo deploy -g, â€“generate éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶ ä¹Ÿå¯ä»¥ç®€å†™ï¼šhexo d éƒ¨ç½²åˆ°GitHub Pagesè¯·çœ‹è¿™ç¯‡æ–‡ç« ~ æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶1hexo clean æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚ åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åŽï¼‰ï¼Œå¦‚æžœå‘çŽ°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ æ›´æ”¹é…ç½®æ–‡ä»¶_config.ymlåŽéœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ä¸ç„¶å¯èƒ½ä¼šæŠ¥Unhandled rejection Error: ENOENT: no such file or directory, open &#39;**&#39;ã€‚ ä¸»é¢˜Hexoçš„é»˜è®¤ä¸»é¢˜æ˜¯landscapeï¼Œå®˜æ–¹æŽ¨èä¸»é¢˜ï¼šhttps://hexo.io/themes/ æœ¬åšå®¢ç½‘ç«™ä½¿ç”¨çš„ä¸»é¢˜æ˜¯NexT.Pisceså¦‚éœ€è¦v6åŠä»¥ä¸Šçš„ï¼Œè¯·çœ‹æ–°ä»“åº“https://github.com/theme-next/hexo-theme-next å®‰è£…å…ˆä»Žgitå°†ä¸»é¢˜æ‹‰ä¸‹æ¥ï¼Œåœ¨é¡¹ç›®ä¸‹1git clone https://github.com/iissnan/hexo-theme-next themes/next åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶_config.ymlä¸­æŸ¥æ‰¾themeï¼Œä¿®æ”¹å€¼ä¸ºtheme: nextã€‚ï¼ˆæ³¨æ„nextå‰çš„ç©ºæ ¼å“¦ï¼‰ ç„¶åŽhexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debugå°±èƒ½çœ‹è§nextä¸»é¢˜çš„é»˜è®¤æ ·å¼å•¦ é€‰æ‹©NexT.Pisceséœ€è¦åœ¨themes/nextä¸‹çš„ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä¸­æŸ¥æ‰¾schemeï¼Œä¿®æ”¹å€¼ä¸ºscheme: Pisceså†è¿è¡Œä¸Šé¢çš„é‡æ–°å¯åŠ¨ï¼Œå°±èƒ½çœ‹åˆ°æ ·å¼å•¦ å®‰è£…Hexoå’ŒNextä¸»é¢˜åˆ°æ­¤å°±ç»“æŸå•¦~ è¦è¯´çš„è¯å»ºè®®åœ¨é¡¹ç›®ä¸‹package.jsonä¸­é…ç½®å¼€å‘è¿è¡Œè„šæœ¬å’Œéƒ¨ç½²è„šæœ¬ï¼Œåœ¨æœ€å¤–å±‚jsonä¸­æ·»åŠ ï¼š1234"scripts": &#123; "dev": "hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server --debug", "start": "hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy" &#125;, ä»¥åŽå¼€å‘è¿è¡Œnpm run devå°±å¥½å•¦ã€‚çº¿ä¸Šéƒ¨ç½²ä½¿ç”¨npm run startã€‚]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Scrapydä½¿ç”¨è¯¦è§£]]></title>
    <url>%2F2019%2F03%2F13%2Fscrapyd%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å‰è¨€Scrapydé€šå¸¸ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œå®ƒä¾¦å¬è¿è¡Œçˆ¬è™«çš„è¯·æ±‚ï¼Œå¹¶ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹åŸºæœ¬ä¸Šæ‰§è¡Œ:scrapy crawl [myspider]ã€‚ Scrapydè¿˜å¹¶è¡Œè¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œå°†å®ƒä»¬åˆ†é…åˆ°max_procå’Œmax_proc_per_cpué€‰é¡¹æä¾›çš„å›ºå®šæ•°é‡çš„æ’æ§½ä¸­ï¼Œå¯åŠ¨å°½å¯èƒ½å¤šçš„è¿›ç¨‹æ¥å¤„ç†è´Ÿè½½ã€‚ é™¤äº†è°ƒåº¦å’Œç®¡ç†è¿›ç¨‹ä¹‹å¤–ï¼ŒScrapydè¿˜æä¾›äº†ä¸€ä¸ªJSON webæœåŠ¡æ¥ä¸Šè½½æ–°çš„é¡¹ç›®ç‰ˆæœ¬(ä½œä¸ºegg)å’Œè°ƒåº¦çˆ¬è™«ã€‚ Scrapydå®˜æ–¹æ–‡æ¡£ https://scrapyd.readthedocs.io/en/latest/index.html ä½¿ç”¨è¯¦è§£å®‰è£…1pip install scrapyd ä¾èµ–çš„åº“åŠç‰ˆæœ¬ï¼š Python 2.7 or above Twisted 8.0 or above Scrapy 1.0 or above six å¯åŠ¨åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œè¾“å…¥scrapydå³å¯è¿è¡Œï¼Œé»˜è®¤åœ°å€ä¸ºhttp://localhost:68001scrapyd å®˜æ–¹è¯¦ç»†é…ç½®æ–‡æ¡£è¯´æ˜Žï¼šhttps://scrapyd.readthedocs.io/en/latest/config.html ä¿®æ”¹é»˜è®¤é…ç½®ä¿¡æ¯å¯ä»¥åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ªscrapyd.confæˆ–è€…åœ¨scrapy.cfgä¸­å¢žåŠ [scrapyd]ï¼š123456[scrapyd]# ç½‘é¡µå’ŒJsonæœåŠ¡ç›‘å¬çš„IPåœ°å€ï¼Œé»˜è®¤ä¸º127.0.0.1bind_address = 127.0.0.1# ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä¸º6800http_port = 6800debug = off é¡¹ç›®éƒ¨ç½²éƒ¨ç½²ä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼š å°†é¡¹ç›®æ‰“åŒ…æˆegg å°†eggé€šè¿‡Scrapydçš„addversion.jsonæŽ¥å£ä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨ å®˜æ–¹çš„éƒ¨ç½²ä¸Šä¼ æŽ¥å£æ–‡æ¡£ï¼šhttps://scrapyd.readthedocs.io/en/latest/api.html#addversion-json æŽ¨èä½¿ç”¨Scrapyd-clientä¸­çš„scrapyd-deployä¸€æ­¥ä¸Šä¼ ï¼Œå…³äºŽScrapyd-clientä»‹ç»ï¼š Scrapyd-client is a client for Scrapyd. It provides the general scrapyd-client and the scrapyd-deploy utility which allows you to deploy your project to a Scrapyd server. Scrapy-clientå®‰è£…1pip install scrapyd-client]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Scrapyçº¿ä¸Šéƒ¨ç½²</tag>
        <tag>Scrapyd</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webstorm .swigæ–‡ä»¶è¯­æ³•é«˜äº®]]></title>
    <url>%2F2019%2F03%2F07%2Fwebstorm-swig%E6%96%87%E4%BB%B6%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%2F</url>
    <content type="text"><![CDATA[å‰è¨€swigæ˜¯nodeJSå‰ç«¯æ¨¡æ¿å¼•æ“Žï¼Œswigç‰¹ç‚¹çœ‹è¿™é‡Œã€‚ è¯­æ³•é«˜äº®webstromï¼ˆ1ï¼‰åœ¨File&gt;Settings&gt;Pluginsï¼Œé€‰æ‹©ä¸‹æ–¹ Browse repositories... ï¼ˆ2ï¼‰åœ¨ç¼–è¾‘æ¡†è¾“å…¥ twigï¼Œç‚¹å‡» Twig Supportï¼ŒInstallä¹‹åŽé‡å¯webstorm ï¼ˆ3ï¼‰é‡å¯åŽï¼Œæ‰“å¼€File&gt;Settings&gt;Editor&gt;File Typesï¼Œæ‰¾åˆ°Twigï¼Œç‚¹å‡»+å·æ·»åŠ *.swigï¼ŒapplyåŽå°±èƒ½çœ‹åˆ°.swigéƒ½é«˜äº®å•¦~]]></content>
      <tags>
        <tag>.swig</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå‡ºçŽ°The following problems have occurred when adding the files: *** is in submodule]]></title>
    <url>%2F2019%2F03%2F06%2Fgit%E5%87%BA%E7%8E%B0The-following-problems-have-occurred-when-adding-the-files-is-in-submodule%2F</url>
    <content type="text"><![CDATA[å‰è¨€å¼€å§‹æ­å»ºåšå®¢çš„æ—¶å€™ï¼Œä½¿ç”¨åˆ°Nextä¸»é¢˜1git clone https://github.com/iissnan/hexo-theme-next themes/next cloneä¸‹çš„é¡¹ç›®å†…åŒ…å«.gitéšè—æ–‡ä»¶ï¼Œåˆ é™¤åŽï¼Œæ›´æ”¹ä¸»é¢˜çš„ä»£ç åŽæäº¤æŠ¥é”™ï¼Œæ‰‹åŠ¨git addä¾ç„¶æŠ¥é”™The following problems have occurred when adding the files: *** is in submodule è§£å†³è¿™æ˜¯å› ä¸ºæœ¬æ¥æ˜¯å…¶ä»–gité¡¹ç›®ï¼Œéœ€è¦æ¸…é™¤ç¼“å­˜è®°å½•ã€‚1git rm -rf --cached themes/next è¿è¡Œä¸Šé¢çš„ä»£ç ä¹‹åŽï¼Œå†git addå°±ä¸ä¼šæŠ¥é”™å•¦~]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android PæŠ¥java.net.UnknownServiceException: CLEARTEXT communication to *** not permitted by netwo...]]></title>
    <url>%2F2019%2F03%2F06%2FAndroid-P%E6%8A%A5java-net-UnknownServiceException-CLEARTEXT-communication-to-not-permitted-by-netwo%2F</url>
    <content type="text"><![CDATA[åŽŸå› ç”±äºŽ Android P é™åˆ¶äº†æ˜Žæ–‡æµé‡çš„ç½‘ç»œè¯·æ±‚ï¼ŒéžåŠ å¯†çš„æµé‡è¯·æ±‚éƒ½ä¼šè¢«ç³»ç»Ÿç¦æ­¢æŽ‰ã€‚ å¦‚æžœå½“å‰åº”ç”¨çš„è¯·æ±‚æ˜¯ htttp è¯·æ±‚ï¼Œè€Œéž https ,è¿™æ ·å°±ä¼šå¯¼ç³»ç»Ÿç¦æ­¢å½“å‰åº”ç”¨è¿›è¡Œè¯¥è¯·æ±‚ï¼Œå¦‚æžœ WebView çš„ url ç”¨ http åè®®ï¼ŒåŒæ ·ä¼šå‡ºçŽ°åŠ è½½å¤±è´¥ï¼Œhttps ä¸å—å½±å“ã€‚ ä¸ºæ­¤ï¼ŒOkHttp3 åšäº†æ£€æŸ¥ï¼Œæ‰€ä»¥å¦‚æžœä½¿ç”¨äº†æ˜Žæ–‡æµé‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ Android P ç‰ˆæœ¬ OkHttp3 å°±æŠ›å‡ºå¼‚å¸¸: CLEARTEXT communication to *** not permitted by network security policy è§£å†³åŠžæ³•ï¼ˆä»»é€‰ä¸€ä¸ªï¼‰1.åœ¨ res ä¸‹æ–°å»ºä¸€ä¸ª xmlç›®å½•ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªåä¸ºï¼šnetwork_security_config.xml æ–‡ä»¶ ï¼Œè¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š1234&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;network-security-config&gt; &lt;base-config cleartextTrafficPermitted="true" /&gt;&lt;/network-security-config&gt; ç„¶åŽåœ¨ AndroidManifest.xml application æ ‡ç­¾å†…åº”ç”¨ä¸Šé¢çš„xmlé…ç½®ï¼šandroid:networkSecurityConfig=&quot;@xml/network_security_config&quot;123456&lt;application android:name=".app.App" android:allowBackup="true" android:icon="@mipmap/ic_launcher" android:networkSecurityConfig="@xml/network_security_config" android:label="@string/app_name" android:theme="@style/AppTheme"&gt; 2.æœåŠ¡å™¨å’Œæœ¬åœ°åº”ç”¨éƒ½æ”¹ç”¨ https 3.targetSdkVersion é™çº§å›žåˆ° 27]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android P</tag>
      </tags>
  </entry>
</search>
